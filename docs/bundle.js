!function(e){var t={};function n(o){if(t[o])return t[o].exports;var c=t[o]={i:o,l:!1,exports:{}};return e[o].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(o,c,function(t){return e[t]}.bind(null,c));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";var o=n(2),c=n(3);function i(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,o){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===o[e]&&(o[e]={}),o[e][t[1]]=n):o[e]=n};case"bracket":return function(e,n,o){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==o[e]?o[e]=[].concat(o[e],n):o[e]=[n]:o[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=c({arrayFormat:"none"},t)),o=Object.create(null);return"string"!=typeof e?o:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),c=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:decodeURIComponent(i),n(decodeURIComponent(c),i,o)})),Object.keys(o).sort().reduce((function(e,t){var n=o[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))):o},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,o){return null===n?[i(t,e),"[",o,"]"].join(""):[i(t,e),"[",i(o,e),"]=",i(n,e)].join("")};case"bracket":return function(t,n){return null===n?i(t,e):[i(t,e),"[]=",i(n,e)].join("")};default:return function(t,n){return null===n?i(t,e):[i(t,e),"=",i(n,e)].join("")}}}(t=c({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(o){var c=e[o];if(void 0===c)return"";if(null===c)return i(o,t);if(Array.isArray(c)){var r=[];return c.slice().forEach((function(e){void 0!==e&&r.push(n(o,e,r.length))})),r.join("&")}return i(o,t)+"="+i(c,t)})).filter((function(e){return e.length>0})).join("&"):""}},function(e,t,n){e.exports=n(8)},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var o=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,a=r(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))c.call(n,u)&&(a[u]=n[u]);if(o){s=o(n);for(var f=0;f<s.length;f++)i.call(n,s[f])&&(a[s[f]]=n[s[f]])}}return a}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function o(){}n.r(t);function c(e,t,n,o,c){e.__svelte_meta={loc:{file:t,line:n,column:o,char:c}}}function i(e){return e()}function r(){return Object.create(null)}function s(e){e.forEach(i)}function a(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function u(e,t){if(!e||"function"!=typeof e.subscribe)throw new Error(`'${t}' is not a store with a 'subscribe' method`)}function f(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}function d(e,t,n){e.$$.on_destroy.push(f(t,n))}new Set;function p(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode.removeChild(e)}function h(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function b(){return v(" ")}function y(){return v("")}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function w(e,t){(null!=t||e.value)&&(e.value=t)}function k(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}let C;function S(e){C=e}function x(){if(!C)throw new Error("Function called outside component initialization");return C}function R(e){x().$$.on_mount.push(e)}function O(){const e=x();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const c=k(t,n);o.slice().forEach(t=>{t.call(e,c)})}}}const j=[],_=[],E=[],M=[],B=Promise.resolve();let A=!1;function N(){A||(A=!0,B.then(D))}function P(e){E.push(e)}function D(){const e=new Set;do{for(;j.length;){const e=j.shift();S(e),q(e.$$)}for(;_.length;)_.pop()();for(let t=0;t<E.length;t+=1){const n=E[t];e.has(n)||(n(),e.add(n))}E.length=0}while(j.length);for(;M.length;)M.pop()();A=!1}function q(e){null!==e.fragment&&(e.update(),s(e.before_update),e.fragment&&e.fragment.p(e.ctx,e.dirty),e.dirty=[-1],e.after_update.forEach(P))}const L=new Set;let U;function I(){U={r:0,c:[],p:U}}function T(){U.r||s(U.c),U=U.p}function F(e,t){e&&e.i&&(L.delete(e),e.i(t))}function J(e,t,n,o){if(e&&e.o){if(L.has(e))return;L.add(e),U.c.push(()=>{L.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}const V="undefined"!=typeof window?window:global;new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let H;function z(e){e&&e.c()}function W(e,t,n){const{fragment:o,on_mount:c,on_destroy:r,after_update:l}=e.$$;o&&o.m(t,n),P(()=>{const t=c.map(i).filter(a);r?r.push(...t):s(t),e.$$.on_mount=[]}),l.forEach(P)}function G(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function K(e,t,n,c,i,a,l=[-1]){const u=C;S(e);const f=t.props||{},d=e.$$={fragment:null,ctx:null,props:a,update:o,not_equal:i,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:l};let p=!1;var m;d.ctx=n?n(e,f,(t,n,o=n)=>(d.ctx&&i(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),p&&function(e,t){-1===e.$$.dirty[0]&&(j.push(e),N(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n)):[],d.update(),p=!0,s(d.before_update),d.fragment=!!c&&c(d.ctx),t.target&&(t.hydrate?d.fragment&&d.fragment.l((m=t.target,Array.from(m.childNodes))):d.fragment&&d.fragment.c(),t.intro&&F(e.$$.fragment),W(e,t.target,t.anchor),D()),S(u)}"function"==typeof HTMLElement&&(H=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}$destroy(){G(this,1),this.$destroy=o}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}});class Q{$destroy(){G(this,1),this.$destroy=o}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function X(e,t){document.dispatchEvent(k(e,t))}function Y(e,t){X("SvelteDOMInsert",{target:e,node:t}),function(e,t){e.appendChild(t)}(e,t)}function Z(e,t,n){X("SvelteDOMInsert",{target:e,node:t,anchor:n}),p(e,t,n)}function ee(e){X("SvelteDOMRemove",{node:e}),m(e)}function te(e,t,n,o,c,i){const r=!0===o?["capture"]:o?Array.from(Object.keys(o)):[];c&&r.push("preventDefault"),i&&r.push("stopPropagation"),X("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:r});const s=function(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}(e,t,n,o);return()=>{X("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:r}),s()}}function ne(e,t,n){$(e,t,n),null==n?X("SvelteDOMRemoveAttribute",{node:e,attribute:t}):X("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function oe(e,t){t=""+t,e.data!==t&&(X("SvelteDOMSetData",{node:e,data:t}),e.data=t)}class ce extends Q{constructor(e){if(!e||!e.target&&!e.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}}const ie=[];function re(e,t=o){let n;const c=[];function i(t){if(l(e,t)&&(e=t,n)){const t=!ie.length;for(let t=0;t<c.length;t+=1){const n=c[t];n[1](),ie.push(n,e)}if(t){for(let e=0;e<ie.length;e+=2)ie[e][0](ie[e+1]);ie.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(r,s=o){const a=[r,s];return c.push(a),1===c.length&&(n=t(i)||o),r(e),()=>{const e=c.indexOf(a);-1!==e&&c.splice(e,1),0===c.length&&(n(),n=null)}}}}function se(e,t,n){const c=!Array.isArray(e),i=c?[e]:e,r=t.length<2;return{subscribe:re(n,e=>{let n=!1;const l=[];let u=0,f=o;const d=()=>{if(u)return;f();const n=t(c?l[0]:l,e);r?e(n):f=a(n)?n:o},p=i.map((e,t)=>e.subscribe(e=>{l[t]=e,u&=~(1<<t),n&&d()},()=>{u|=1<<t}));return n=!0,d(),function(){s(p),f()}}).subscribe}}var ae=n(0),le=n.n(ae);const ue=re([]),fe=e=>{try{return!0===JSON.parse(e)}catch{return!1}},de=re((()=>{const e=le.a.parse(location.search),t={role:e.role||"both",stream:e.stream||"both",manual:fe(e.manual),remote:fe(e.remote)};return Object.entries(t).map(([e,t])=>({key:e,value:t}))})()),pe=se(de,e=>`${window.location.protocol}//${window.location.host}/?${le.a.stringify(Object.fromEntries(e.map(({key:e,value:t})=>[e,t])))}`),me=se(de,e=>{const t=Object.fromEntries(e.map(({key:e,value:t})=>[e,t]));let{role:n,stream:o,manual:c,remote:i}=t;const r="recv"!==n,s="call"!==n&&"send"!==n||!1,a="down"!==o||!1,l="up"!==o||!1,u=c&&"no"!==c||!1,f=i&&"no"!==i||!1,d=r?"bob":"alice",p=s?"bob":"alice";return{...t,role:n,stream:o,manual:c,remote:i,hasCaller:r,hasReceiver:s,hasUpstream:a,hasDownstream:l,isManual:u,isRemote:f,to:d,from:p}}),he=re({});const ge=e=>(t,n)=>(function(e,t,n){const o={name:e,short:t,event:n};ue.update(e=>[...e,o]),he.update(n=>({...n,[e]:[...n[e]||[],t]}))})(e,t,n),ve=re({}),be=re({}),ye=re({});function $e({from:e,offer:t}){ve.update(n=>({...n,[e]:t}))}function we({from:e,answer:t}){be.update(n=>({...n,[e]:t}))}function ke({from:e,candidate:t}){ye.update(n=>{const o=n[e]||[];return{...n,[e]:[...o,t]}})}function Ce({from:e}){ye.update(t=>({...t,[e]:[]}))}n(4);const Se="src/Config.svelte";function xe(e,t,n){const o=e.slice();return o[6]=t[n].key,o[7]=t[n].value,o[8]=t,o[9]=n,o}function Re(e){let t,n;function o(){e[5].call(t,e[7],e[8],e[9])}const i={c:function(){t=g("input"),ne(t,"type","text"),c(t,Se,33,12,774),n=te(t,"input",o)},m:function(n,o){Z(n,t,o),w(t,e[7])},p:function(n,o){e=n,2&o&&t.value!==e[7]&&w(t,e[7])},d:function(e){e&&ee(t),n()}};return X("SvelteRegisterBlock",{block:i,id:Re.name,type:"else",source:"(33:12) {:else}",ctx:e}),i}function Oe(e){let t,n;function o(){e[4].call(t,e[7],e[8],e[9])}const i={c:function(){t=g("input"),ne(t,"type","checkbox"),c(t,Se,31,12,696),n=te(t,"change",o)},m:function(n,o){Z(n,t,o),t.checked=e[7]},p:function(n,o){e=n,2&o&&(t.checked=e[7])},d:function(e){e&&ee(t),n()}};return X("SvelteRegisterBlock",{block:i,id:Oe.name,type:"if",source:"(31:12) {#if typeof value === 'boolean'}",ctx:e}),i}function je(e){let t,n,o,i,r,s,a=e[6]+"";function l(e,t){return"boolean"==typeof e[7]?Oe:Re}let u=l(e),f=u(e);const d={c:function(){t=g("tr"),n=g("td"),o=v(a),i=b(),r=g("td"),f.c(),s=b(),c(n,Se,28,12,607),c(r,Se,29,12,634),c(t,Se,27,8,590)},m:function(e,c){Z(e,t,c),Y(t,n),Y(n,o),Y(t,i),Y(t,r),f.m(r,null),Y(t,s)},p:function(e,t){2&t&&a!==(a=e[6]+"")&&oe(o,a),u===(u=l(e))&&f?f.p(e,t):(f.d(1),f=u(e),f&&(f.c(),f.m(r,null)))},d:function(e){e&&ee(t),f.d()}};return X("SvelteRegisterBlock",{block:d,id:je.name,type:"each",source:"(27:4) {#each $query as {key, value}",ctx:e}),d}function _e(e){let t,n,i,r,s,a,l,u,f,d=e[1],p=[];for(let t=0;t<d.length;t+=1)p[t]=je(xe(e,d,t));const m={c:function(){t=g("details"),n=g("summary"),n.textContent="config",i=b(),r=g("code"),s=g("pre"),a=g("a"),l=v(e[0]),u=b(),f=g("table");for(let e=0;e<p.length;e+=1)p[e].c();c(n,Se,20,4,428),ne(a,"href",e[0]),c(a,Se,22,4,474),c(s,Se,21,10,464),ne(r,"class","svelte-12ii7jf"),c(r,Se,21,4,458),c(f,Se,25,4,536),c(t,Se,19,0,414)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){Z(e,t,o),Y(t,n),Y(t,i),Y(t,r),Y(r,s),Y(s,a),Y(a,l),Y(t,u),Y(t,f);for(let e=0;e<p.length;e+=1)p[e].m(f,null)},p:function(e,[t]){if(1&t&&oe(l,e[0]),1&t&&ne(a,"href",e[0]),2&t){let n;for(d=e[1],n=0;n<d.length;n+=1){const o=xe(e,d,n);p[n]?p[n].p(o,t):(p[n]=je(o),p[n].c(),p[n].m(f,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=d.length}},i:o,o:o,d:function(e){e&&ee(t),h(p,e)}};return X("SvelteRegisterBlock",{block:m,id:_e.name,type:"component",source:"",ctx:e}),m}function Ee(e,t,n){let o,c;u(pe,"configUrl"),d(e,pe,e=>n(0,o=e)),u(de,"query"),d(e,de,e=>n(1,c=e));return e.$capture_state=()=>({}),e.$inject_state=e=>{"$configUrl"in e&&pe.set(o=e.$configUrl),"$query"in e&&de.set(c=e.$query)},[o,c,e=>{try{return"boolean"===JSON.parse(e)}catch{return!1}},({target:{value:e,name:t}})=>{me.update(n=>({...n,[t]:"on"===e}))},function(e,t,n){t[n].value=this.checked,de.set(c)},function(e,t,n){t[n].value=this.value,de.set(c)}]}var Me=class extends ce{constructor(e){super(e),K(this,e,Ee,_e,l,{}),X("SvelteRegisterComponent",{component:this,tagName:"Config",options:e,id:_e.name})}};class Be{constructor({to:e,from:t}){this.to=e,this.from=t}connect({url:e}){this.url=e;const t=new WebSocket(e);t.onopen=()=>{this.socket=t,this.socket.onmessage=this.received.bind(this)}}received({data:e}){const t=JSON.parse(e),{[this.to]:n,type:o}=t;console.debug("its for me!",n);const c=this.to;switch(o){case"offer":$e({from:c,offer:n});break;case"answer":we({from:c,answer:n});break;case"candidate":ke({from:c,candidate:new RTCIceCandidate(n)})}}sendOffer(e){if(e){const t={[this.from]:e,type:"offer"};this.send(t)}}sendAnswer(e){if(e){const t={[this.from]:e,type:"answer"};this.send(t)}}sendCandidate(e){if(e){const t={[this.from]:e,type:"candidate"};this.send(t)}}send(e){if(this.socket){const t=JSON.stringify(e);this.socket.send(t)}}toString(){return`[Signaling Server calling ${this.from} â†’ ${this.to}]`}}const Ae=e=>"string"==typeof e?JSON.parse(e).sdp:"object"==typeof e?e.sdp:void 0,Ne=e=>{try{return JSON.parse(e)}catch(t){return""!==e&&console.warn({parseError:t}),[]}},Pe=e=>({type:"offer",sdp:e}),De=e=>({type:"answer",sdp:e});n(5);const qe="src/Upstream.svelte";function Le(e){let t,n,i,r,a,l,u,f,d,p,m,h,y,$,w,k;const C={c:function(){t=g("label"),t.textContent="upstream",n=b(),i=g("video"),r=b(),a=g("nav"),l=g("button"),l.textContent="start upstream",u=b(),f=g("span"),d=g("label"),p=g("input"),m=v("\n            webcam"),h=b(),y=g("label"),$=g("input"),w=v("\n            noise"),ne(t,"for","upstream"),c(t,qe,50,0,1442),ne(i,"id","upstream"),i.autoplay="true",ne(i,"width","400"),ne(i,"height","300"),ne(i,"class","svelte-v4j238"),c(i,qe,51,0,1481),c(l,qe,54,4,1583),ne(p,"type","radio"),p.__value=Ue,p.value=p.__value,e[6][0].push(p),c(p,qe,57,12,1679),c(d,qe,56,8,1659),ne($,"type","radio"),$.__value=Ie,$.value=$.__value,e[6][0].push($),c($,qe,62,12,1817),c(y,qe,61,8,1797),c(f,qe,55,4,1644),ne(a,"class","svelte-v4j238"),c(a,qe,52,0,1572),k=[te(l,"click",e[2],!1,!1,!1),te(p,"change",e[5]),te($,"change",e[7])]},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,c){Z(o,t,c),Z(o,n,c),Z(o,i,c),e[4](i),Z(o,r,c),Z(o,a,c),Y(a,l),Y(a,u),Y(a,f),Y(f,d),Y(d,p),p.checked=p.__value===e[0],Y(d,m),Y(f,h),Y(f,y),Y(y,$),$.checked=$.__value===e[0],Y(y,w)},p:function(e,[t]){1&t&&(p.checked=p.__value===e[0]),1&t&&($.checked=$.__value===e[0])},i:o,o:o,d:function(o){o&&ee(t),o&&ee(n),o&&ee(i),e[4](null),o&&ee(r),o&&ee(a),e[6][0].splice(e[6][0].indexOf(p),1),e[6][0].splice(e[6][0].indexOf($),1),s(k)}};return X("SvelteRegisterBlock",{block:C,id:Le.name,type:"component",source:"",ctx:e}),C}async function Ue(){return await navigator.mediaDevices.getUserMedia({video:!0})}function Ie(){let e=Object.assign(document.createElement("canvas"),{width:400,height:300}),t=e.getContext("2d");t.fillRect(0,0,e.width,e.height);let n=t.getImageData(0,0,e.width,e.height);return requestAnimationFrame((function e(){for(var o=0;o<n.data.length;o++)n.data[o++]=n.data[o++]=n.data[o++]=255*Math.random();t.putImageData(n,0,0),requestAnimationFrame(e)})),e.captureStream(60)}function Te(e,t,n){const o=O();let c,i=Ue;R(()=>{});return e.$capture_state=()=>({}),e.$inject_state=e=>{"upstreamSource"in e&&n(0,i=e.upstreamSource),"upstreamVideo"in e&&n(1,c=e.upstreamVideo)},[i,c,async function(){const e=await i();console.debug({stream:e}),n(1,c.srcObject=e,c),o("stream",e)},o,function(e){_[e?"unshift":"push"](()=>{n(1,c=e)})},function(){i=this.__value,n(0,i)},[[]],function(){i=this.__value,n(0,i)}]}var Fe=class extends ce{constructor(e){super(e),K(this,e,Te,Le,l,{}),X("SvelteRegisterComponent",{component:this,tagName:"Upstream",options:e,id:Le.name})}};const Je="src/RemoteBar.svelte";function Ve(e){let t,n,i,r,a,l;const u={c:function(){var o;t=g("form"),n=g("input"),i=b(),r=g("code"),a=v(e[0]),ne(n,"size","90"),ne(n,"placeholder","ws url"),c(n,Je,18,4,498),c(t,Je,17,0,451),c(r,Je,21,0,576),l=[te(n,"input",e[2]),te(t,"submit",(o=He,function(e){return e.preventDefault(),o.call(this,e)}),!1,!0,!1)]},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,c){Z(o,t,c),Y(t,n),w(n,e[1]),Z(o,i,c),Z(o,r,c),Y(r,a)},p:function(e,[t]){2&t&&n.value!==e[1]&&w(n,e[1]),1&t&&oe(a,e[0])},i:o,o:o,d:function(e){e&&ee(t),e&&ee(i),e&&ee(r),s(l)}};return X("SvelteRegisterBlock",{block:u,id:Ve.name,type:"component",source:"",ctx:e}),u}function He(){}function ze(e,t,n){let{signalingClient:o}=t;const c=["signalingClient"];let i;return Object.keys(t).forEach(e=>{~c.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<RemoteBar> was created with unknown prop '${e}'`)}),e.$set=e=>{"signalingClient"in e&&n(0,o=e.signalingClient)},e.$capture_state=()=>({signalingClient:o,signalingServer:i}),e.$inject_state=e=>{"signalingClient"in e&&n(0,o=e.signalingClient),"signalingServer"in e&&n(1,i=e.signalingServer)},e.$$.update=()=>{3&e.$$.dirty&&(o.connect({url:i}),window.client=o)},n(1,i=`wss://${window.location.host}/signaling/test`),[o,i,function(){i=this.value,n(1,i)}]}var We=class extends ce{constructor(e){super(e),K(this,e,ze,Ve,l,{signalingClient:0}),X("SvelteRegisterComponent",{component:this,tagName:"RemoteBar",options:e,id:Ve.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"signalingClient"in n||console.warn("<RemoteBar> was created without expected prop 'signalingClient'")}get signalingClient(){throw new Error("<RemoteBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set signalingClient(e){throw new Error("<RemoteBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};n(6);const{console:Ge}=V,Ke="src/Participant.svelte";function Qe(e){let t;const n=new We({props:{signalingClient:e[18]},$$inline:!0}),c={c:function(){z(n.$$.fragment)},m:function(e,o){W(n,e,o),t=!0},p:o,i:function(e){t||(F(n.$$.fragment,e),t=!0)},o:function(e){J(n.$$.fragment,e),t=!1},d:function(e){G(n,e)}};return X("SvelteRegisterBlock",{block:c,id:Qe.name,type:"if",source:"(266:4) {#if $config.isRemote}",ctx:e}),c}function Xe(e){let t,n;const i=new Fe({$$inline:!0});i.$on("stream",e[40]);const r={c:function(){t=g("div"),z(i.$$.fragment),ne(t,"id","upstream"),ne(t,"class","svelte-18yq0l"),c(t,Ke,272,12,8165)},m:function(e,o){Z(e,t,o),W(i,t,null),n=!0},p:o,i:function(e){n||(F(i.$$.fragment,e),n=!0)},o:function(e){J(i.$$.fragment,e),n=!1},d:function(e){e&&ee(t),G(i)}};return X("SvelteRegisterBlock",{block:r,id:Xe.name,type:"if",source:"(272:8) {#if $config.hasUpstream}",ctx:e}),r}function Ye(e){let t,n,i,r;const s={c:function(){t=g("div"),n=g("label"),n.textContent="downstream",i=b(),r=g("video"),ne(n,"for","downstream"),c(n,Ke,279,16,8388),r.autoplay="true",ne(r,"width","400"),ne(r,"height","300"),ne(r,"class","svelte-18yq0l"),c(r,Ke,280,16,8447),ne(t,"id","downstream"),ne(t,"class","svelte-18yq0l"),c(t,Ke,278,12,8350)},m:function(o,c){Z(o,t,c),Y(t,n),Y(t,i),Y(t,r),e[41](r)},p:o,d:function(n){n&&ee(t),e[41](null)}};return X("SvelteRegisterBlock",{block:s,id:Ye.name,type:"if",source:"(278:8) {#if $config.hasDownstream}",ctx:e}),s}function Ze(e){let t,n,o,i,r,s,a,l,u=e[8]&&et(e),f=e[14]&&!e[17].isManual&&tt(e),d=e[17].isManual&&nt(e);const p={c:function(){t=g("label"),n=v("1. "),o=g("button"),o.textContent="create offer",i=b(),u&&u.c(),r=b(),f&&f.c(),s=b(),d&&d.c(),a=y(),c(o,Ke,300,27,9295),c(t,Ke,300,16,9284),l=te(o,"click",e[20],!1,!1,!1)},m:function(e,c){Z(e,t,c),Y(t,n),Y(t,o),Z(e,i,c),u&&u.m(e,c),Z(e,r,c),f&&f.m(e,c),Z(e,s,c),d&&d.m(e,c),Z(e,a,c)},p:function(e,t){e[8]?u?u.p(e,t):(u=et(e),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null),e[14]&&!e[17].isManual?f?f.p(e,t):(f=tt(e),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null),e[17].isManual?d?d.p(e,t):(d=nt(e),d.c(),d.m(a.parentNode,a)):d&&(d.d(1),d=null)},d:function(e){e&&ee(t),e&&ee(i),u&&u.d(e),e&&ee(r),f&&f.d(e),e&&ee(s),d&&d.d(e),e&&ee(a),l()}};return X("SvelteRegisterBlock",{block:p,id:Ze.name,type:"if",source:"(300:12) {#if isCaller}",ctx:e}),p}function et(e){let t,n,o,i,r,a,l,u,f,d,p;const m={c:function(){t=g("div"),n=g("textarea"),o=b(),i=g("br"),r=b(),a=g("label"),l=v("2.\n                            "),u=g("button"),u.textContent="setLocalDescription",f=b(),d=g("button"),d.textContent="send offer",ne(n,"cols","60"),ne(n,"rows","20"),ne(n,"class","svelte-18yq0l"),c(n,Ke,304,24,9444),c(i,Ke,305,24,9528),c(u,Ke,308,28,9626),c(d,Ke,309,28,9745),c(a,Ke,306,24,9559),c(t,Ke,303,20,9414),p=[te(n,"input",e[45]),te(u,"click",e[46],!1,!1,!1),te(d,"click",e[22],!1,!1,!1)]},m:function(c,s){Z(c,t,s),Y(t,n),w(n,e[8]),Y(t,o),Y(t,i),Y(t,r),Y(t,a),Y(a,l),Y(a,u),Y(a,f),Y(a,d)},p:function(e,t){256&t[0]&&w(n,e[8])},d:function(e){e&&ee(t),s(p)}};return X("SvelteRegisterBlock",{block:m,id:et.name,type:"if",source:"(303:16) {#if localOfferSdp}",ctx:e}),m}function tt(e){let t,n,o,i,r,a,l,u,f;const d={c:function(){t=g("div"),n=g("textarea"),o=b(),i=g("br"),r=b(),a=g("label"),l=v("5. "),u=g("button"),u.textContent="setRemoteDescription",ne(n,"cols","60"),ne(n,"rows","20"),ne(n,"class","svelte-18yq0l"),c(n,Ke,315,24,9984),c(i,Ke,316,24,10069),c(u,Ke,318,31,10139),c(a,Ke,317,24,10100),c(t,Ke,314,20,9954),f=[te(n,"input",e[47]),te(u,"click",e[48],!1,!1,!1)]},m:function(c,s){Z(c,t,s),Y(t,n),w(n,e[14]),Y(t,o),Y(t,i),Y(t,r),Y(t,a),Y(a,l),Y(a,u)},p:function(e,t){16384&t[0]&&w(n,e[14])},d:function(e){e&&ee(t),s(f)}};return X("SvelteRegisterBlock",{block:d,id:tt.name,type:"if",source:"(314:16) {#if receivedAnswer && !$config.isManual}",ctx:e}),d}function nt(e){let t,n,o,i,r,a,l,u,f,d,p;const m={c:function(){t=g("div"),n=g("strong"),n.textContent="MANUAL ANSWER HERE",o=b(),i=g("textarea"),r=b(),a=g("br"),l=b(),u=g("label"),f=v("5. "),d=g("button"),d.textContent="setRemoteDescription",c(n,Ke,324,24,10399),ne(i,"cols","60"),ne(i,"rows","20"),ne(i,"class","svelte-18yq0l"),c(i,Ke,325,24,10459),c(a,Ke,326,24,10544),c(d,Ke,328,31,10614),c(u,Ke,327,24,10575),c(t,Ke,323,20,10369),p=[te(i,"input",e[49]),te(d,"click",e[50],!1,!1,!1)]},m:function(c,s){Z(c,t,s),Y(t,n),Y(t,o),Y(t,i),w(i,e[10]),Y(t,r),Y(t,a),Y(t,l),Y(t,u),Y(u,f),Y(u,d)},p:function(e,t){1024&t[0]&&w(i,e[10])},d:function(e){e&&ee(t),s(p)}};return X("SvelteRegisterBlock",{block:m,id:nt.name,type:"if",source:"(323:16) {#if $config.isManual}",ctx:e}),m}function ot(e){let t,n,o,c=e[13]&&!e[17].isManual&&ct(e),i=e[17].isManual&&it(e),r=e[8]&&rt(e);const s={c:function(){c&&c.c(),t=b(),i&&i.c(),n=b(),r&&r.c(),o=y()},m:function(e,s){c&&c.m(e,s),Z(e,t,s),i&&i.m(e,s),Z(e,n,s),r&&r.m(e,s),Z(e,o,s)},p:function(e,s){e[13]&&!e[17].isManual?c?c.p(e,s):(c=ct(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),e[17].isManual?i?i.p(e,s):(i=it(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),e[8]?r?r.p(e,s):(r=rt(e),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d:function(e){c&&c.d(e),e&&ee(t),i&&i.d(e),e&&ee(n),r&&r.d(e),e&&ee(o)}};return X("SvelteRegisterBlock",{block:s,id:ot.name,type:"if",source:"(335:12) {#if isReceiver}",ctx:e}),s}function ct(e){let t,n,o,i,r,a,l,u,f,d,p;const m={c:function(){t=g("div"),n=g("textarea"),o=b(),i=g("br"),r=b(),a=g("label"),l=v("3.\n                            "),u=g("button"),u.textContent="setRemoteDescription",f=b(),d=g("button"),d.textContent="create answer",ne(n,"cols","60"),ne(n,"rows","20"),ne(n,"class","svelte-18yq0l"),c(n,Ke,337,24,10940),c(i,Ke,338,24,11024),c(u,Ke,341,28,11122),c(d,Ke,342,28,11237),c(a,Ke,339,24,11055),c(t,Ke,336,20,10910),p=[te(n,"input",e[51]),te(u,"click",e[52],!1,!1,!1),te(d,"click",e[21],!1,!1,!1)]},m:function(c,s){Z(c,t,s),Y(t,n),w(n,e[13]),Y(t,o),Y(t,i),Y(t,r),Y(t,a),Y(a,l),Y(a,u),Y(a,f),Y(a,d)},p:function(e,t){8192&t[0]&&w(n,e[13])},d:function(e){e&&ee(t),s(p)}};return X("SvelteRegisterBlock",{block:m,id:ct.name,type:"if",source:"(336:16) {#if receivedOffer && !$config.isManual}",ctx:e}),m}function it(e){let t,n,o,i,r,a,l,u,f,d,p,m,h;const y={c:function(){t=g("div"),n=g("strong"),n.textContent="MANUAL OFFER HERE",o=b(),i=g("textarea"),r=b(),a=g("br"),l=b(),u=g("label"),f=v("3.\n                            "),d=g("button"),d.textContent="setRemoteDescription",p=b(),m=g("button"),m.textContent="create answer",c(n,Ke,348,24,11463),ne(i,"cols","60"),ne(i,"rows","20"),ne(i,"class","svelte-18yq0l"),c(i,Ke,349,24,11522),c(a,Ke,350,24,11606),c(d,Ke,353,28,11704),c(m,Ke,354,28,11819),c(u,Ke,351,24,11637),c(t,Ke,347,20,11433),h=[te(i,"input",e[53]),te(d,"click",e[54],!1,!1,!1),te(m,"click",e[21],!1,!1,!1)]},m:function(c,s){Z(c,t,s),Y(t,n),Y(t,o),Y(t,i),w(i,e[9]),Y(t,r),Y(t,a),Y(t,l),Y(t,u),Y(u,f),Y(u,d),Y(u,p),Y(u,m)},p:function(e,t){512&t[0]&&w(i,e[9])},d:function(e){e&&ee(t),s(h)}};return X("SvelteRegisterBlock",{block:y,id:it.name,type:"if",source:"(347:16) {#if $config.isManual}",ctx:e}),y}function rt(e){let t,n,o,i,r,a,l,u,f,d,p;const m={c:function(){t=g("div"),n=g("textarea"),o=b(),i=g("br"),r=b(),a=g("label"),l=v("4.\n                            "),u=g("button"),u.textContent="setLocalDescription",f=b(),d=g("button"),d.textContent="send answer",ne(n,"cols","60"),ne(n,"rows","20"),ne(n,"class","svelte-18yq0l"),c(n,Ke,360,24,12042),c(i,Ke,361,24,12126),c(u,Ke,364,28,12224),c(d,Ke,365,28,12344),c(a,Ke,362,24,12157),c(t,Ke,359,20,12012),p=[te(n,"input",e[55]),te(u,"click",e[56],!1,!1,!1),te(d,"click",e[23],!1,!1,!1)]},m:function(c,s){Z(c,t,s),Y(t,n),w(n,e[8]),Y(t,o),Y(t,i),Y(t,r),Y(t,a),Y(a,l),Y(a,u),Y(a,f),Y(a,d)},p:function(e,t){256&t[0]&&w(n,e[8])},d:function(e){e&&ee(t),s(p)}};return X("SvelteRegisterBlock",{block:m,id:rt.name,type:"if",source:"(359:16) {#if localOfferSdp}",ctx:e}),m}function st(e){let t,n;const o={c:function(){t=g("textarea"),ne(t,"cols","60"),ne(t,"rows","20"),ne(t,"class","svelte-18yq0l"),c(t,Ke,372,16,12576),n=te(t,"input",e[57])},m:function(n,o){Z(n,t,o),w(t,e[15])},p:function(e,n){32768&n[0]&&w(t,e[15])},d:function(e){e&&ee(t),n()}};return X("SvelteRegisterBlock",{block:o,id:st.name,type:"if",source:"(372:12) {#if readableCandidates.length || $config.isManual}",ctx:e}),o}function at(e){let t,n,o,i,r,s,a,l=JSON.stringify(e[16],null,4)+"";const u={c:function(){t=g("label"),t.textContent="injected Candidates",n=b(),o=g("textarea"),i=b(),r=g("pre"),s=v(l),ne(t,"for","injectedCandidates"),c(t,Ke,376,16,12711),ne(o,"name","injectedCandidates"),ne(o,"cols","60"),ne(o,"rows","20"),ne(o,"class","svelte-18yq0l"),c(o,Ke,377,16,12787),c(r,Ke,378,16,12894),a=te(o,"input",e[58])},m:function(c,a){Z(c,t,a),Z(c,n,a),Z(c,o,a),w(o,e[11]),Z(c,i,a),Z(c,r,a),Y(r,s)},p:function(e,t){2048&t[0]&&w(o,e[11]),65536&t[0]&&l!==(l=JSON.stringify(e[16],null,4)+"")&&oe(s,l)},d:function(e){e&&ee(t),e&&ee(n),e&&ee(o),e&&ee(i),e&&ee(r),a()}};return X("SvelteRegisterBlock",{block:u,id:at.name,type:"if",source:"(376:12) {#if $config.isManual}",ctx:e}),u}function lt(e){let t,n,o,i,r,a,l,u,f,d,p,m,h,y,$,w,k,C,S,x,R,O,j,_,E,M,B,A,N,P,D,q,L,U,V,H,z,W,G,K,Q,ce,ie,re,se,ae,le,ue,fe,de,pe=e[12].join(",")+"",me=e[17].isRemote&&Qe(e),he=e[17].hasUpstream&&Xe(e),ge=e[17].hasDownstream&&Ye(e),ve=e[0]&&Ze(e),be=e[1]&&ot(e),ye=(e[15].length||e[17].isManual)&&st(e),$e=e[17].isManual&&at(e);const we={c:function(){t=g("section"),n=g("h3"),o=v(e[2]),i=b(),me&&me.c(),r=b(),a=g("small"),l=v("talking to "),u=v(e[3]),f=b(),d=g("div"),he&&he.c(),p=b(),ge&&ge.c(),m=b(),h=g("div"),y=g("label"),$=v("signaling: "),w=g("code"),k=v(e[5]),C=b(),S=g("label"),x=v("connection: "),R=g("code"),O=v(e[6]),j=b(),_=g("label"),E=v("ice: "),M=g("code"),B=v(e[7]),A=b(),N=g("small"),P=v(pe),D=b(),q=g("fieldset"),L=g("span"),U=g("label"),V=g("input"),H=v(" caller"),z=b(),W=g("label"),G=g("input"),K=v(" receiver"),Q=b(),ce=g("label"),ie=g("input"),re=v(" manual mode"),se=b(),ve&&ve.c(),ae=b(),be&&be.c(),le=b(),ye&&ye.c(),ue=b(),$e&&$e.c(),c(n,Ke,264,4,7965),c(a,Ke,268,4,8057),ne(w,"class","svelte-18yq0l"),c(w,Ke,285,31,8620),c(y,Ke,285,12,8601),ne(R,"class","svelte-18yq0l"),c(R,Ke,286,32,8691),c(S,Ke,286,12,8671),ne(M,"class","svelte-18yq0l"),c(M,Ke,287,25,8756),c(_,Ke,287,12,8743),c(N,Ke,289,12,8812),ne(V,"type","checkbox"),c(V,Ke,293,28,8921),c(U,Ke,293,20,8913),ne(G,"type","checkbox"),c(G,Ke,294,28,9015),c(W,Ke,294,20,9007),ne(ie,"type","checkbox"),c(ie,Ke,295,28,9113),c(ce,Ke,295,20,9105),ne(L,"class","svelte-18yq0l"),c(L,Ke,292,16,8886),ne(q,"class","svelte-18yq0l"),c(q,Ke,291,12,8859),ne(h,"id","signaling"),ne(h,"class","svelte-18yq0l"),c(h,Ke,284,8,8568),ne(d,"id","streams"),ne(d,"class","svelte-18yq0l"),c(d,Ke,269,4,8099),c(t,Ke,262,0,7950),de=[te(V,"change",e[42]),te(G,"change",e[43]),te(ie,"change",e[44])]},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(c,s){Z(c,t,s),Y(t,n),Y(n,o),Y(t,i),me&&me.m(t,null),Y(t,r),Y(t,a),Y(a,l),Y(a,u),Y(t,f),Y(t,d),he&&he.m(d,null),Y(d,p),ge&&ge.m(d,null),Y(d,m),Y(d,h),Y(h,y),Y(y,$),Y(y,w),Y(w,k),Y(h,C),Y(h,S),Y(S,x),Y(S,R),Y(R,O),Y(h,j),Y(h,_),Y(_,E),Y(_,M),Y(M,B),Y(h,A),Y(h,N),Y(N,P),Y(h,D),Y(h,q),Y(q,L),Y(L,U),Y(U,V),V.checked=e[0],Y(U,H),Y(L,z),Y(L,W),Y(W,G),G.checked=e[1],Y(W,K),Y(L,Q),Y(L,ce),Y(ce,ie),ie.checked=e[17].isManual,Y(ce,re),Y(h,se),ve&&ve.m(h,null),Y(h,ae),be&&be.m(h,null),Y(h,le),ye&&ye.m(h,null),Y(h,ue),$e&&$e.m(h,null),fe=!0},p:function(e,n){(!fe||4&n[0])&&oe(o,e[2]),e[17].isRemote?me?(me.p(e,n),F(me,1)):(me=Qe(e),me.c(),F(me,1),me.m(t,r)):me&&(I(),J(me,1,1,()=>{me=null}),T()),(!fe||8&n[0])&&oe(u,e[3]),e[17].hasUpstream?he?(he.p(e,n),F(he,1)):(he=Xe(e),he.c(),F(he,1),he.m(d,p)):he&&(I(),J(he,1,1,()=>{he=null}),T()),e[17].hasDownstream?ge?ge.p(e,n):(ge=Ye(e),ge.c(),ge.m(d,m)):ge&&(ge.d(1),ge=null),(!fe||32&n[0])&&oe(k,e[5]),(!fe||64&n[0])&&oe(O,e[6]),(!fe||128&n[0])&&oe(B,e[7]),(!fe||4096&n[0])&&pe!==(pe=e[12].join(",")+"")&&oe(P,pe),1&n[0]&&(V.checked=e[0]),2&n[0]&&(G.checked=e[1]),131072&n[0]&&(ie.checked=e[17].isManual),e[0]?ve?ve.p(e,n):(ve=Ze(e),ve.c(),ve.m(h,ae)):ve&&(ve.d(1),ve=null),e[1]?be?be.p(e,n):(be=ot(e),be.c(),be.m(h,le)):be&&(be.d(1),be=null),e[15].length||e[17].isManual?ye?ye.p(e,n):(ye=st(e),ye.c(),ye.m(h,ue)):ye&&(ye.d(1),ye=null),e[17].isManual?$e?$e.p(e,n):($e=at(e),$e.c(),$e.m(h,null)):$e&&($e.d(1),$e=null)},i:function(e){fe||(F(me),F(he),fe=!0)},o:function(e){J(me),J(he),fe=!1},d:function(e){e&&ee(t),me&&me.d(),he&&he.d(),ge&&ge.d(),ve&&ve.d(),be&&be.d(),ye&&ye.d(),$e&&$e.d(),s(de)}};return X("SvelteRegisterBlock",{block:we,id:lt.name,type:"component",source:"",ctx:e}),we}function ut(e,t,n){let o,c,i,r,s;u(he,"eventLogByName"),d(e,he,e=>n(30,o=e)),u(ve,"offerStore"),d(e,ve,e=>n(31,c=e)),u(be,"answerStore"),d(e,be,e=>n(32,i=e)),u(me,"config"),d(e,me,e=>n(17,r=e)),u(ye,"candidatesStore"),d(e,ye,e=>n(33,s=e));let{isCaller:a=!1}=t,{isReceiver:l=!1}=t,{name:f="unnamed participant"}=t,{recipient:p=null}=t;const m=new Be({from:f,to:p}),h=O(),g=ge(f);let v,b,y,$="",w="",k="",C="",S="",x="",j=[],E="",M=(()=>"unified-plan"===new URL(document.location).searchParams.get("semantic")?{sdpSemantics:"unified-plan"}:{sdpSemantics:"plan-b"})();function B(){M.sdpSemantics;const e=new RTCPeerConnection(M);return e.ontrack=e=>{const{track:t,streams:o,transceiver:c}=e,i=o[0];n(4,v.srcObject=i,v),i.onaddtrack=()=>console.warn(`${f}track added to stream`,{track:t,stream:i}),"video"==t.kind&&(console.info(`${f}.ontrack`,{track:t,streams:o,kind:t.kind,transceiver:c}),t.onmute=e=>{console.info(`${f} track onmute`,{event:e}),n(4,v.srcObject=null,v)},t.onunmute=e=>{console.info(`${f} track onunmute`,{event:e}),n(4,v.srcObject=i,v)},t.onended=e=>{console.debug(`${f} track onended`,{event:e})})},e.onicecandidate=({candidate:e})=>{g("lc","create candidate"),n(29,j=[...j,e]),P(e)},e.onsignalingstatechange=t=>n(5,$=e.signalingState),e.onconnectionstatechange=t=>n(6,w=e.connectionState),e.oniceconnectionstatechange=t=>n(7,k=e.iceConnectionState),console.info(`setup RTCPeerConnection for ${f}`,M,e),e}function A(e){y?(g("rt","replace track"),console.info("replace track",{sender:y}),y.replaceTrack(e.getTracks()[0])):(g("at","add track"),console.info("add track"),y=b.addTrack(e.getTracks()[0],e))}async function N(){g("o","create offer");const e=await b.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!1});n(8,C=e.sdp)}function P(e){f&&e&&(ke({from:f,candidate:e}),r.isRemote&&m.sendCandidate(e))}async function D(e){g("l","setLocalDescription"),console.debug("localDescription ->",e);const t=e;Ce(f),b.setLocalDescription(t),L(),Ce(p)}function q(e){g("r","setRemoteDescription");const t=Pe(e);b.setRemoteDescription(t),L(),Ce(p)}function L(){r.isManual?(H||[]).forEach(e=>{e&&(g("ac","addIceCandidate"),b.addIceCandidate(e))}):(console.debug(s[p]),(s[p]||[]).forEach(e=>{e&&(g("ac","addIceCandidate"),b.addIceCandidate(e))}))}function U(e){g("r","setRemoteDescription");const t=De(e);b.setRemoteDescription(t),Ce(f)}R(()=>{b=B(),ye.subscribe(({[p]:e})=>{e&&g("rc")}),r.hasCaller&&N()});const I=["isCaller","isReceiver","name","recipient"];Object.keys(t).forEach(e=>{~I.indexOf(e)||"$$"===e.slice(0,2)||Ge.warn(`<Participant> was created with unknown prop '${e}'`)});let T,F,J,V,H;return e.$set=e=>{"isCaller"in e&&n(0,a=e.isCaller),"isReceiver"in e&&n(1,l=e.isReceiver),"name"in e&&n(2,f=e.name),"recipient"in e&&n(3,p=e.recipient)},e.$capture_state=()=>({isCaller:a,isReceiver:l,name:f,recipient:p,downstreamVideo:v,peerConnection:b,sender:y,signalingState:$,connectionState:w,iceConnectionState:k,localOfferSdp:C,injectedOffer:S,injectedAnswer:x,rawCandidates:j,injectedCandidates:E,pcconfig:M,events:T,$eventLogByName:o,receivedOffer:F,$offerStore:c,receivedAnswer:J,$answerStore:i,readableCandidates:V,parsedInjectedCandidates:H,$config:r,$candidatesStore:s}),e.$inject_state=e=>{"isCaller"in e&&n(0,a=e.isCaller),"isReceiver"in e&&n(1,l=e.isReceiver),"name"in e&&n(2,f=e.name),"recipient"in e&&n(3,p=e.recipient),"downstreamVideo"in e&&n(4,v=e.downstreamVideo),"peerConnection"in e&&(b=e.peerConnection),"sender"in e&&(y=e.sender),"signalingState"in e&&n(5,$=e.signalingState),"connectionState"in e&&n(6,w=e.connectionState),"iceConnectionState"in e&&n(7,k=e.iceConnectionState),"localOfferSdp"in e&&n(8,C=e.localOfferSdp),"injectedOffer"in e&&n(9,S=e.injectedOffer),"injectedAnswer"in e&&n(10,x=e.injectedAnswer),"rawCandidates"in e&&n(29,j=e.rawCandidates),"injectedCandidates"in e&&n(11,E=e.injectedCandidates),"pcconfig"in e&&(M=e.pcconfig),"events"in e&&n(12,T=e.events),"$eventLogByName"in e&&he.set(o=e.$eventLogByName),"receivedOffer"in e&&n(13,F=e.receivedOffer),"$offerStore"in e&&ve.set(c=e.$offerStore),"receivedAnswer"in e&&n(14,J=e.receivedAnswer),"$answerStore"in e&&be.set(i=e.$answerStore),"readableCandidates"in e&&n(15,V=e.readableCandidates),"parsedInjectedCandidates"in e&&n(16,H=e.parsedInjectedCandidates),"$config"in e&&me.set(r=e.$config),"$candidatesStore"in e&&ye.set(s=e.$candidatesStore)},e.$$.update=()=>{1073741828&e.$$.dirty[0]&&n(12,T=o[f]||[]),8&e.$$.dirty[0]|1&e.$$.dirty[1]&&n(13,F=Ae(c[p])),8&e.$$.dirty[0]|2&e.$$.dirty[1]&&n(14,J=Ae(i[p])),536870912&e.$$.dirty[0]&&n(15,V=JSON.stringify(j)),2048&e.$$.dirty[0]&&n(16,H=Ne(E))},[a,l,f,p,v,$,w,k,C,S,x,E,T,F,J,V,H,r,m,A,N,async function(){g("a","create answer");const e=await b.createAnswer();n(8,C=e.sdp)},function(){const e=Pe(C);$e({from:f,offer:e}),r.isRemote&&m.sendOffer(e)},function(){const e=Pe(C);we({from:f,answer:e}),r.isRemote&&m.sendAnswer(e)},D,q,U,b,y,j,o,c,i,s,h,g,M,B,P,L,({detail:e})=>A(e),function(e){_[e?"unshift":"push"](()=>{n(4,v=e)})},function(){a=this.checked,n(0,a)},function(){l=this.checked,n(1,l)},function(){r.isManual=this.checked,me.set(r)},function(){C=this.value,n(8,C)},()=>D(Pe(C)),function(){J=this.value,n(14,J),n(32,i),n(3,p)},()=>U(J),function(){x=this.value,n(10,x)},()=>U(x),function(){F=this.value,n(13,F),n(31,c),n(3,p)},()=>q(F),function(){S=this.value,n(9,S)},()=>q(S),function(){C=this.value,n(8,C)},()=>D(De(C)),function(){V=this.value,n(15,V),n(29,j)},function(){E=this.value,n(11,E)}]}var ft=class extends ce{constructor(e){super(e),K(this,e,ut,lt,l,{isCaller:0,isReceiver:1,name:2,recipient:3},[-1,-1]),X("SvelteRegisterComponent",{component:this,tagName:"Participant",options:e,id:lt.name})}get isCaller(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isCaller(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get isReceiver(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isReceiver(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get name(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get recipient(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set recipient(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};n(7);const dt="src/Demo.svelte";function pt(e,t,n){const o=e.slice();return o[2]=t[n].name,o[3]=t[n].event,o}function mt(e){let t;const n=new ft({props:{name:"alice",isCaller:"true",recipient:"bob"},$$inline:!0}),o={c:function(){z(n.$$.fragment)},m:function(e,o){W(n,e,o),t=!0},i:function(e){t||(F(n.$$.fragment,e),t=!0)},o:function(e){J(n.$$.fragment,e),t=!1},d:function(e){G(n,e)}};return X("SvelteRegisterBlock",{block:o,id:mt.name,type:"if",source:"(36:8) {#if $config.hasCaller}",ctx:e}),o}function ht(e){let t;const n=new ft({props:{name:"bob",isReceiver:"true",recipient:"alice"},$$inline:!0}),o={c:function(){z(n.$$.fragment)},m:function(e,o){W(n,e,o),t=!0},i:function(e){t||(F(n.$$.fragment,e),t=!0)},o:function(e){J(n.$$.fragment,e),t=!1},d:function(e){G(n,e)}};return X("SvelteRegisterBlock",{block:o,id:ht.name,type:"if",source:"(40:8) {#if $config.hasReceiver}",ctx:e}),o}function gt(e){let t,n,o,i,r=e[2]+"",s=e[3]+"";const a={c:function(){t=g("li"),n=v(r),o=v(": "),i=v(s),c(t,dt,46,16,992)},m:function(e,c){Z(e,t,c),Y(t,n),Y(t,o),Y(t,i)},p:function(e,t){2&t&&r!==(r=e[2]+"")&&oe(n,r),2&t&&s!==(s=e[3]+"")&&oe(i,s)},d:function(e){e&&ee(t)}};return X("SvelteRegisterBlock",{block:a,id:gt.name,type:"each",source:"(46:16) {#each $eventLog.filter(e => e.event) as { name, event }}",ctx:e}),a}function vt(e){let t,n,o,i,r,s,a,l,u,f,d,p,m;const y=new Me({$$inline:!0});let $=e[0].hasCaller&&mt(e),w=e[0].hasReceiver&&ht(e),k=e[1].filter(bt),C=[];for(let t=0;t<k.length;t+=1)C[t]=gt(pt(e,k,t));const S={c:function(){t=g("div"),n=g("aside"),z(y.$$.fragment),o=b(),i=g("section"),$&&$.c(),r=b(),w&&w.c(),s=b(),a=g("div"),l=g("ol");for(let e=0;e<C.length;e+=1)C[e].c();u=b(),f=g("em"),d=v("please open "),p=g("code"),p.textContent="chrome://webrtc-internals",c(n,dt,29,4,582),c(l,dt,44,12,897),ne(p,"class","svelte-vvgboa"),c(p,dt,50,29,1089),c(f,dt,50,12,1072),ne(a,"class","svelte-vvgboa"),c(a,dt,43,8,879),ne(i,"class","svelte-vvgboa"),c(i,dt,33,4,626),ne(t,"class","svelte-vvgboa"),c(t,dt,28,0,572)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,c){Z(e,t,c),Y(t,n),W(y,n,null),Y(t,o),Y(t,i),$&&$.m(i,null),Y(i,r),w&&w.m(i,null),Y(i,s),Y(i,a),Y(a,l);for(let e=0;e<C.length;e+=1)C[e].m(l,null);Y(a,u),Y(a,f),Y(f,d),Y(f,p),m=!0},p:function(e,[t]){if(e[0].hasCaller?$?F($,1):($=mt(e),$.c(),F($,1),$.m(i,r)):$&&(I(),J($,1,1,()=>{$=null}),T()),e[0].hasReceiver?w?F(w,1):(w=ht(e),w.c(),F(w,1),w.m(i,s)):w&&(I(),J(w,1,1,()=>{w=null}),T()),2&t){let n;for(k=e[1].filter(bt),n=0;n<k.length;n+=1){const o=pt(e,k,n);C[n]?C[n].p(o,t):(C[n]=gt(o),C[n].c(),C[n].m(l,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=k.length}},i:function(e){m||(F(y.$$.fragment,e),F($),F(w),m=!0)},o:function(e){J(y.$$.fragment,e),J($),J(w),m=!1},d:function(e){e&&ee(t),G(y),$&&$.d(),w&&w.d(),h(C,e)}};return X("SvelteRegisterBlock",{block:S,id:vt.name,type:"component",source:"",ctx:e}),S}const bt=e=>e.event;function yt(e,t,n){let o,c;return u(me,"config"),d(e,me,e=>n(0,o=e)),u(ue,"eventLog"),d(e,ue,e=>n(1,c=e)),e.$capture_state=()=>({}),e.$inject_state=e=>{"$config"in e&&me.set(o=e.$config),"$eventLog"in e&&ue.set(c=e.$eventLog)},[o,c]}var $t=class extends ce{constructor(e){super(e),K(this,e,yt,vt,l,{}),X("SvelteRegisterComponent",{component:this,tagName:"Demo",options:e,id:vt.name})}};function wt(e){let t;const n=new $t({$$inline:!0}),c={c:function(){z(n.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){W(n,e,o),t=!0},p:o,i:function(e){t||(F(n.$$.fragment,e),t=!0)},o:function(e){J(n.$$.fragment,e),t=!1},d:function(e){G(n,e)}};return X("SvelteRegisterBlock",{block:c,id:wt.name,type:"component",source:"",ctx:e}),c}const kt=new class extends ce{constructor(e){super(e),K(this,e,null,wt,l,{}),X("SvelteRegisterComponent",{component:this,tagName:"App",options:e,id:wt.name})}}({target:document.body,props:{}});window.app=kt;t.default=kt}]);