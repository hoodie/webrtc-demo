!function(e){var t={};function n(o){if(t[o])return t[o].exports;var c=t[o]={i:o,l:!1,exports:{}};return e[o].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(o,c,function(t){return e[t]}.bind(null,c));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function o(){}n.r(t);function c(e,t,n,o,c){e.__svelte_meta={loc:{file:t,line:n,column:o,char:c}}}function i(e){return e()}function r(){return Object.create(null)}function s(e){e.forEach(i)}function a(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function u(e){return 0===Object.keys(e).length}function d(e,t){if(null!=e&&"function"!=typeof e.subscribe)throw new Error(`'${t}' is not a store with a 'subscribe' method`)}function f(e,...t){if(null==e)return o;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function p(e,t,n){e.$$.on_destroy.push(f(t,n))}new Set;function m(e,t){e.appendChild(t)}function h(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode.removeChild(e)}function $(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function w(e){return document.createTextNode(e)}function y(){return w(" ")}function b(){return w("")}function k(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function S(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e,t){e.value=null==t?"":t}function C(e,t,n){e.classList[n?"add":"remove"](t)}function R(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}new Set;let j;function D(e){j=e}function E(){if(!j)throw new Error("Function called outside component initialization");return j}function O(e){E().$$.on_mount.push(e)}function B(){const e=E();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const c=R(t,n);o.slice().forEach(t=>{t.call(e,c)})}}}const _=[],P=[],T=[],N=[],M=Promise.resolve();let U=!1;function A(){U||(U=!0,M.then(F))}function L(){return A(),M}function q(e){T.push(e)}let z=!1;const I=new Set;function F(){if(!z){z=!0;do{for(let e=0;e<_.length;e+=1){const t=_[e];D(t),J(t.$$)}for(D(null),_.length=0;P.length;)P.pop()();for(let e=0;e<T.length;e+=1){const t=T[e];I.has(t)||(I.add(t),t())}T.length=0}while(_.length);for(;N.length;)N.pop()();U=!1,z=!1,I.clear()}}function J(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(q)}}const V=new Set;let H;function W(){H={r:0,c:[],p:H}}function X(){H.r||s(H.c),H=H.p}function Y(e,t){e&&e.i&&(V.delete(e),e.i(t))}function G(e,t,n,o){if(e&&e.o){if(V.has(e))return;V.add(e),H.c.push(()=>{V.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}const K="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let Q;function Z(e){e&&e.c()}function ee(e,t,n){const{fragment:o,on_mount:c,on_destroy:r,after_update:l}=e.$$;o&&o.m(t,n),q(()=>{const t=c.map(i).filter(a);r?r.push(...t):s(t),e.$$.on_mount=[]}),l.forEach(q)}function te(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ne(e,t,n,c,i,a,l=[-1]){const u=j;D(e);const d=t.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:o,not_equal:i,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:l,skip_bound:!1};let p=!1;if(f.ctx=n?n(e,d,(t,n,...o)=>{const c=o.length?o[0]:n;return f.ctx&&i(f.ctx[t],f.ctx[t]=c)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](c),p&&function(e,t){-1===e.$$.dirty[0]&&(_.push(e),A(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n}):[],f.update(),p=!0,s(f.before_update),f.fragment=!!c&&c(f.ctx),t.target){if(t.hydrate){const e=(m=t.target,Array.from(m.childNodes));f.fragment&&f.fragment.l(e),e.forEach(g)}else f.fragment&&f.fragment.c();t.intro&&Y(e.$$.fragment),ee(e,t.target,t.anchor),F()}var m;D(u)}"function"==typeof HTMLElement&&(Q=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}$destroy(){te(this,1),this.$destroy=o}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!u(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});function oe(e,t){document.dispatchEvent(R(e,Object.assign({version:"3.29.7"},t)))}function ce(e,t){oe("SvelteDOMInsert",{target:e,node:t}),m(e,t)}function ie(e,t,n){oe("SvelteDOMInsert",{target:e,node:t,anchor:n}),h(e,t,n)}function re(e){oe("SvelteDOMRemove",{node:e}),g(e)}function se(e,t,n,o,c,i){const r=!0===o?["capture"]:o?Array.from(Object.keys(o)):[];c&&r.push("preventDefault"),i&&r.push("stopPropagation"),oe("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:r});const s=k(e,t,n,o);return()=>{oe("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:r}),s()}}function ae(e,t,n){S(e,t,n),null==n?oe("SvelteDOMRemoveAttribute",{node:e,attribute:t}):oe("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function le(e,t){t=""+t,e.wholeText!==t&&(oe("SvelteDOMSetData",{node:e,data:t}),e.data=t)}function ue(e){if(!("string"==typeof e||e&&"object"==typeof e&&"length"in e)){let t="{#each} only iterates over array-like objects.";throw"function"==typeof Symbol&&e&&Symbol.iterator in e&&(t+=" You can use a spread to convert this iterable into an array."),new Error(t)}}function de(e,t,n){for(const o of Object.keys(t))~n.indexOf(o)||console.warn(`<${e}> received an unexpected slot "${o}".`)}class fe extends class{$destroy(){te(this,1),this.$destroy=o}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!u(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){if(!e||!e.target&&!e.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}const pe=[];function me(e,t=o){let n;const c=[];function i(t){if(l(e,t)&&(e=t,n)){const t=!pe.length;for(let t=0;t<c.length;t+=1){const n=c[t];n[1](),pe.push(n,e)}if(t){for(let e=0;e<pe.length;e+=2)pe[e][0](pe[e+1]);pe.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(r,s=o){const a=[r,s];return c.push(a),1===c.length&&(n=t(i)||o),r(e),()=>{const e=c.indexOf(a);-1!==e&&c.splice(e,1),0===c.length&&(n(),n=null)}}}}function he(e,t,n){const c=!Array.isArray(e),i=c?[e]:e,r=t.length<2;return{subscribe:me(n,e=>{let n=!1;const l=[];let u=0,d=o;const p=()=>{if(u)return;d();const n=t(c?l[0]:l,e);r?e(n):d=a(n)?n:o},m=i.map((e,t)=>f(e,e=>{l[t]=e,u&=~(1<<t),n&&p()},()=>{u|=1<<t}));return n=!0,p(),function(){s(m),d()}}).subscribe}}const ge=me([]),$e=e=>{try{return!0===JSON.parse(e)}catch{return!1}},ve=me((()=>{const e=Object.fromEntries(new URLSearchParams(location.search).entries()),t={role:e.role||"both",stream:e.stream||"both",manual:$e(e.manual),remote:$e(e.remote),hideSignaling:$e(e.hideSignaling)};return Object.entries(t).map(([e,t])=>({key:e,value:t}))})()),we=he(ve,e=>`${window.location.protocol}//${window.location.host}/?${(e=>{const t=new URLSearchParams;for(let[n,o]of e)t.set(n,o);return t.toString()})(e.map(({key:e,value:t})=>[e,t]))}`),ye=he(ve,e=>{const t=Object.fromEntries(e.map(({key:e,value:t})=>[e,t]));let{role:n,stream:o,manual:c,remote:i,hideSignaling:r}=t;const s="recv"!==n,a="call"!==n&&"send"!==n||!1,l="down"!==o||!1,u="up"!==o||!1,d=c&&"no"!==c||!1,f=i&&"no"!==i||!1,p=s?"bob":"alice",m=a?"bob":"alice";return{...t,role:n,stream:o,manual:c,remote:i,hasCaller:s,hasReceiver:a,hasUpstream:l,hasDownstream:u,isManual:d,isRemote:f,hideSignaling:r,to:p,from:m}}),be=me({});const ke=e=>(t,n)=>function(e,t,n){const o={name:e,short:t,event:n};ge.update(e=>[...e,o]),be.update(n=>({...n,[e]:[...n[e]||[],t]}))}(e,t,n),Se=me({}),xe=me({}),Ce=me({});function Re({from:e,offer:t}){Se.update(n=>({...n,[e]:t}))}function je({from:e,answer:t}){xe.update(n=>({...n,[e]:t}))}function De({from:e,candidate:t}){Ce.update(n=>{const o=n[e]||[];return{...n,[e]:[...o,t]}})}function Ee({from:e}){Ce.update(t=>({...t,[e]:[]}))}const Oe="src/Config.svelte";function Be(e,t,n){const o=e.slice();return o[6]=t[n].key,o[7]=t[n].value,o[8]=t,o[9]=n,o}function _e(e){let t,n,o;function i(){e[3].call(t,e[8],e[9])}const r={c:function(){t=v("input"),ae(t,"type","text"),c(t,Oe,33,12,774)},m:function(c,r){ie(c,t,r),x(t,e[7]),n||(o=se(t,"input",i),n=!0)},p:function(n,o){e=n,2&o&&t.value!==e[7]&&x(t,e[7])},d:function(e){e&&re(t),n=!1,o()}};return oe("SvelteRegisterBlock",{block:r,id:_e.name,type:"else",source:"(33:12) {:else}",ctx:e}),r}function Pe(e){let t,n,o;function i(){e[2].call(t,e[8],e[9])}const r={c:function(){t=v("input"),ae(t,"type","checkbox"),c(t,Oe,31,12,696)},m:function(c,r){ie(c,t,r),t.checked=e[7],n||(o=se(t,"change",i),n=!0)},p:function(n,o){e=n,2&o&&(t.checked=e[7])},d:function(e){e&&re(t),n=!1,o()}};return oe("SvelteRegisterBlock",{block:r,id:Pe.name,type:"if",source:"(31:12) {#if typeof value === 'boolean'}",ctx:e}),r}function Te(e){let t,n,o,i,r,s,a=e[6]+"";function l(e,t){return"boolean"==typeof e[7]?Pe:_e}let u=l(e),d=u(e);const f={c:function(){t=v("tr"),n=v("td"),o=w(a),i=y(),r=v("td"),d.c(),s=y(),c(n,Oe,28,12,607),c(r,Oe,29,12,634),c(t,Oe,27,8,590)},m:function(e,c){ie(e,t,c),ce(t,n),ce(n,o),ce(t,i),ce(t,r),d.m(r,null),ce(t,s)},p:function(e,t){2&t&&a!==(a=e[6]+"")&&le(o,a),u===(u=l(e))&&d?d.p(e,t):(d.d(1),d=u(e),d&&(d.c(),d.m(r,null)))},d:function(e){e&&re(t),d.d()}};return oe("SvelteRegisterBlock",{block:f,id:Te.name,type:"each",source:"(27:4) {#each $query as {key, value}",ctx:e}),f}function Ne(e){let t,n,i,r,s,a,l,u,d,f=e[1];ue(f);let p=[];for(let t=0;t<f.length;t+=1)p[t]=Te(Be(e,f,t));const m={c:function(){t=v("details"),n=v("summary"),n.textContent="config",i=y(),r=v("code"),s=v("pre"),a=v("a"),l=w(e[0]),u=y(),d=v("table");for(let e=0;e<p.length;e+=1)p[e].c();c(n,Oe,20,4,428),ae(a,"href",e[0]),c(a,Oe,22,4,474),c(s,Oe,21,10,464),ae(r,"class","svelte-12ii7jf"),c(r,Oe,21,4,458),c(d,Oe,25,4,536),c(t,Oe,19,0,414)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ie(e,t,o),ce(t,n),ce(t,i),ce(t,r),ce(r,s),ce(s,a),ce(a,l),ce(t,u),ce(t,d);for(let e=0;e<p.length;e+=1)p[e].m(d,null)},p:function(e,[t]){if(1&t&&le(l,e[0]),1&t&&ae(a,"href",e[0]),2&t){let n;for(f=e[1],ue(f),n=0;n<f.length;n+=1){const o=Be(e,f,n);p[n]?p[n].p(o,t):(p[n]=Te(o),p[n].c(),p[n].m(d,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=f.length}},i:o,o:o,d:function(e){e&&re(t),$(p,e)}};return oe("SvelteRegisterBlock",{block:m,id:Ne.name,type:"component",source:"",ctx:e}),m}function Me(e,t,n){let o,c;d(we,"configUrl"),p(e,we,e=>n(0,o=e)),d(ve,"query"),p(e,ve,e=>n(1,c=e));let{$$slots:i={},$$scope:r}=t;de("Config",i,[]);const s=e=>{try{return"boolean"===JSON.parse(e)}catch{return!1}},a=({target:{value:e,name:t}})=>{ye.update(n=>({...n,[t]:"on"===e}))},l=[];return Object.keys(t).forEach(e=>{~l.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Config> was created with unknown prop '${e}'`)}),e.$capture_state=()=>({query:ve,config:ye,configUrl:we,eventLog:ge,boolable:s,checkConfig:a,$configUrl:o,$query:c}),[o,c,function(e,t){e[t].value=this.checked,ve.set(c)},function(e,t){e[t].value=this.value,ve.set(c)}]}var Ue=class extends fe{constructor(e){super(e),ne(this,e,Me,Ne,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"Config",options:e,id:Ne.name})}};class Ae{constructor({to:e,from:t}){this.to=e,this.from=t}connect({url:e}){this.url=e;const t=new WebSocket(e);t.onopen=()=>{this.socket=t,this.socket.onmessage=this.received.bind(this)}}received({data:e}){const t=JSON.parse(e),{[this.to]:n,type:o}=t;console.debug("its for me!",n);const c=this.to;switch(o){case"offer":Re({from:c,offer:n});break;case"answer":je({from:c,answer:n});break;case"candidate":De({from:c,candidate:new RTCIceCandidate(n)})}}sendOffer(e){if(e){const t={[this.from]:e,type:"offer"};this.send(t)}}sendAnswer(e){if(e){const t={[this.from]:e,type:"answer"};this.send(t)}}sendCandidate(e){if(e){const t={[this.from]:e,type:"candidate"};this.send(t)}}send(e){if(this.socket){const t=JSON.stringify(e);this.socket.send(t)}}toString(){return`[Signaling Server calling ${this.from} → ${this.to}]`}}const Le=e=>"string"==typeof e?JSON.parse(e).sdp:"object"==typeof e?e.sdp:void 0,qe=e=>{try{return JSON.parse(e)}catch(t){return""!==e&&console.warn({parseError:t}),[]}},ze=e=>({type:"offer",sdp:e}),Ie=e=>({type:"answer",sdp:e});function Fe(e){let t,n,i,r,s,a,l,u,d=JSON.stringify(e[2],null,4)+"";const f={c:function(){t=v("details"),n=v("summary"),i=w(e[1]),r=y(),s=v("pre"),a=v("code"),l=w(d),c(n,"src/Details.svelte",13,4,200),ae(a,"class","svelte-ubxtzq"),c(a,"src/Details.svelte",15,8,247),c(s,"src/Details.svelte",14,4,233),t.open=u=Boolean(e[2])&&e[0],c(t,"src/Details.svelte",12,0,157)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ie(e,t,o),ce(t,n),ce(n,i),ce(t,r),ce(t,s),ce(s,a),ce(a,l)},p:function(e,[n]){var o,c,r;2&n&&le(i,e[1]),4&n&&d!==(d=JSON.stringify(e[2],null,4)+"")&&le(l,d),5&n&&u!==(u=Boolean(e[2])&&e[0])&&(r=u,(o=t)[c="open"]=r,oe("SvelteDOMSetProperty",{node:o,property:c,value:r}))},i:o,o:o,d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:f,id:Fe.name,type:"component",source:"",ctx:e}),f}function Je(e,t,n){let{$$slots:o={},$$scope:c}=t;de("Details",o,[]);let{open:i=!0}=t,{summary:r="???"}=t,{data:s}=t;const a=["open","summary","data"];return Object.keys(t).forEach(e=>{~a.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Details> was created with unknown prop '${e}'`)}),e.$$set=e=>{"open"in e&&n(0,i=e.open),"summary"in e&&n(1,r=e.summary),"data"in e&&n(2,s=e.data)},e.$capture_state=()=>({open:i,summary:r,data:s}),e.$inject_state=e=>{"open"in e&&n(0,i=e.open),"summary"in e&&n(1,r=e.summary),"data"in e&&n(2,s=e.data)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,r,s]}var Ve=class extends fe{constructor(e){super(e),ne(this,e,Je,Fe,l,{open:0,summary:1,data:2}),oe("SvelteRegisterComponent",{component:this,tagName:"Details",options:e,id:Fe.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[2]||"data"in n||console.warn("<Details> was created without expected prop 'data'")}get open(){throw new Error("<Details>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set open(e){throw new Error("<Details>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get summary(){throw new Error("<Details>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set summary(e){throw new Error("<Details>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get data(){throw new Error("<Details>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Details>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};const{Object:He}=K;function We(e,t,n){const o=e.slice();return o[23]=t[n],o}function Xe(e,t,n){const o=e.slice();return o[26]=t[n],o[28]=n,o}function Ye(e){let t,n,o,i,r=(e[26].label||"camera "+e[28])+"";function s(){return e[14](e[26])}const a={c:function(){t=v("button"),n=w(r),ae(t,"class","svelte-2jsuhx"),c(t,"src/Upstream.svelte",115,4,3396)},m:function(e,c){ie(e,t,c),ce(t,n),o||(i=se(t,"click",s,!1,!1,!1),o=!0)},p:function(t,o){e=t,4&o&&r!==(r=(e[26].label||"camera "+e[28])+"")&&le(n,r)},d:function(e){e&&re(t),o=!1,i()}};return oe("SvelteRegisterBlock",{block:a,id:Ye.name,type:"each",source:"(115:4) {#each videoDevices as device, index}",ctx:e}),a}function Ge(e){let t;const n={c:function(){t=w("✔️")},m:function(e,n){ie(e,t,n)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:n,id:Ge.name,type:"if",source:"(124:8) {#if upstreamStream === stream}",ctx:e}),n}function Ke(e){let t,n,o,i,r,a,l,u,d,f,p,m,h,g,$,b=e[23].name+"",k=e[1]===e[23]&&Ge(e);function S(){return e[15](e[23])}function x(){return e[16](e[23])}function C(){return e[17](e[23])}const R={c:function(){t=v("tr"),n=v("td"),k&&k.c(),o=y(),i=v("td"),r=v("button"),a=w(b),l=y(),u=v("td"),d=v("button"),d.textContent="stop",f=y(),p=v("td"),m=v("button"),m.textContent="X",h=y(),c(n,"src/Upstream.svelte",123,4,3562),ae(r,"class","svelte-2jsuhx"),c(r,"src/Upstream.svelte",124,9,3619),c(i,"src/Upstream.svelte",124,4,3614),ae(d,"class","svelte-2jsuhx"),c(d,"src/Upstream.svelte",125,9,3705),c(u,"src/Upstream.svelte",125,4,3700),ae(m,"class","svelte-2jsuhx"),c(m,"src/Upstream.svelte",126,9,3778),c(p,"src/Upstream.svelte",126,4,3773),c(t,"src/Upstream.svelte",122,0,3553)},m:function(e,c){ie(e,t,c),ce(t,n),k&&k.m(n,null),ce(t,o),ce(t,i),ce(i,r),ce(r,a),ce(t,l),ce(t,u),ce(u,d),ce(t,f),ce(t,p),ce(p,m),ce(t,h),g||($=[se(r,"click",S,!1,!1,!1),se(d,"click",x,!1,!1,!1),se(m,"click",C,!1,!1,!1)],g=!0)},p:function(t,o){(e=t)[1]===e[23]?k||(k=Ge(e),k.c(),k.m(n,null)):k&&(k.d(1),k=null),8&o&&b!==(b=e[23].name+"")&&le(a,b)},d:function(e){e&&re(t),k&&k.d(),g=!1,s($)}};return oe("SvelteRegisterBlock",{block:R,id:Ke.name,type:"each",source:"(122:0) {#each videoStreams as stream}",ctx:e}),R}function Qe(e){let t,n,o,i,r,s,a,l,u,d,f,p,m,h=e[4].readyState+"";d=new Ve({props:{summary:"settings",data:e[4].getSettings()},$$inline:!0}),p=new Ve({props:{summary:"constraints",data:e[4].getConstraints()},$$inline:!0});const g={c:function(){t=v("details"),n=v("summary"),o=w(e[5]),i=y(),r=v("dl"),s=v("dt"),s.textContent="readState",a=v("dd"),l=w(h),u=y(),Z(d.$$.fragment),f=y(),Z(p.$$.fragment),c(n,"src/Upstream.svelte",133,4,3895),c(s,"src/Upstream.svelte",135,8,3940),c(a,"src/Upstream.svelte",135,26,3958),c(r,"src/Upstream.svelte",135,4,3936),c(t,"src/Upstream.svelte",132,0,3881)},m:function(e,c){ie(e,t,c),ce(t,n),ce(n,o),ce(t,i),ce(t,r),ce(r,s),ce(r,a),ce(a,l),ce(t,u),ee(d,t,null),ce(t,f),ee(p,t,null),m=!0},p:function(e,t){(!m||32&t)&&le(o,e[5]),(!m||16&t)&&h!==(h=e[4].readyState+"")&&le(l,h);const n={};16&t&&(n.data=e[4].getSettings()),d.$set(n);const c={};16&t&&(c.data=e[4].getConstraints()),p.$set(c)},i:function(e){m||(Y(d.$$.fragment,e),Y(p.$$.fragment,e),m=!0)},o:function(e){G(d.$$.fragment,e),G(p.$$.fragment,e),m=!1},d:function(e){e&&re(t),te(d),te(p)}};return oe("SvelteRegisterBlock",{block:g,id:Qe.name,type:"if",source:"(132:0) {#if mainTrack}",ctx:e}),g}function Ze(e){let t,n,o,i,r,a,l,u,d,f,p,m,h,g,w,k,S,x,C,R=e[2];ue(R);let j=[];for(let t=0;t<R.length;t+=1)j[t]=Ye(Xe(e,R,t));let D=e[3];ue(D);let E=[];for(let t=0;t<D.length;t+=1)E[t]=Ke(We(e,D,t));let O=e[4]&&Qe(e);const B={c:function(){t=v("h5"),t.textContent="upstream",n=y(),o=v("video"),i=v("track"),r=y(),a=v("nav"),l=v("button"),l.textContent="default",u=y(),d=v("button"),d.textContent="noise",f=y(),p=v("br"),m=y();for(let e=0;e<j.length;e+=1)j[e].c();h=y(),g=v("table");for(let e=0;e<E.length;e+=1)E[e].c();w=y(),O&&O.c(),k=b(),c(t,"src/Upstream.svelte",103,0,3098),ae(i,"kind","captions"),c(i,"src/Upstream.svelte",106,4,3185),ae(o,"id","upstream"),o.autoplay="true",c(o,"src/Upstream.svelte",105,0,3117),ae(l,"class","svelte-2jsuhx"),c(l,"src/Upstream.svelte",111,4,3232),ae(d,"class","svelte-2jsuhx"),c(d,"src/Upstream.svelte",112,4,3290),c(p,"src/Upstream.svelte",113,4,3345),ae(a,"class","svelte-2jsuhx"),c(a,"src/Upstream.svelte",109,0,3221),c(g,"src/Upstream.svelte",120,0,3514)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(c,s){ie(c,t,s),ie(c,n,s),ie(c,o,s),ce(o,i),e[11](o),ie(c,r,s),ie(c,a,s),ce(a,l),ce(a,u),ce(a,d),ce(a,f),ce(a,p),ce(a,m);for(let e=0;e<j.length;e+=1)j[e].m(a,null);ie(c,h,s),ie(c,g,s);for(let e=0;e<E.length;e+=1)E[e].m(g,null);ie(c,w,s),O&&O.m(c,s),ie(c,k,s),S=!0,x||(C=[se(l,"click",e[12],!1,!1,!1),se(d,"click",e[13],!1,!1,!1)],x=!0)},p:function(e,[t]){if(132&t){let n;for(R=e[2],ue(R),n=0;n<R.length;n+=1){const o=Xe(e,R,n);j[n]?j[n].p(o,t):(j[n]=Ye(o),j[n].c(),j[n].m(a,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=R.length}if(1802&t){let n;for(D=e[3],ue(D),n=0;n<D.length;n+=1){const o=We(e,D,n);E[n]?E[n].p(o,t):(E[n]=Ke(o),E[n].c(),E[n].m(g,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=D.length}e[4]?O?(O.p(e,t),16&t&&Y(O,1)):(O=Qe(e),O.c(),Y(O,1),O.m(k.parentNode,k)):O&&(W(),G(O,1,1,()=>{O=null}),X())},i:function(e){S||(Y(O),S=!0)},o:function(e){G(O),S=!1},d:function(c){c&&re(t),c&&re(n),c&&re(o),e[11](null),c&&re(r),c&&re(a),$(j,c),c&&re(h),c&&re(g),$(E,c),c&&re(w),O&&O.d(c),c&&re(k),x=!1,s(C)}};return oe("SvelteRegisterBlock",{block:B,id:Ze.name,type:"component",source:"",ctx:e}),B}async function et(e){const t={video:!e||{deviceId:e}};return await navigator.mediaDevices.getUserMedia(t)}function tt(){let e=Object.assign(document.createElement("canvas"),{width:400,height:300}),t=e.getContext("2d");t.fillRect(0,0,e.width,e.height);let n=t.getImageData(0,0,e.width,e.height);return requestAnimationFrame((function e(){for(var o=0;o<n.data.length;o++)n.data[o++]=n.data[o++]=n.data[o++]=255*Math.random();t.putImageData(n,0,0),requestAnimationFrame(e)})),e.captureStream(60)}function nt(e,t,n){let{$$slots:o={},$$scope:c}=t;de("Upstream",o,[]);const i=B();let r,s,a=[],l=[];async function u(){const e=await tt();e.name="noise feed",f(e),n(3,l=[...l,e])}async function d(e){const t=await et(e);t.name=e?g(e):"default webcam",f(t),n(3,l=[...l,t])}function f(e){n(1,s=e),n(0,r.srcObject=e,r),i("stream",e)}function p(e){i("stream",e)}function m(e){e.getTracks().forEach(e=>e.stop()),i("stop",e)}function h(e){m(e),n(3,l=[...l.filter(t=>t!=e)]),s===e&&n(1,s=void 0)}function g(e){const t=e&&a.find(({deviceId:t})=>t===e);return t&&t.label}async function $(){const e=await navigator.mediaDevices.enumerateDevices();n(2,a=e.filter(({kind:e})=>"videoinput"===e))}O(()=>{$(),navigator.mediaDevices.addEventListener("devicechange",e=>{navigator.mediaDevices.enumerateDevices().then(e=>$())})});const v=[];He.keys(t).forEach(e=>{~v.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Upstream> was created with unknown prop '${e}'`)});let w,y,b;return e.$capture_state=()=>({Details:Ve,onMount:O,createEventDispatcher:B,dispatch:i,upstreamVideo:r,upstreamStream:s,videoDevices:a,videoStreams:l,getWebcamFeed:et,makeNoise:tt,getNoise:u,getWebcam:d,makeMainStream:f,useStream:p,stopStream:m,deleteStream:h,getDeviceLabel:g,getVideoDevices:$,mainTrack:w,upstreamName:y,hasStream:b}),e.$inject_state=e=>{"upstreamVideo"in e&&n(0,r=e.upstreamVideo),"upstreamStream"in e&&n(1,s=e.upstreamStream),"videoDevices"in e&&n(2,a=e.videoDevices),"videoStreams"in e&&n(3,l=e.videoStreams),"mainTrack"in e&&n(4,w=e.mainTrack),"upstreamName"in e&&n(5,y=e.upstreamName),"hasStream"in e&&(b=e.hasStream)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{2&e.$$.dirty&&n(4,w=s&&s.getTracks()[0]),2&e.$$.dirty&&n(5,y=s&&s.constructor.name),2&e.$$.dirty&&(b=Boolean(s))},[r,s,a,l,w,y,u,d,f,m,h,function(e){P[e?"unshift":"push"](()=>{r=e,n(0,r)})},()=>d(),()=>u(),e=>d(e.deviceId),e=>f(e),e=>m(e),e=>h(e)]}var ot=class extends fe{constructor(e){super(e),ne(this,e,nt,Ze,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"Upstream",options:e,id:Ze.name})}};function ct(e){let t,n,o,c;t=new Ve({props:{summary:"settings",data:e[1].getSettings()},$$inline:!0}),o=new Ve({props:{summary:"constraints",data:e[1].getConstraints()},$$inline:!0});const i={c:function(){Z(t.$$.fragment),n=y(),Z(o.$$.fragment)},m:function(e,i){ee(t,e,i),ie(e,n,i),ee(o,e,i),c=!0},p:function(e,n){const c={};2&n&&(c.data=e[1].getSettings()),t.$set(c);const i={};2&n&&(i.data=e[1].getConstraints()),o.$set(i)},i:function(e){c||(Y(t.$$.fragment,e),Y(o.$$.fragment,e),c=!0)},o:function(e){G(t.$$.fragment,e),G(o.$$.fragment,e),c=!1},d:function(e){te(t,e),e&&re(n),te(o,e)}};return oe("SvelteRegisterBlock",{block:i,id:ct.name,type:"if",source:"(23:0) {#if mainTrack}",ctx:e}),i}function it(e){let t,n,o,i,r,s,a,l=e[1]&&ct(e);const u={c:function(){t=v("h5"),t.textContent="downstream",n=y(),o=v("video"),i=v("track"),r=y(),l&&l.c(),s=b(),c(t,"src/Downstream.svelte",16,0,244),ae(i,"kind","captions"),c(i,"src/Downstream.svelte",19,4,314),o.autoplay="true",c(o,"src/Downstream.svelte",18,0,265)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(c,u){ie(c,t,u),ie(c,n,u),ie(c,o,u),ce(o,i),e[3](o),ie(c,r,u),l&&l.m(c,u),ie(c,s,u),a=!0},p:function(e,[t]){e[1]?l?(l.p(e,t),2&t&&Y(l,1)):(l=ct(e),l.c(),Y(l,1),l.m(s.parentNode,s)):l&&(W(),G(l,1,1,()=>{l=null}),X())},i:function(e){a||(Y(l),a=!0)},o:function(e){G(l),a=!1},d:function(c){c&&re(t),c&&re(n),c&&re(o),e[3](null),c&&re(r),l&&l.d(c),c&&re(s)}};return oe("SvelteRegisterBlock",{block:u,id:it.name,type:"component",source:"",ctx:e}),u}function rt(e,t,n){let{$$slots:o={},$$scope:c}=t;de("Downstream",o,[]);let i,{stream:r}=t;const s=["stream"];let a;return Object.keys(t).forEach(e=>{~s.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Downstream> was created with unknown prop '${e}'`)}),e.$$set=e=>{"stream"in e&&n(2,r=e.stream)},e.$capture_state=()=>({Details:Ve,stream:r,videoTag:i,mainTrack:a}),e.$inject_state=e=>{"stream"in e&&n(2,r=e.stream),"videoTag"in e&&n(0,i=e.videoTag),"mainTrack"in e&&n(1,a=e.mainTrack)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{4&e.$$.dirty&&n(1,a=r&&r.getTracks()[0]),5&e.$$.dirty&&i&&n(0,i.srcObject=r,i)},[i,a,r,function(e){P[e?"unshift":"push"](()=>{i=e,n(0,i),n(2,r)})}]}var st=class extends fe{constructor(e){super(e),ne(this,e,rt,it,l,{stream:2}),oe("SvelteRegisterComponent",{component:this,tagName:"Downstream",options:e,id:it.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[2]||"stream"in n||console.warn("<Downstream> was created without expected prop 'stream'")}get stream(){throw new Error("<Downstream>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set stream(e){throw new Error("<Downstream>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};function at(e){let t,n,i,r,a,l,u;const d={c:function(){t=v("form"),n=v("input"),i=y(),r=v("code"),a=w(e[0]),ae(n,"size","90"),ae(n,"placeholder","ws url"),c(n,"src/RemoteBar.svelte",18,4,498),c(t,"src/RemoteBar.svelte",17,0,451),c(r,"src/RemoteBar.svelte",21,0,576)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,c){var s;ie(o,t,c),ce(t,n),x(n,e[1]),ie(o,i,c),ie(o,r,c),ce(r,a),l||(u=[se(n,"input",e[2]),se(t,"submit",(s=lt,function(e){return e.preventDefault(),s.call(this,e)}),!1,!0,!1)],l=!0)},p:function(e,[t]){2&t&&n.value!==e[1]&&x(n,e[1]),1&t&&le(a,e[0])},i:o,o:o,d:function(e){e&&re(t),e&&re(i),e&&re(r),l=!1,s(u)}};return oe("SvelteRegisterBlock",{block:d,id:at.name,type:"component",source:"",ctx:e}),d}function lt(){}function ut(e,t,n){let{$$slots:o={},$$scope:c}=t;de("RemoteBar",o,[]);let{signalingClient:i}=t;const r=["signalingClient"];let s;return Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<RemoteBar> was created with unknown prop '${e}'`)}),e.$$set=e=>{"signalingClient"in e&&n(0,i=e.signalingClient)},e.$capture_state=()=>({offerStore:Se,answerStore:xe,candidatesStore:Ce,config:ye,signalingClient:i,onSubmit:lt,signalingServer:s}),e.$inject_state=e=>{"signalingClient"in e&&n(0,i=e.signalingClient),"signalingServer"in e&&n(1,s=e.signalingServer)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{3&e.$$.dirty&&(i.connect({url:s}),window.client=i)},n(1,s=`wss://${window.location.host}/signaling/test`),[i,s,function(){s=this.value,n(1,s)}]}var dt=class extends fe{constructor(e){super(e),ne(this,e,ut,at,l,{signalingClient:0}),oe("SvelteRegisterComponent",{component:this,tagName:"RemoteBar",options:e,id:at.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"signalingClient"in n||console.warn("<RemoteBar> was created without expected prop 'signalingClient'")}get signalingClient(){throw new Error("<RemoteBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set signalingClient(e){throw new Error("<RemoteBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};function ft(e,t,n){const o=e.slice();return o[3]=t[n],o}function pt(e){let t,n,o=e[0];ue(o);let c=[];for(let t=0;t<o.length;t+=1)c[t]=mt(ft(e,o,t));const i=e=>G(c[e],1,1,()=>{c[e]=null}),r={c:function(){for(let e=0;e<c.length;e+=1)c[e].c();t=b()},m:function(e,o){for(let t=0;t<c.length;t+=1)c[t].m(e,o);ie(e,t,o),n=!0},p:function(e,n){if(1&n){let r;for(o=e[0],ue(o),r=0;r<o.length;r+=1){const i=ft(e,o,r);c[r]?(c[r].p(i,n),Y(c[r],1)):(c[r]=mt(i),c[r].c(),Y(c[r],1),c[r].m(t.parentNode,t))}for(W(),r=o.length;r<c.length;r+=1)i(r);X()}},i:function(e){if(!n){for(let e=0;e<o.length;e+=1)Y(c[e]);n=!0}},o:function(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)G(c[e]);n=!1},d:function(e){$(c,e),e&&re(t)}};return oe("SvelteRegisterBlock",{block:r,id:pt.name,type:"if",source:"(62:0) {#if transceiverDetails}",ctx:e}),r}function mt(e){let t,n,o,i,r,s,a,l,u,d,f,p,m="transceiver "+e[3].mid,h=e[3].mid+"";f=new Ve({props:{summary:"details",data:e[3],open:!1},$$inline:!0});const g={c:function(){t=w(m),n=y(),o=v("table"),i=v("tr"),r=v("th"),r.textContent="mid",s=y(),a=v("td"),l=v("code"),u=w(h),d=y(),Z(f.$$.fragment),c(r,"src/Transceivers.svelte",66,16,2462),c(l,"src/Transceivers.svelte",67,20,2495),c(a,"src/Transceivers.svelte",67,16,2491),c(i,"src/Transceivers.svelte",65,12,2441),c(o,"src/Transceivers.svelte",64,8,2421)},m:function(e,c){ie(e,t,c),ie(e,n,c),ie(e,o,c),ce(o,i),ce(i,r),ce(i,s),ce(i,a),ce(a,l),ce(l,u),ie(e,d,c),ee(f,e,c),p=!0},p:function(e,n){(!p||1&n)&&m!==(m="transceiver "+e[3].mid)&&le(t,m),(!p||1&n)&&h!==(h=e[3].mid+"")&&le(u,h);const o={};1&n&&(o.data=e[3]),f.$set(o)},i:function(e){p||(Y(f.$$.fragment,e),p=!0)},o:function(e){G(f.$$.fragment,e),p=!1},d:function(e){e&&re(t),e&&re(n),e&&re(o),e&&re(d),te(f,e)}};return oe("SvelteRegisterBlock",{block:g,id:mt.name,type:"each",source:"(63:4) {#each transceiverDetails as transceiverDetail}",ctx:e}),g}function ht(e){let t,n,o,i,r=e[0]&&pt(e);const s={c:function(){t=v("h5"),t.textContent="transceivers",n=y(),r&&r.c(),o=b(),c(t,"src/Transceivers.svelte",60,0,2265)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,c){ie(e,t,c),ie(e,n,c),r&&r.m(e,c),ie(e,o,c),i=!0},p:function(e,[t]){e[0]?r?(r.p(e,t),1&t&&Y(r,1)):(r=pt(e),r.c(),Y(r,1),r.m(o.parentNode,o)):r&&(W(),G(r,1,1,()=>{r=null}),X())},i:function(e){i||(Y(r),i=!0)},o:function(e){G(r),i=!1},d:function(e){e&&re(t),e&&re(n),r&&r.d(e),e&&re(o)}};return oe("SvelteRegisterBlock",{block:s,id:ht.name,type:"component",source:"",ctx:e}),s}function gt(e,t,n){let{$$slots:o={},$$scope:c}=t;de("Transceivers",o,[]);let i,{peerconnection:r}=t;O(()=>{const e=setInterval(()=>{a&&n(0,i=a.map(({mid:e,direction:t,currentDirection:n,stopped:o,sender:c,receiver:i})=>{let r={},s={};{let{dtmf:e,track:t,transport:n}=c;r={dtmf:e,track:t,transport:n,parameters:c.getParameters&&c.getParameters()}}{let{dtmf:e,track:t,transport:n}=i;s={dtmf:e,track:t,transport:n,parameters:i.getParameters&&i.getParameters(),csrcs:i.getContributingSources(),ssrcs:i.getSynchronizationSources()}}return{mid:e,direction:t,currentDirection:n,stopped:o,sender:r,receiver:s}}))},1e3);return()=>clearInterval(e)});const s=["peerconnection"];let a;return Object.keys(t).forEach(e=>{~s.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Transceivers> was created with unknown prop '${e}'`)}),e.$$set=e=>{"peerconnection"in e&&n(1,r=e.peerconnection)},e.$capture_state=()=>({onMount:O,Details:Ve,peerconnection:r,transceiverDetails:i,transceivers:a}),e.$inject_state=e=>{"peerconnection"in e&&n(1,r=e.peerconnection),"transceiverDetails"in e&&n(0,i=e.transceiverDetails),"transceivers"in e&&(a=e.transceivers)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{2&e.$$.dirty&&(a=r&&r.getTransceivers())},[i,r]}var $t=class extends fe{constructor(e){super(e),ne(this,e,gt,ht,l,{peerconnection:1}),oe("SvelteRegisterComponent",{component:this,tagName:"Transceivers",options:e,id:ht.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[1]||"peerconnection"in n||console.warn("<Transceivers> was created without expected prop 'peerconnection'")}get peerconnection(){throw new Error("<Transceivers>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set peerconnection(e){throw new Error("<Transceivers>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};const{console:vt}=K,wt="src/Participant.svelte";function yt(e){let t,n;t=new dt({props:{signalingClient:e[23]},$$inline:!0});const c={c:function(){Z(t.$$.fragment)},m:function(e,o){ee(t,e,o),n=!0},p:o,i:function(e){n||(Y(t.$$.fragment,e),n=!0)},o:function(e){G(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:c,id:yt.name,type:"if",source:"(258:4) {#if $config.isRemote}",ctx:e}),c}function bt(e){let t,n,i;n=new ot({$$inline:!0}),n.$on("stream",e[32]),n.$on("stop",e[33]);const r={c:function(){t=v("article"),Z(n.$$.fragment),ae(t,"id","upstream"),ae(t,"class","box"),c(t,wt,262,4,7939)},m:function(e,o){ie(e,t,o),ee(n,t,null),i=!0},p:o,i:function(e){i||(Y(n.$$.fragment,e),i=!0)},o:function(e){G(n.$$.fragment,e),i=!1},d:function(e){e&&re(t),te(n)}};return oe("SvelteRegisterBlock",{block:r,id:bt.name,type:"if",source:"(262:4) {#if $config.hasUpstream}",ctx:e}),r}function kt(e){let t,n,o;n=new st({props:{},$$inline:!0}),e[34](n);const i={c:function(){t=v("article"),Z(n.$$.fragment),ae(t,"id","downstream"),ae(t,"class","box"),c(t,wt,271,4,8209)},m:function(e,c){ie(e,t,c),ee(n,t,null),o=!0},p:function(e,t){n.$set({})},i:function(e){o||(Y(n.$$.fragment,e),o=!0)},o:function(e){G(n.$$.fragment,e),o=!1},d:function(o){o&&re(t),e[34](null),te(n)}};return oe("SvelteRegisterBlock",{block:i,id:kt.name,type:"if",source:"(271:4) {#if $config.hasDownstream}",ctx:e}),i}function St(e){let t,n,o;function i(e,t){return e[6]?Ct:xt}let r=i(e),s=r(e);const a={c:function(){t=v("button"),s.c(),c(t,wt,279,12,8420)},m:function(c,i){ie(c,t,i),s.m(t,null),n||(o=se(t,"click",e[35],!1,!1,!1),n=!0)},p:function(e,n){r!==(r=i(e))&&(s.d(1),s=r(e),s&&(s.c(),s.m(t,null)))},d:function(e){e&&re(t),s.d(),n=!1,o()}};return oe("SvelteRegisterBlock",{block:a,id:St.name,type:"if",source:"(279:8) {#if videoUpstream}",ctx:e}),a}function xt(e){let t;const n={c:function(){t=w("addStream")},m:function(e,n){ie(e,t,n)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:n,id:xt.name,type:"else",source:"(281:40) {:else}",ctx:e}),n}function Ct(e){let t;const n={c:function(){t=w("replaceTrack")},m:function(e,n){ie(e,t,n)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:n,id:Ct.name,type:"if",source:"(281:16) {#if sender}",ctx:e}),n}function Rt(e){let t,n,o,i,r,s,a,l=e[16].join(" ")+"";const u={c:function(){t=v("tr"),n=v("th"),n.textContent="events:",o=y(),i=v("td"),r=v("code"),s=v("small"),a=w(l),c(n,wt,307,16,9264),c(s,wt,308,28,9311),ae(r,"class","svelte-j1yyqz"),c(r,wt,308,21,9304),c(i,wt,308,16,9299),c(t,wt,306,12,9243)},m:function(e,c){ie(e,t,c),ce(t,n),ce(t,o),ce(t,i),ce(i,r),ce(r,s),ce(s,a)},p:function(e,t){65536&t[0]&&l!==(l=e[16].join(" ")+"")&&le(a,l)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:u,id:Rt.name,type:"if",source:"(306:12) {#if !hideSignaling}",ctx:e}),u}function jt(e){let t,n,o,i,r,s,a,l,u,d=e[11]&&Dt(e),f=e[18]&&!e[21].isManual&&Et(e),p=e[21].isManual&&Ot(e);const m={c:function(){t=v("label"),n=w("1.\n                "),o=v("button"),o.textContent="create offer",i=y(),d&&d.c(),r=y(),f&&f.c(),s=y(),p&&p.c(),a=b(),c(o,wt,331,16,9884),c(t,wt,329,12,9841)},m:function(c,m){ie(c,t,m),ce(t,n),ce(t,o),ie(c,i,m),d&&d.m(c,m),ie(c,r,m),f&&f.m(c,m),ie(c,s,m),p&&p.m(c,m),ie(c,a,m),l||(u=se(o,"click",e[25],!1,!1,!1),l=!0)},p:function(e,t){e[11]?d?d.p(e,t):(d=Dt(e),d.c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null),e[18]&&!e[21].isManual?f?f.p(e,t):(f=Et(e),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null),e[21].isManual?p?p.p(e,t):(p=Ot(e),p.c(),p.m(a.parentNode,a)):p&&(p.d(1),p=null)},d:function(e){e&&re(t),e&&re(i),d&&d.d(e),e&&re(r),f&&f.d(e),e&&re(s),p&&p.d(e),e&&re(a),l=!1,u()}};return oe("SvelteRegisterBlock",{block:m,id:jt.name,type:"if",source:"(329:8) {#if isCaller}",ctx:e}),m}function Dt(e){let t,n,o,i,r,a,l,u,d,f,p,m;const h={c:function(){t=v("div"),n=v("textarea"),o=y(),i=v("br"),r=y(),a=v("label"),l=w("2.\n                        "),u=v("button"),u.textContent="setLocalDescription",d=y(),f=v("button"),f.textContent="send offer",ae(n,"cols","60"),ae(n,"rows","20"),ae(n,"class","svelte-j1yyqz"),C(n,"hideSignaling",e[22]),c(n,wt,336,20,10033),c(i,wt,337,20,10133),c(u,wt,340,24,10219),c(f,wt,341,24,10334),c(a,wt,338,20,10160),c(t,wt,335,16,10007)},m:function(c,s){ie(c,t,s),ce(t,n),x(n,e[11]),ce(t,o),ce(t,i),ce(t,r),ce(t,a),ce(a,l),ce(a,u),ce(a,d),ce(a,f),p||(m=[se(n,"input",e[38]),se(u,"click",e[39],!1,!1,!1),se(f,"click",e[27],!1,!1,!1)],p=!0)},p:function(e,t){2048&t[0]&&x(n,e[11]),4194304&t[0]&&C(n,"hideSignaling",e[22])},d:function(e){e&&re(t),p=!1,s(m)}};return oe("SvelteRegisterBlock",{block:h,id:Dt.name,type:"if",source:"(335:12) {#if localOfferSdp}",ctx:e}),h}function Et(e){let t,n,o,i,r,a,l,u,d,f;const p={c:function(){t=v("div"),n=v("textarea"),o=y(),i=v("br"),r=y(),a=v("label"),l=w("5.\n                        "),u=v("button"),u.textContent="setRemoteDescription",ae(n,"cols","60"),ae(n,"rows","20"),ae(n,"class","svelte-j1yyqz"),C(n,"hideSignaling",e[22]),c(n,wt,347,20,10549),c(i,wt,348,20,10650),c(u,wt,351,24,10736),c(a,wt,349,20,10677),c(t,wt,346,16,10523)},m:function(c,s){ie(c,t,s),ce(t,n),x(n,e[18]),ce(t,o),ce(t,i),ce(t,r),ce(t,a),ce(a,l),ce(a,u),d||(f=[se(n,"input",e[40]),se(u,"click",e[41],!1,!1,!1)],d=!0)},p:function(e,t){262144&t[0]&&x(n,e[18]),4194304&t[0]&&C(n,"hideSignaling",e[22])},d:function(e){e&&re(t),d=!1,s(f)}};return oe("SvelteRegisterBlock",{block:p,id:Et.name,type:"if",source:"(346:12) {#if receivedAnswer && !$config.isManual}",ctx:e}),p}function Ot(e){let t,n,o,i,r,a,l,u,d,f,p,m;const h={c:function(){t=v("div"),n=v("strong"),n.textContent="MANUAL ANSWER HERE",o=y(),i=v("textarea"),r=y(),a=v("br"),l=y(),u=v("label"),d=w("5.\n                        "),f=v("button"),f.textContent="setRemoteDescription",c(n,wt,357,20,10972),ae(i,"cols","60"),ae(i,"rows","20"),ae(i,"class","svelte-j1yyqz"),c(i,wt,358,20,11028),c(a,wt,359,20,11109),c(f,wt,362,24,11195),c(u,wt,360,20,11136),c(t,wt,356,16,10946)},m:function(c,s){ie(c,t,s),ce(t,n),ce(t,o),ce(t,i),x(i,e[14]),ce(t,r),ce(t,a),ce(t,l),ce(t,u),ce(u,d),ce(u,f),p||(m=[se(i,"input",e[42]),se(f,"click",e[43],!1,!1,!1)],p=!0)},p:function(e,t){16384&t[0]&&x(i,e[14])},d:function(e){e&&re(t),p=!1,s(m)}};return oe("SvelteRegisterBlock",{block:h,id:Ot.name,type:"if",source:"(356:12) {#if $config.isManual}",ctx:e}),h}function Bt(e){let t,n,o,c=e[17]&&!e[21].isManual&&_t(e),i=e[21].isManual&&Pt(e),r=e[12]&&e[17]&&Tt(e);const s={c:function(){c&&c.c(),t=y(),i&&i.c(),n=y(),r&&r.c(),o=b()},m:function(e,s){c&&c.m(e,s),ie(e,t,s),i&&i.m(e,s),ie(e,n,s),r&&r.m(e,s),ie(e,o,s)},p:function(e,s){e[17]&&!e[21].isManual?c?c.p(e,s):(c=_t(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),e[21].isManual?i?i.p(e,s):(i=Pt(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),e[12]&&e[17]?r?r.p(e,s):(r=Tt(e),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d:function(e){c&&c.d(e),e&&re(t),i&&i.d(e),e&&re(n),r&&r.d(e),e&&re(o)}};return oe("SvelteRegisterBlock",{block:s,id:Bt.name,type:"if",source:"(369:8) {#if isReceiver}",ctx:e}),s}function _t(e){let t,n,o,i,r,a,l,u,d,f,p,m;const h={c:function(){t=v("div"),n=v("textarea"),o=y(),i=v("br"),r=y(),a=v("label"),l=w("3.\n                        "),u=v("button"),u.textContent="setRemoteDescription",d=y(),f=v("button"),f.textContent="create answer",ae(n,"cols","60"),ae(n,"rows","20"),ae(n,"class","svelte-j1yyqz"),C(n,"hideSignaling",e[22]),c(n,wt,371,20,11489),c(i,wt,372,20,11589),c(u,wt,375,24,11675),c(f,wt,376,24,11786),c(a,wt,373,20,11616),c(t,wt,370,16,11463)},m:function(c,s){ie(c,t,s),ce(t,n),x(n,e[17]),ce(t,o),ce(t,i),ce(t,r),ce(t,a),ce(a,l),ce(a,u),ce(a,d),ce(a,f),p||(m=[se(n,"input",e[44]),se(u,"click",e[45],!1,!1,!1),se(f,"click",e[26],!1,!1,!1)],p=!0)},p:function(e,t){131072&t[0]&&x(n,e[17]),4194304&t[0]&&C(n,"hideSignaling",e[22])},d:function(e){e&&re(t),p=!1,s(m)}};return oe("SvelteRegisterBlock",{block:h,id:_t.name,type:"if",source:"(370:12) {#if receivedOffer && !$config.isManual}",ctx:e}),h}function Pt(e){let t,n,o,i,r,a,l,u,d,f,p,m,h,g;const $={c:function(){t=v("div"),n=v("strong"),n.textContent="MANUAL OFFER HERE",o=y(),i=v("textarea"),r=y(),a=v("br"),l=y(),u=v("label"),d=w("3.\n                        "),f=v("button"),f.textContent="setRemoteDescription",p=y(),m=v("button"),m.textContent="create answer",c(n,wt,382,20,11988),ae(i,"cols","60"),ae(i,"rows","20"),ae(i,"class","svelte-j1yyqz"),c(i,wt,383,20,12043),c(a,wt,384,20,12123),c(f,wt,387,24,12209),c(m,wt,388,24,12320),c(u,wt,385,20,12150),c(t,wt,381,16,11962)},m:function(c,s){ie(c,t,s),ce(t,n),ce(t,o),ce(t,i),x(i,e[13]),ce(t,r),ce(t,a),ce(t,l),ce(t,u),ce(u,d),ce(u,f),ce(u,p),ce(u,m),h||(g=[se(i,"input",e[46]),se(f,"click",e[47],!1,!1,!1),se(m,"click",e[26],!1,!1,!1)],h=!0)},p:function(e,t){8192&t[0]&&x(i,e[13])},d:function(e){e&&re(t),h=!1,s(g)}};return oe("SvelteRegisterBlock",{block:$,id:Pt.name,type:"if",source:"(381:12) {#if $config.isManual}",ctx:e}),$}function Tt(e){let t,n,o,i,r,a,l,u,d,f,p,m;const h={c:function(){t=v("div"),n=v("textarea"),o=y(),i=v("br"),r=y(),a=v("label"),l=w("4.\n                        "),u=v("button"),u.textContent="setLocalDescription",d=y(),f=v("button"),f.textContent="send answer",ae(n,"cols","60"),ae(n,"rows","20"),ae(n,"class","svelte-j1yyqz"),C(n,"hideSignaling",e[22]),c(n,wt,394,20,12537),c(i,wt,395,20,12638),c(u,wt,398,24,12724),c(f,wt,399,24,12841),c(a,wt,396,20,12665),c(t,wt,393,16,12511)},m:function(c,s){ie(c,t,s),ce(t,n),x(n,e[12]),ce(t,o),ce(t,i),ce(t,r),ce(t,a),ce(a,l),ce(a,u),ce(a,d),ce(a,f),p||(m=[se(n,"input",e[48]),se(u,"click",e[49],!1,!1,!1),se(f,"click",e[28],!1,!1,!1)],p=!0)},p:function(e,t){4096&t[0]&&x(n,e[12]),4194304&t[0]&&C(n,"hideSignaling",e[22])},d:function(e){e&&re(t),p=!1,s(m)}};return oe("SvelteRegisterBlock",{block:h,id:Tt.name,type:"if",source:"(393:12) {#if localAnswerSdp && receivedOffer}",ctx:e}),h}function Nt(e){let t,n,o;const i={c:function(){t=v("textarea"),ae(t,"cols","60"),ae(t,"rows","10"),ae(t,"class","svelte-j1yyqz"),C(t,"hideSignaling",e[22]),c(t,wt,406,12,13049)},m:function(c,i){ie(c,t,i),x(t,e[19]),n||(o=se(t,"input",e[50]),n=!0)},p:function(e,n){524288&n[0]&&x(t,e[19]),4194304&n[0]&&C(t,"hideSignaling",e[22])},d:function(e){e&&re(t),n=!1,o()}};return oe("SvelteRegisterBlock",{block:i,id:Nt.name,type:"if",source:"(406:8) {#if readableCandidates.length || $config.isManual}",ctx:e}),i}function Mt(e){let t,n,o,i,r,s,a,l,u=JSON.stringify(e[20],null,4)+"";const d={c:function(){t=v("label"),t.textContent="injected Candidates",n=y(),o=v("textarea"),i=y(),r=v("pre"),s=w(u),ae(t,"for","injectedCandidates"),c(t,wt,410,12,13192),ae(o,"name","injectedCandidates"),ae(o,"cols","60"),ae(o,"rows","20"),ae(o,"class","svelte-j1yyqz"),c(o,wt,411,12,13264),c(r,wt,412,12,13367)},m:function(c,u){ie(c,t,u),ie(c,n,u),ie(c,o,u),x(o,e[15]),ie(c,i,u),ie(c,r,u),ce(r,s),a||(l=se(o,"input",e[51]),a=!0)},p:function(e,t){32768&t[0]&&x(o,e[15]),1048576&t[0]&&u!==(u=JSON.stringify(e[20],null,4)+"")&&le(s,u)},d:function(e){e&&re(t),e&&re(n),e&&re(o),e&&re(i),e&&re(r),a=!1,l()}};return oe("SvelteRegisterBlock",{block:d,id:Mt.name,type:"if",source:"(410:8) {#if $config.isManual}",ctx:e}),d}function Ut(e){let t,n,o,i,r,a,l,u,d,f,p,m,h,g,$,b,k,S,x,C,R,j,D,E,O,B,_,P,T,N,M,U,A,L,q,z,I,F,J,V,H,K,Q,ne,ue,de,fe,pe,me,he,ge,$e,ve,we,ye,be,ke,Se,xe,Ce,Re,je=e[21].isRemote&&yt(e),De=e[21].hasUpstream&&bt(e),Ee=e[21].hasDownstream&&kt(e),Oe=e[7]&&St(e);k=new $t({props:{name:e[2],peerconnection:e[5]},$$inline:!0});let Be=!e[22]&&Rt(e),_e=e[0]&&jt(e),Pe=e[1]&&Bt(e),Te=(e[19].length||e[21].isManual)&&Nt(e),Ne=e[21].isManual&&Mt(e);const Me={c:function(){t=v("section"),n=v("h3"),o=w(e[2]),i=y(),r=v("small"),a=w("talking to "),l=w(e[3]),u=y(),je&&je.c(),d=y(),De&&De.c(),f=y(),Ee&&Ee.c(),p=y(),m=v("article"),h=v("h5"),h.textContent="streams",g=y(),Oe&&Oe.c(),$=y(),b=v("article"),Z(k.$$.fragment),S=y(),x=v("article"),C=v("h5"),C.textContent="signaling",R=y(),j=v("div"),D=v("table"),E=v("tr"),O=v("th"),O.textContent="signaling:",B=y(),_=v("td"),P=v("code"),T=w(e[8]),N=y(),M=v("tr"),U=v("th"),U.textContent="connection:",A=y(),L=v("td"),q=v("code"),z=w(e[9]),I=y(),F=v("tr"),J=v("th"),J.textContent="ice:",V=y(),H=v("td"),K=v("code"),Q=w(e[10]),ne=y(),Be&&Be.c(),ue=y(),de=v("div"),fe=v("span"),pe=v("label"),me=v("input"),he=w("\n                    caller"),ge=y(),$e=v("label"),ve=v("input"),we=w("\n                    receiver"),ye=y(),_e&&_e.c(),be=y(),Pe&&Pe.c(),ke=y(),Te&&Te.c(),Se=y(),Ne&&Ne.c(),ae(r,"class","svelte-j1yyqz"),c(r,wt,255,4,7779),ae(n,"class","svelte-j1yyqz"),c(n,wt,254,4,7764),c(h,wt,277,8,8362),ae(m,"class","box"),c(m,wt,276,4,8332),ae(b,"class","box"),c(b,wt,285,4,8590),c(C,wt,290,8,8730),c(O,wt,294,16,8841),ae(P,"class","svelte-j1yyqz"),c(P,wt,295,21,8884),c(_,wt,295,16,8879),c(E,wt,293,12,8820),c(U,wt,298,16,8971),ae(q,"class","svelte-j1yyqz"),c(q,wt,299,21,9015),c(L,wt,299,16,9010),c(M,wt,297,12,8950),c(J,wt,302,16,9103),ae(K,"class","svelte-j1yyqz"),c(K,wt,303,21,9140),c(H,wt,303,16,9135),c(F,wt,301,12,9082),ae(D,"class","vertical"),c(D,wt,292,8,8783),ae(j,"class","box"),c(j,wt,291,8,8757),ae(me,"type","checkbox"),c(me,wt,318,20,9518),c(pe,wt,317,16,9490),ae(ve,"type","checkbox"),c(ve,wt,322,20,9664),c($e,wt,321,16,9636),c(fe,wt,316,12,9467),ae(de,"class","box"),c(de,wt,315,8,9437),ae(x,"class","box"),c(x,wt,289,4,8700),c(t,wt,253,0,7750)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(c,s){ie(c,t,s),ce(t,n),ce(n,o),ce(n,i),ce(n,r),ce(r,a),ce(r,l),ce(t,u),je&&je.m(t,null),ce(t,d),De&&De.m(t,null),ce(t,f),Ee&&Ee.m(t,null),ce(t,p),ce(t,m),ce(m,h),ce(m,g),Oe&&Oe.m(m,null),ce(t,$),ce(t,b),ee(k,b,null),ce(t,S),ce(t,x),ce(x,C),ce(x,R),ce(x,j),ce(j,D),ce(D,E),ce(E,O),ce(E,B),ce(E,_),ce(_,P),ce(P,T),ce(D,N),ce(D,M),ce(M,U),ce(M,A),ce(M,L),ce(L,q),ce(q,z),ce(D,I),ce(D,F),ce(F,J),ce(F,V),ce(F,H),ce(H,K),ce(K,Q),ce(D,ne),Be&&Be.m(D,null),ce(x,ue),ce(x,de),ce(de,fe),ce(fe,pe),ce(pe,me),me.checked=e[0],ce(pe,he),ce(fe,ge),ce(fe,$e),ce($e,ve),ve.checked=e[1],ce($e,we),ce(x,ye),_e&&_e.m(x,null),ce(x,be),Pe&&Pe.m(x,null),ce(x,ke),Te&&Te.m(x,null),ce(x,Se),Ne&&Ne.m(x,null),xe=!0,Ce||(Re=[se(me,"change",e[36]),se(ve,"change",e[37])],Ce=!0)},p:function(e,n){(!xe||4&n[0])&&le(o,e[2]),(!xe||8&n[0])&&le(l,e[3]),e[21].isRemote?je?(je.p(e,n),2097152&n[0]&&Y(je,1)):(je=yt(e),je.c(),Y(je,1),je.m(t,d)):je&&(W(),G(je,1,1,()=>{je=null}),X()),e[21].hasUpstream?De?(De.p(e,n),2097152&n[0]&&Y(De,1)):(De=bt(e),De.c(),Y(De,1),De.m(t,f)):De&&(W(),G(De,1,1,()=>{De=null}),X()),e[21].hasDownstream?Ee?(Ee.p(e,n),2097152&n[0]&&Y(Ee,1)):(Ee=kt(e),Ee.c(),Y(Ee,1),Ee.m(t,p)):Ee&&(W(),G(Ee,1,1,()=>{Ee=null}),X()),e[7]?Oe?Oe.p(e,n):(Oe=St(e),Oe.c(),Oe.m(m,null)):Oe&&(Oe.d(1),Oe=null);const c={};4&n[0]&&(c.name=e[2]),32&n[0]&&(c.peerconnection=e[5]),k.$set(c),(!xe||256&n[0])&&le(T,e[8]),(!xe||512&n[0])&&le(z,e[9]),(!xe||1024&n[0])&&le(Q,e[10]),e[22]?Be&&(Be.d(1),Be=null):Be?Be.p(e,n):(Be=Rt(e),Be.c(),Be.m(D,null)),1&n[0]&&(me.checked=e[0]),2&n[0]&&(ve.checked=e[1]),e[0]?_e?_e.p(e,n):(_e=jt(e),_e.c(),_e.m(x,be)):_e&&(_e.d(1),_e=null),e[1]?Pe?Pe.p(e,n):(Pe=Bt(e),Pe.c(),Pe.m(x,ke)):Pe&&(Pe.d(1),Pe=null),e[19].length||e[21].isManual?Te?Te.p(e,n):(Te=Nt(e),Te.c(),Te.m(x,Se)):Te&&(Te.d(1),Te=null),e[21].isManual?Ne?Ne.p(e,n):(Ne=Mt(e),Ne.c(),Ne.m(x,null)):Ne&&(Ne.d(1),Ne=null)},i:function(e){xe||(Y(je),Y(De),Y(Ee),Y(k.$$.fragment,e),xe=!0)},o:function(e){G(je),G(De),G(Ee),G(k.$$.fragment,e),xe=!1},d:function(e){e&&re(t),je&&je.d(),De&&De.d(),Ee&&Ee.d(),Oe&&Oe.d(),te(k),Be&&Be.d(),_e&&_e.d(),Pe&&Pe.d(),Te&&Te.d(),Ne&&Ne.d(),Ce=!1,s(Re)}};return oe("SvelteRegisterBlock",{block:Me,id:Ut.name,type:"component",source:"",ctx:e}),Me}function At(e,t,n){let o,c,i,r,s;d(be,"eventLogByName"),p(e,be,e=>n(53,o=e)),d(Se,"offerStore"),p(e,Se,e=>n(54,c=e)),d(xe,"answerStore"),p(e,xe,e=>n(55,i=e)),d(ye,"config"),p(e,ye,e=>n(21,r=e)),d(Ce,"candidatesStore"),p(e,Ce,e=>n(56,s=e));let{$$slots:a={},$$scope:l}=t;de("Participant",a,[]);let{isCaller:u=!1}=t,{isReceiver:f=!1}=t,{name:m="unnamed participant"}=t,{recipient:h=null}=t;const g=new Ae({from:m,to:h}),$=B(),v=ke(m);let w,y,b,k,S="",x="",C="",R="",j="",D="",E="",_=[],T="",N="plan-b"===new URL(document.location).searchParams.get("semantic")?{sdpSemantics:"plan-b"}:{sdpSemantics:"unified-plan"};function M(){N.sdpSemantics;const e=new RTCPeerConnection(N);return e.ontrack=e=>{const{track:t,streams:n,transceiver:o}=e,c=n[0];w.$set({stream:c}),c.onaddtrack=()=>{v("ta","track added"),console.warn(m+"track added to stream",{track:t,stream:c})},"video"==t.kind&&(console.info(m+".ontrack",{track:t,streams:n,kind:t.kind,transceiver:o}),t.onmute=e=>{v("tm","track muted"),console.info(m+" track onmute",{event:e})},t.onunmute=e=>{v("tu","track unmuted"),console.info(m+" track onunmute",{event:e})},t.onended=e=>{v("te","track ended"),console.debug(m+" track onended",{event:e})})},e.onicecandidate=({candidate:e})=>{v("lc","create candidate"),n(52,_=[..._,e]),J(e)},e.onsignalingstatechange=t=>n(8,S=e.signalingState),e.onconnectionstatechange=t=>n(9,x=e.connectionState),e.oniceconnectionstatechange=t=>n(10,C=e.iceConnectionState),console.info("setup RTCPeerConnection for "+m,N,e),e}function U(e){v("at","add track"),console.info("add track"),n(6,b=y.addTrack(e.getTracks()[0],e))}function A(e){b?(v("rt","replace track"),console.info("replace track",{sender:b}),b.replaceTrack(e.getTracks()[0])):(v("at","add track"),console.info("add track"),n(6,b=y.addTrack(e.getTracks()[0],e)))}async function q(){v("o","create offer");const e=await y.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!1});n(11,R=e.sdp)}async function z(){v("a","create answer");const e=await y.createAnswer();n(12,j=e.sdp)}function I(){const e=ze(R);Re({from:m,offer:e}),r.isRemote&&g.sendOffer(e)}function F(){const e=ze(j);je({from:m,answer:e}),r.isRemote&&g.sendAnswer(e)}function J(e){m&&e&&(De({from:m,candidate:e}),r.isRemote&&g.sendCandidate(e))}async function V(e){v("l","setLocalDescription"),console.debug("localDescription ->",e);const t=e;Ee(m),y.setLocalDescription(t),W(),Ee(h)}function H(e){v("r","setRemoteDescription");const t=ze(e);y.setRemoteDescription(t),W(),Ee(h)}function W(){r.isManual?(ee||[]).forEach(e=>{e&&(v("ac","addIceCandidate"),y.addIceCandidate(e))}):(console.debug(s[h]),(s[h]||[]).forEach(e=>{e&&(v("ac","addIceCandidate"),y.addIceCandidate(e))}))}function X(e){v("r","setRemoteDescription");const t=Ie(e);y.setRemoteDescription(t),Ee(m)}O(()=>{n(5,y=M()),Ce.subscribe(({[h]:e})=>{e&&v("rc")}),r.hasCaller&&q()});const Y=["isCaller","isReceiver","name","recipient"];Object.keys(t).forEach(e=>{~Y.indexOf(e)||"$$"===e.slice(0,2)||vt.warn(`<Participant> was created with unknown prop '${e}'`)});let G,K,Q,Z,ee,te;return e.$$set=e=>{"isCaller"in e&&n(0,u=e.isCaller),"isReceiver"in e&&n(1,f=e.isReceiver),"name"in e&&n(2,m=e.name),"recipient"in e&&n(3,h=e.recipient)},e.$capture_state=()=>({onMount:O,createEventDispatcher:B,tick:L,config:ye,addEventFor:ke,eventLogByName:be,offerStore:Se,answerStore:xe,candidatesStore:Ce,sendOfferFrom:Re,sendAnswerFrom:je,sendCandidateFrom:De,clearCandidatesFrom:Ee,SignalingClient:Ae,justTheSdp:Le,safeParse:qe,packOffer:ze,packAnswer:Ie,Upstream:ot,Downstream:st,RemoteBar:dt,Transceivers:$t,isCaller:u,isReceiver:f,name:m,recipient:h,signalingClient:g,dispatch:$,addEvent:v,downstreamComponent:w,peerConnection:y,sender:b,videoUpstream:k,signalingState:S,connectionState:x,iceConnectionState:C,localOfferSdp:R,localAnswerSdp:j,injectedOffer:D,injectedAnswer:E,rawCandidates:_,injectedCandidates:T,pcconfig:N,initPeerConnection:M,addTrack:U,addStream:A,createOffer:q,createAnswer:z,sendOffer:I,sendAnswer:F,sendCandidate:J,applyLocal:V,applyRemoteOffer:H,applyCandidates:W,applyRemoteAnswer:X,events:G,$eventLogByName:o,receivedOffer:K,$offerStore:c,receivedAnswer:Q,$answerStore:i,readableCandidates:Z,parsedInjectedCandidates:ee,$config:r,$candidatesStore:s,hideSignaling:te}),e.$inject_state=e=>{"isCaller"in e&&n(0,u=e.isCaller),"isReceiver"in e&&n(1,f=e.isReceiver),"name"in e&&n(2,m=e.name),"recipient"in e&&n(3,h=e.recipient),"downstreamComponent"in e&&n(4,w=e.downstreamComponent),"peerConnection"in e&&n(5,y=e.peerConnection),"sender"in e&&n(6,b=e.sender),"videoUpstream"in e&&n(7,k=e.videoUpstream),"signalingState"in e&&n(8,S=e.signalingState),"connectionState"in e&&n(9,x=e.connectionState),"iceConnectionState"in e&&n(10,C=e.iceConnectionState),"localOfferSdp"in e&&n(11,R=e.localOfferSdp),"localAnswerSdp"in e&&n(12,j=e.localAnswerSdp),"injectedOffer"in e&&n(13,D=e.injectedOffer),"injectedAnswer"in e&&n(14,E=e.injectedAnswer),"rawCandidates"in e&&n(52,_=e.rawCandidates),"injectedCandidates"in e&&n(15,T=e.injectedCandidates),"pcconfig"in e&&(N=e.pcconfig),"events"in e&&n(16,G=e.events),"receivedOffer"in e&&n(17,K=e.receivedOffer),"receivedAnswer"in e&&n(18,Q=e.receivedAnswer),"readableCandidates"in e&&n(19,Z=e.readableCandidates),"parsedInjectedCandidates"in e&&n(20,ee=e.parsedInjectedCandidates),"hideSignaling"in e&&n(22,te=e.hideSignaling)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{4&e.$$.dirty[0]|4194304&e.$$.dirty[1]&&n(16,G=o[m]||[]),8&e.$$.dirty[0]|8388608&e.$$.dirty[1]&&n(17,K=Le(c[h])),8&e.$$.dirty[0]|16777216&e.$$.dirty[1]&&n(18,Q=Le(i[h])),2097152&e.$$.dirty[1]&&n(19,Z=JSON.stringify(_)),32768&e.$$.dirty[0]&&n(20,ee=qe(T)),2097152&e.$$.dirty[0]&&n(22,te=r.hideSignaling)},[u,f,m,h,w,y,b,k,S,x,C,R,j,D,E,T,G,K,Q,Z,ee,r,te,g,A,q,z,I,F,V,H,X,({detail:e})=>n(7,k=e),({detail:e})=>n(7,k=void 0),function(e){P[e?"unshift":"push"](()=>{w=e,n(4,w)})},()=>A(k),function(){u=this.checked,n(0,u)},function(){f=this.checked,n(1,f)},function(){R=this.value,n(11,R)},()=>V(ze(R)),function(){Q=this.value,n(18,Q),n(55,i),n(3,h)},()=>X(Q),function(){E=this.value,n(14,E)},()=>X(E),function(){K=this.value,n(17,K),n(54,c),n(3,h)},()=>H(K),function(){D=this.value,n(13,D)},()=>H(D),function(){j=this.value,n(12,j)},()=>V(Ie(j)),function(){Z=this.value,n(19,Z),n(52,_)},function(){T=this.value,n(15,T)}]}var Lt=class extends fe{constructor(e){super(e),ne(this,e,At,Ut,l,{isCaller:0,isReceiver:1,name:2,recipient:3},[-1,-1,-1]),oe("SvelteRegisterComponent",{component:this,tagName:"Participant",options:e,id:Ut.name})}get isCaller(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isCaller(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get isReceiver(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isReceiver(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get name(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get recipient(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set recipient(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};function qt(e,t,n){const o=e.slice();return o[1]=t[n].name,o[2]=t[n].event,o}function zt(e){let t,n,o,i,r=e[1]+"",s=e[2]+"";const a={c:function(){t=v("li"),n=w(r),o=w(": "),i=w(s),c(t,"src/EventLog.svelte",6,8,146)},m:function(e,c){ie(e,t,c),ce(t,n),ce(t,o),ce(t,i)},p:function(e,t){1&t&&r!==(r=e[1]+"")&&le(n,r),1&t&&s!==(s=e[2]+"")&&le(i,s)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:a,id:zt.name,type:"each",source:"(6:4) {#each $eventLog.filter(e => e.event) as { name, event }}",ctx:e}),a}function It(e){let t,n,i,r,s,a=e[0].filter(Ft);ue(a);let l=[];for(let t=0;t<a.length;t+=1)l[t]=zt(qt(e,a,t));const u={c:function(){t=v("ol");for(let e=0;e<l.length;e+=1)l[e].c();n=y(),i=v("em"),r=w("please open\n    "),s=v("code"),s.textContent="chrome://webrtc-internals",c(t,"src/EventLog.svelte",4,0,71),c(s,"src/EventLog.svelte",12,4,215),c(i,"src/EventLog.svelte",10,0,190)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ie(e,t,o);for(let e=0;e<l.length;e+=1)l[e].m(t,null);ie(e,n,o),ie(e,i,o),ce(i,r),ce(i,s)},p:function(e,[n]){if(1&n){let o;for(a=e[0].filter(Ft),ue(a),o=0;o<a.length;o+=1){const c=qt(e,a,o);l[o]?l[o].p(c,n):(l[o]=zt(c),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}},i:o,o:o,d:function(e){e&&re(t),$(l,e),e&&re(n),e&&re(i)}};return oe("SvelteRegisterBlock",{block:u,id:It.name,type:"component",source:"",ctx:e}),u}const Ft=e=>e.event;function Jt(e,t,n){let o;d(ge,"eventLog"),p(e,ge,e=>n(0,o=e));let{$$slots:c={},$$scope:i}=t;de("EventLog",c,[]);const r=[];return Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<EventLog> was created with unknown prop '${e}'`)}),e.$capture_state=()=>({config:ye,eventLog:ge,$eventLog:o}),[o]}var Vt=class extends fe{constructor(e){super(e),ne(this,e,Jt,It,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"EventLog",options:e,id:It.name})}};function Ht(e){let t,n;t=new Lt({props:{name:"alice",isCaller:"true",recipient:"bob"},$$inline:!0});const o={c:function(){Z(t.$$.fragment)},m:function(e,o){ee(t,e,o),n=!0},i:function(e){n||(Y(t.$$.fragment,e),n=!0)},o:function(e){G(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:o,id:Ht.name,type:"if",source:"(32:8) {#if $config.hasCaller}",ctx:e}),o}function Wt(e){let t,n;t=new Lt({props:{name:"bob",isReceiver:"true",recipient:"alice"},$$inline:!0});const o={c:function(){Z(t.$$.fragment)},m:function(e,o){ee(t,e,o),n=!0},i:function(e){n||(Y(t.$$.fragment,e),n=!0)},o:function(e){G(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:o,id:Wt.name,type:"if",source:"(36:8) {#if $config.hasReceiver}",ctx:e}),o}function Xt(e){let t,n,o;n=new Vt({$$inline:!0});const i={c:function(){t=v("div"),Z(n.$$.fragment),ae(t,"class","svelte-n5y9mb"),c(t,"src/Demo.svelte",40,12,922)},m:function(e,c){ie(e,t,c),ee(n,t,null),o=!0},i:function(e){o||(Y(n.$$.fragment,e),o=!0)},o:function(e){G(n.$$.fragment,e),o=!1},d:function(e){e&&re(t),te(n)}};return oe("SvelteRegisterBlock",{block:i,id:Xt.name,type:"if",source:"(40:8) {#if !$config.hideSignaling}",ctx:e}),i}function Yt(e){let t,n,o,i,r,s,a,l;o=new Ue({$$inline:!0});let u=e[0].hasCaller&&Ht(e),d=e[0].hasReceiver&&Wt(e),f=!e[0].hideSignaling&&Xt(e);const p={c:function(){t=v("div"),n=v("aside"),Z(o.$$.fragment),i=y(),r=v("main"),u&&u.c(),s=y(),d&&d.c(),a=y(),f&&f.c(),c(n,"src/Demo.svelte",25,4,576),ae(r,"class","svelte-n5y9mb"),c(r,"src/Demo.svelte",29,4,621),ae(t,"class","svelte-n5y9mb"),c(t,"src/Demo.svelte",24,0,566)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,c){ie(e,t,c),ce(t,n),ee(o,n,null),ce(t,i),ce(t,r),u&&u.m(r,null),ce(r,s),d&&d.m(r,null),ce(r,a),f&&f.m(r,null),l=!0},p:function(e,[t]){e[0].hasCaller?u?1&t&&Y(u,1):(u=Ht(e),u.c(),Y(u,1),u.m(r,s)):u&&(W(),G(u,1,1,()=>{u=null}),X()),e[0].hasReceiver?d?1&t&&Y(d,1):(d=Wt(e),d.c(),Y(d,1),d.m(r,a)):d&&(W(),G(d,1,1,()=>{d=null}),X()),e[0].hideSignaling?f&&(W(),G(f,1,1,()=>{f=null}),X()):f?1&t&&Y(f,1):(f=Xt(e),f.c(),Y(f,1),f.m(r,null))},i:function(e){l||(Y(o.$$.fragment,e),Y(u),Y(d),Y(f),l=!0)},o:function(e){G(o.$$.fragment,e),G(u),G(d),G(f),l=!1},d:function(e){e&&re(t),te(o),u&&u.d(),d&&d.d(),f&&f.d()}};return oe("SvelteRegisterBlock",{block:p,id:Yt.name,type:"component",source:"",ctx:e}),p}function Gt(e,t,n){let o;d(ye,"config"),p(e,ye,e=>n(0,o=e));let{$$slots:c={},$$scope:i}=t;de("Demo",c,[]);const r=[];return Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Demo> was created with unknown prop '${e}'`)}),e.$capture_state=()=>({config:ye,offerStore:Se,answerStore:xe,candidatesStore:Ce,Config:Ue,Participant:Lt,EventLog:Vt,$config:o}),[o]}var Kt=class extends fe{constructor(e){super(e),ne(this,e,Gt,Yt,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"Demo",options:e,id:Yt.name})}};function Qt(e){let t,n;t=new Kt({$$inline:!0});const c={c:function(){Z(t.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ee(t,e,o),n=!0},p:o,i:function(e){n||(Y(t.$$.fragment,e),n=!0)},o:function(e){G(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:c,id:Qt.name,type:"component",source:"",ctx:e}),c}function Zt(e,t,n){let{$$slots:o={},$$scope:c}=t;de("App",o,[]);const i=[];return Object.keys(t).forEach(e=>{~i.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<App> was created with unknown prop '${e}'`)}),e.$capture_state=()=>({Demo:Kt}),[]}const en=new class extends fe{constructor(e){super(e),ne(this,e,Zt,Qt,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"App",options:e,id:Qt.name})}}({target:document.body,props:{}});window.app=en;t.default=en}]);