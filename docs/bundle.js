!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function o(){}n.r(t);function i(e,t,n,o,i){e.__svelte_meta={loc:{file:t,line:n,column:o,char:i}}}function c(e){return e()}function r(){return Object.create(null)}function s(e){e.forEach(c)}function a(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function u(e){return 0===Object.keys(e).length}function d(e,t){if(null!=e&&"function"!=typeof e.subscribe)throw new Error(`'${t}' is not a store with a 'subscribe' method`)}function f(e,...t){if(null==e)return o;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function p(e,t,n){e.$$.on_destroy.push(f(t,n))}new Set;function m(e,t){e.appendChild(t)}function h(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode.removeChild(e)}function $(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function w(e){return document.createTextNode(e)}function y(){return w(" ")}function b(){return w("")}function k(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function S(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e,t){e.value=null==t?"":t}function C(e,t,n){e.classList[n?"add":"remove"](t)}function R(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}new Set;let j;function D(e){j=e}function E(){if(!j)throw new Error("Function called outside component initialization");return j}function O(e){E().$$.on_mount.push(e)}function B(){const e=E();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const i=R(t,n);o.slice().forEach(t=>{t.call(e,i)})}}}const _=[],P=[],T=[],N=[],M=Promise.resolve();let A=!1;function L(){A||(A=!0,M.then(J))}function U(){return L(),M}function I(e){T.push(e)}let q=!1;const F=new Set;function J(){if(!q){q=!0;do{for(let e=0;e<_.length;e+=1){const t=_[e];D(t),V(t.$$)}for(D(null),_.length=0;P.length;)P.pop()();for(let e=0;e<T.length;e+=1){const t=T[e];F.has(t)||(F.add(t),t())}T.length=0}while(_.length);for(;N.length;)N.pop()();A=!1,q=!1,F.clear()}}function V(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(I)}}const z=new Set;let H;function W(){H={r:0,c:[],p:H}}function Y(){H.r||s(H.c),H=H.p}function G(e,t){e&&e.i&&(z.delete(e),e.i(t))}function K(e,t,n,o){if(e&&e.o){if(z.has(e))return;z.add(e),H.c.push(()=>{z.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}const Q="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let X;function Z(e){e&&e.c()}function ee(e,t,n){const{fragment:o,on_mount:i,on_destroy:r,after_update:l}=e.$$;o&&o.m(t,n),I(()=>{const t=i.map(c).filter(a);r?r.push(...t):s(t),e.$$.on_mount=[]}),l.forEach(I)}function te(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ne(e,t,n,i,c,a,l=[-1]){const u=j;D(e);const d=t.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:o,not_equal:c,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:l,skip_bound:!1};let p=!1;if(f.ctx=n?n(e,d,(t,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&c(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&function(e,t){-1===e.$$.dirty[0]&&(_.push(e),L(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n}):[],f.update(),p=!0,s(f.before_update),f.fragment=!!i&&i(f.ctx),t.target){if(t.hydrate){const e=(m=t.target,Array.from(m.childNodes));f.fragment&&f.fragment.l(e),e.forEach(g)}else f.fragment&&f.fragment.c();t.intro&&G(e.$$.fragment),ee(e,t.target,t.anchor),J()}var m;D(u)}"function"==typeof HTMLElement&&(X=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}$destroy(){te(this,1),this.$destroy=o}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!u(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});function oe(e,t){document.dispatchEvent(R(e,Object.assign({version:"3.29.7"},t)))}function ie(e,t){oe("SvelteDOMInsert",{target:e,node:t}),m(e,t)}function ce(e,t,n){oe("SvelteDOMInsert",{target:e,node:t,anchor:n}),h(e,t,n)}function re(e){oe("SvelteDOMRemove",{node:e}),g(e)}function se(e,t,n,o,i,c){const r=!0===o?["capture"]:o?Array.from(Object.keys(o)):[];i&&r.push("preventDefault"),c&&r.push("stopPropagation"),oe("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:r});const s=k(e,t,n,o);return()=>{oe("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:r}),s()}}function ae(e,t,n){S(e,t,n),null==n?oe("SvelteDOMRemoveAttribute",{node:e,attribute:t}):oe("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function le(e,t,n){e[t]=n,oe("SvelteDOMSetProperty",{node:e,property:t,value:n})}function ue(e,t){t=""+t,e.wholeText!==t&&(oe("SvelteDOMSetData",{node:e,data:t}),e.data=t)}function de(e){if(!("string"==typeof e||e&&"object"==typeof e&&"length"in e)){let t="{#each} only iterates over array-like objects.";throw"function"==typeof Symbol&&e&&Symbol.iterator in e&&(t+=" You can use a spread to convert this iterable into an array."),new Error(t)}}function fe(e,t,n){for(const o of Object.keys(t))~n.indexOf(o)||console.warn(`<${e}> received an unexpected slot "${o}".`)}class pe extends class{$destroy(){te(this,1),this.$destroy=o}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!u(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){if(!e||!e.target&&!e.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}const me=[];function he(e,t=o){let n;const i=[];function c(t){if(l(e,t)&&(e=t,n)){const t=!me.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),me.push(n,e)}if(t){for(let e=0;e<me.length;e+=2)me[e][0](me[e+1]);me.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(r,s=o){const a=[r,s];return i.push(a),1===i.length&&(n=t(c)||o),r(e),()=>{const e=i.indexOf(a);-1!==e&&i.splice(e,1),0===i.length&&(n(),n=null)}}}}function ge(e,t,n){const i=!Array.isArray(e),c=i?[e]:e,r=t.length<2;return{subscribe:he(n,e=>{let n=!1;const l=[];let u=0,d=o;const p=()=>{if(u)return;d();const n=t(i?l[0]:l,e);r?e(n):d=a(n)?n:o},m=c.map((e,t)=>f(e,e=>{l[t]=e,u&=~(1<<t),n&&p()},()=>{u|=1<<t}));return n=!0,p(),function(){s(m),d()}}).subscribe}}const $e=he([]),ve=e=>{try{return!0===JSON.parse(e)}catch{return!1}},we=he((()=>{const e=Object.fromEntries(new URLSearchParams(location.search).entries()),t={role:e.role||"both",stream:e.stream||"both",manual:ve(e.manual),remote:ve(e.remote),hideSignaling:ve(e.hideSignaling)};return Object.entries(t).map(([e,t])=>({key:e,value:t}))})()),ye=ge(we,e=>`${window.location.protocol}//${window.location.host}/?${(e=>{const t=new URLSearchParams;for(let[n,o]of e)t.set(n,o);return t.toString()})(e.map(({key:e,value:t})=>[e,t]))}`),be=ge(we,e=>{const t=Object.fromEntries(e.map(({key:e,value:t})=>[e,t]));let{role:n,stream:o,manual:i,remote:c,hideSignaling:r}=t;const s="recv"!==n,a="call"!==n&&"send"!==n||!1,l="down"!==o||!1,u="up"!==o||!1,d=i&&"no"!==i||!1,f=c&&"no"!==c||!1,p=s?"bob":"alice",m=a?"bob":"alice";return{...t,role:n,stream:o,manual:i,remote:c,hasCaller:s,hasReceiver:a,hasUpstream:l,hasDownstream:u,isManual:d,isRemote:f,hideSignaling:r,to:p,from:m}}),ke=he({});const Se=e=>(t,n)=>function(e,t,n){const o={name:e,short:t,event:n};$e.update(e=>[...e,o]),ke.update(n=>({...n,[e]:[...n[e]||[],t]}))}(e,t,n),xe=he({}),Ce=he({}),Re=he({});function je({from:e,offer:t}){xe.update(n=>({...n,[e]:t}))}function De({from:e,answer:t}){Ce.update(n=>({...n,[e]:t}))}function Ee({from:e,candidate:t}){Re.update(n=>{const o=n[e]||[];return{...n,[e]:[...o,t]}})}function Oe({from:e}){Re.update(t=>({...t,[e]:[]}))}const Be="src/Config.svelte";function _e(e,t,n){const o=e.slice();return o[6]=t[n].key,o[7]=t[n].value,o[8]=t,o[9]=n,o}function Pe(e){let t,n,o;function c(){e[3].call(t,e[8],e[9])}const r={c:function(){t=v("input"),ae(t,"type","text"),i(t,Be,33,12,774)},m:function(i,r){ce(i,t,r),x(t,e[7]),n||(o=se(t,"input",c),n=!0)},p:function(n,o){e=n,2&o&&t.value!==e[7]&&x(t,e[7])},d:function(e){e&&re(t),n=!1,o()}};return oe("SvelteRegisterBlock",{block:r,id:Pe.name,type:"else",source:"(33:12) {:else}",ctx:e}),r}function Te(e){let t,n,o;function c(){e[2].call(t,e[8],e[9])}const r={c:function(){t=v("input"),ae(t,"type","checkbox"),i(t,Be,31,12,696)},m:function(i,r){ce(i,t,r),t.checked=e[7],n||(o=se(t,"change",c),n=!0)},p:function(n,o){e=n,2&o&&(t.checked=e[7])},d:function(e){e&&re(t),n=!1,o()}};return oe("SvelteRegisterBlock",{block:r,id:Te.name,type:"if",source:"(31:12) {#if typeof value === 'boolean'}",ctx:e}),r}function Ne(e){let t,n,o,c,r,s,a=e[6]+"";function l(e,t){return"boolean"==typeof e[7]?Te:Pe}let u=l(e),d=u(e);const f={c:function(){t=v("tr"),n=v("td"),o=w(a),c=y(),r=v("td"),d.c(),s=y(),i(n,Be,28,12,607),i(r,Be,29,12,634),i(t,Be,27,8,590)},m:function(e,i){ce(e,t,i),ie(t,n),ie(n,o),ie(t,c),ie(t,r),d.m(r,null),ie(t,s)},p:function(e,t){2&t&&a!==(a=e[6]+"")&&ue(o,a),u===(u=l(e))&&d?d.p(e,t):(d.d(1),d=u(e),d&&(d.c(),d.m(r,null)))},d:function(e){e&&re(t),d.d()}};return oe("SvelteRegisterBlock",{block:f,id:Ne.name,type:"each",source:"(27:4) {#each $query as {key, value}",ctx:e}),f}function Me(e){let t,n,c,r,s,a,l,u,d,f=e[1];de(f);let p=[];for(let t=0;t<f.length;t+=1)p[t]=Ne(_e(e,f,t));const m={c:function(){t=v("details"),n=v("summary"),n.textContent="config",c=y(),r=v("code"),s=v("pre"),a=v("a"),l=w(e[0]),u=y(),d=v("table");for(let e=0;e<p.length;e+=1)p[e].c();i(n,Be,20,4,428),ae(a,"href",e[0]),i(a,Be,22,4,474),i(s,Be,21,10,464),ae(r,"class","svelte-12ii7jf"),i(r,Be,21,4,458),i(d,Be,25,4,536),i(t,Be,19,0,414)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ce(e,t,o),ie(t,n),ie(t,c),ie(t,r),ie(r,s),ie(s,a),ie(a,l),ie(t,u),ie(t,d);for(let e=0;e<p.length;e+=1)p[e].m(d,null)},p:function(e,[t]){if(1&t&&ue(l,e[0]),1&t&&ae(a,"href",e[0]),2&t){let n;for(f=e[1],de(f),n=0;n<f.length;n+=1){const o=_e(e,f,n);p[n]?p[n].p(o,t):(p[n]=Ne(o),p[n].c(),p[n].m(d,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=f.length}},i:o,o:o,d:function(e){e&&re(t),$(p,e)}};return oe("SvelteRegisterBlock",{block:m,id:Me.name,type:"component",source:"",ctx:e}),m}function Ae(e,t,n){let o,i;d(ye,"configUrl"),p(e,ye,e=>n(0,o=e)),d(we,"query"),p(e,we,e=>n(1,i=e));let{$$slots:c={},$$scope:r}=t;fe("Config",c,[]);const s=e=>{try{return"boolean"===JSON.parse(e)}catch{return!1}},a=({target:{value:e,name:t}})=>{be.update(n=>({...n,[t]:"on"===e}))},l=[];return Object.keys(t).forEach(e=>{~l.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Config> was created with unknown prop '${e}'`)}),e.$capture_state=()=>({query:we,config:be,configUrl:ye,eventLog:$e,boolable:s,checkConfig:a,$configUrl:o,$query:i}),[o,i,function(e,t){e[t].value=this.checked,we.set(i)},function(e,t){e[t].value=this.value,we.set(i)}]}var Le=class extends pe{constructor(e){super(e),ne(this,e,Ae,Me,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"Config",options:e,id:Me.name})}};class Ue{constructor({to:e,from:t}){this.to=e,this.from=t}connect({url:e}){this.url=e;const t=new WebSocket(e);t.onopen=()=>{this.socket=t,this.socket.onmessage=this.received.bind(this)}}received({data:e}){const t=JSON.parse(e),{[this.to]:n,type:o}=t;console.debug("its for me!",n);const i=this.to;switch(o){case"offer":je({from:i,offer:n});break;case"answer":De({from:i,answer:n});break;case"candidate":Ee({from:i,candidate:new RTCIceCandidate(n)})}}sendOffer(e){if(e){const t={[this.from]:e,type:"offer"};this.send(t)}}sendAnswer(e){if(e){const t={[this.from]:e,type:"answer"};this.send(t)}}sendCandidate(e){if(e){const t={[this.from]:e,type:"candidate"};this.send(t)}}send(e){if(this.socket){const t=JSON.stringify(e);this.socket.send(t)}}toString(){return`[Signaling Server calling ${this.from} â†’ ${this.to}]`}}const Ie=e=>"string"==typeof e?JSON.parse(e).sdp:"object"==typeof e?e.sdp:void 0,qe=e=>{try{return JSON.parse(e)}catch(t){return""!==e&&console.warn({parseError:t}),[]}},Fe=e=>({type:"offer",sdp:e}),Je=e=>({type:"answer",sdp:e});function Ve(e){let t,n,c,r,s,a,l,u,d=JSON.stringify(e[2],null,4)+"";const f={c:function(){t=v("details"),n=v("summary"),c=w(e[1]),r=y(),s=v("pre"),a=v("code"),l=w(d),i(n,"src/Details.svelte",13,4,200),ae(a,"class","svelte-ubxtzq"),i(a,"src/Details.svelte",15,8,247),i(s,"src/Details.svelte",14,4,233),t.open=u=Boolean(e[2])&&e[0],i(t,"src/Details.svelte",12,0,157)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ce(e,t,o),ie(t,n),ie(n,c),ie(t,r),ie(t,s),ie(s,a),ie(a,l)},p:function(e,[n]){2&n&&ue(c,e[1]),4&n&&d!==(d=JSON.stringify(e[2],null,4)+"")&&ue(l,d),5&n&&u!==(u=Boolean(e[2])&&e[0])&&le(t,"open",u)},i:o,o:o,d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:f,id:Ve.name,type:"component",source:"",ctx:e}),f}function ze(e,t,n){let{$$slots:o={},$$scope:i}=t;fe("Details",o,[]);let{open:c=!0}=t,{summary:r="???"}=t,{data:s}=t;const a=["open","summary","data"];return Object.keys(t).forEach(e=>{~a.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Details> was created with unknown prop '${e}'`)}),e.$$set=e=>{"open"in e&&n(0,c=e.open),"summary"in e&&n(1,r=e.summary),"data"in e&&n(2,s=e.data)},e.$capture_state=()=>({open:c,summary:r,data:s}),e.$inject_state=e=>{"open"in e&&n(0,c=e.open),"summary"in e&&n(1,r=e.summary),"data"in e&&n(2,s=e.data)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[c,r,s]}var He=class extends pe{constructor(e){super(e),ne(this,e,ze,Ve,l,{open:0,summary:1,data:2}),oe("SvelteRegisterComponent",{component:this,tagName:"Details",options:e,id:Ve.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[2]||"data"in n||console.warn("<Details> was created without expected prop 'data'")}get open(){throw new Error("<Details>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set open(e){throw new Error("<Details>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get summary(){throw new Error("<Details>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set summary(e){throw new Error("<Details>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get data(){throw new Error("<Details>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Details>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};const{Object:We}=Q;function Ye(e,t,n){const o=e.slice();return o[15]=t[n],o[17]=n,o}function Ge(e){let t,n,o,c,r=(e[15].label||"camera "+e[17])+"";function s(){return e[9](e[15])}const a={c:function(){t=v("button"),n=w(r),ae(t,"class","svelte-1m40kjd"),i(t,"src/Upstream.svelte",100,4,3187)},m:function(e,i){ce(e,t,i),ie(t,n),o||(c=se(t,"click",s,!1,!1,!1),o=!0)},p:function(t,o){e=t,2&o&&r!==(r=(e[15].label||"camera "+e[17])+"")&&ue(n,r)},d:function(e){e&&re(t),o=!1,c()}};return oe("SvelteRegisterBlock",{block:a,id:Ge.name,type:"each",source:"(100:4) {#each videoDevices as device, index}",ctx:e}),a}function Ke(e){let t,n,o,c,r,s,a,l;r=new He({props:{summary:"settings",data:e[2].getSettings()},$$inline:!0}),a=new He({props:{summary:"constraints",data:e[2].getConstraints()},$$inline:!0});const u={c:function(){t=v("details"),n=v("summary"),o=w(e[3]),c=y(),Z(r.$$.fragment),s=y(),Z(a.$$.fragment),i(n,"src/Upstream.svelte",107,4,3335),i(t,"src/Upstream.svelte",106,0,3321)},m:function(e,i){ce(e,t,i),ie(t,n),ie(n,o),ie(t,c),ee(r,t,null),ie(t,s),ee(a,t,null),l=!0},p:function(e,t){(!l||8&t)&&ue(o,e[3]);const n={};4&t&&(n.data=e[2].getSettings()),r.$set(n);const i={};4&t&&(i.data=e[2].getConstraints()),a.$set(i)},i:function(e){l||(G(r.$$.fragment,e),G(a.$$.fragment,e),l=!0)},o:function(e){K(r.$$.fragment,e),K(a.$$.fragment,e),l=!1},d:function(e){e&&re(t),te(r),te(a)}};return oe("SvelteRegisterBlock",{block:u,id:Ke.name,type:"if",source:"(106:0) {#if mainTrack}",ctx:e}),u}function Qe(e){let t,n,o,c,r,a,l,u,d,f,p,m,h,g,k,S,x,C,R,j,D,E,O,B=e[1];de(B);let _=[];for(let t=0;t<B.length;t+=1)_[t]=Ge(Ye(e,B,t));let P=e[2]&&Ke(e);const T={c:function(){t=v("label"),t.textContent="upstream",n=y(),o=v("video"),c=v("track"),r=y(),a=v("nav"),l=v("button"),u=w("default"),d=y(),f=v("button"),p=w("noise"),m=y(),h=v("button"),g=w("stop"),S=y(),x=v("br"),C=y();for(let e=0;e<_.length;e+=1)_[e].c();R=y(),P&&P.c(),j=b(),ae(t,"for","upstream"),i(t,"src/Upstream.svelte",89,0,2747),ae(c,"kind","captions"),i(c,"src/Upstream.svelte",91,4,2879),ae(o,"id","upstream"),o.autoplay="true",ae(o,"width","400"),ae(o,"height","300"),ae(o,"class","svelte-1m40kjd"),i(o,"src/Upstream.svelte",90,0,2786),l.disabled=e[4],ae(l,"class","svelte-1m40kjd"),i(l,"src/Upstream.svelte",95,4,2925),f.disabled=e[4],ae(f,"class","svelte-1m40kjd"),i(f,"src/Upstream.svelte",96,4,2996),h.disabled=k=!e[4],ae(h,"class","svelte-1m40kjd"),i(h,"src/Upstream.svelte",97,4,3064),i(x,"src/Upstream.svelte",98,4,3136),ae(a,"class","svelte-1m40kjd"),i(a,"src/Upstream.svelte",93,0,2914)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(i,s){ce(i,t,s),ce(i,n,s),ce(i,o,s),ie(o,c),e[8](o),ce(i,r,s),ce(i,a,s),ie(a,l),ie(l,u),ie(a,d),ie(a,f),ie(f,p),ie(a,m),ie(a,h),ie(h,g),ie(a,S),ie(a,x),ie(a,C);for(let e=0;e<_.length;e+=1)_[e].m(a,null);ce(i,R,s),P&&P.m(i,s),ce(i,j,s),D=!0,E||(O=[se(l,"click",e[6],!1,!1,!1),se(f,"click",e[5],!1,!1,!1),se(h,"click",e[7],!1,!1,!1)],E=!0)},p:function(e,[t]){if((!D||16&t)&&le(l,"disabled",e[4]),(!D||16&t)&&le(f,"disabled",e[4]),(!D||16&t&&k!==(k=!e[4]))&&le(h,"disabled",k),66&t){let n;for(B=e[1],de(B),n=0;n<B.length;n+=1){const o=Ye(e,B,n);_[n]?_[n].p(o,t):(_[n]=Ge(o),_[n].c(),_[n].m(a,null))}for(;n<_.length;n+=1)_[n].d(1);_.length=B.length}e[2]?P?(P.p(e,t),4&t&&G(P,1)):(P=Ke(e),P.c(),G(P,1),P.m(j.parentNode,j)):P&&(W(),K(P,1,1,()=>{P=null}),Y())},i:function(e){D||(G(P),D=!0)},o:function(e){K(P),D=!1},d:function(i){i&&re(t),i&&re(n),i&&re(o),e[8](null),i&&re(r),i&&re(a),$(_,i),i&&re(R),P&&P.d(i),i&&re(j),E=!1,s(O)}};return oe("SvelteRegisterBlock",{block:T,id:Qe.name,type:"component",source:"",ctx:e}),T}function Xe(){let e=Object.assign(document.createElement("canvas"),{width:400,height:300}),t=e.getContext("2d");t.fillRect(0,0,e.width,e.height);let n=t.getImageData(0,0,e.width,e.height);return requestAnimationFrame((function e(){for(var o=0;o<n.data.length;o++)n.data[o++]=n.data[o++]=n.data[o++]=255*Math.random();t.putImageData(n,0,0),requestAnimationFrame(e)})),e.captureStream(60)}function Ze(e,t,n){let{$$slots:o={},$$scope:i}=t;fe("Upstream",o,[]);const c=B();let r,s,a,l=[];async function u(e=a){const t={video:!e||{deviceId:e}};return await navigator.mediaDevices.getUserMedia(t)}async function d(e){p();const t=await Xe();n(10,s=t),n(0,r.srcObject=t,r),c("stream",t)}async function f(e){p();const t=await u(e);n(10,s=t),n(0,r.srcObject=t,r),c("stream",t)}function p(){s&&s.getTracks().forEach(e=>e.stop()),n(10,s=void 0)}async function m(){const e=await navigator.mediaDevices.enumerateDevices();n(1,l=e.filter(({kind:e})=>"videoinput"===e))}O(()=>{m(),navigator.mediaDevices.addEventListener("devicechange",e=>{navigator.mediaDevices.enumerateDevices().then(e=>m())})});const h=[];We.keys(t).forEach(e=>{~h.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Upstream> was created with unknown prop '${e}'`)});let g,$,v;return e.$capture_state=()=>({Details:He,onMount:O,createEventDispatcher:B,dispatch:c,upstreamVideo:r,upstreamStream:s,videoDevices:l,selectedVideoDevice:a,getWebcamFeed:u,makeNoise:Xe,getNoise:d,getWebcam:f,stopUpstream:p,getVideoDevices:m,mainTrack:g,upstreamName:$,hasStream:v}),e.$inject_state=e=>{"upstreamVideo"in e&&n(0,r=e.upstreamVideo),"upstreamStream"in e&&n(10,s=e.upstreamStream),"videoDevices"in e&&n(1,l=e.videoDevices),"selectedVideoDevice"in e&&(a=e.selectedVideoDevice),"mainTrack"in e&&n(2,g=e.mainTrack),"upstreamName"in e&&n(3,$=e.upstreamName),"hasStream"in e&&n(4,v=e.hasStream)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{1024&e.$$.dirty&&n(2,g=s&&s.getTracks()[0]),1024&e.$$.dirty&&n(3,$=s&&s.constructor.name),1024&e.$$.dirty&&n(4,v=Boolean(s))},[r,l,g,$,v,d,f,p,function(e){P[e?"unshift":"push"](()=>{r=e,n(0,r)})},e=>f(e.deviceId)]}var et=class extends pe{constructor(e){super(e),ne(this,e,Ze,Qe,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"Upstream",options:e,id:Qe.name})}};function tt(e){let t,n,o,i;t=new He({props:{summary:"settings",data:e[1].getSettings()},$$inline:!0}),o=new He({props:{summary:"constraints",data:e[1].getConstraints()},$$inline:!0});const c={c:function(){Z(t.$$.fragment),n=y(),Z(o.$$.fragment)},m:function(e,c){ee(t,e,c),ce(e,n,c),ee(o,e,c),i=!0},p:function(e,n){const i={};2&n&&(i.data=e[1].getSettings()),t.$set(i);const c={};2&n&&(c.data=e[1].getConstraints()),o.$set(c)},i:function(e){i||(G(t.$$.fragment,e),G(o.$$.fragment,e),i=!0)},o:function(e){K(t.$$.fragment,e),K(o.$$.fragment,e),i=!1},d:function(e){te(t,e),e&&re(n),te(o,e)}};return oe("SvelteRegisterBlock",{block:c,id:tt.name,type:"if",source:"(22:0) {#if mainTrack}",ctx:e}),c}function nt(e){let t,n,o,c,r,s,a,l=e[1]&&tt(e);const u={c:function(){t=v("label"),t.textContent="downstream",n=y(),o=v("video"),c=v("track"),r=y(),l&&l.c(),s=b(),ae(t,"for","downstream"),i(t,"src/Downstream.svelte",16,0,244),ae(c,"kind","captions"),i(c,"src/Downstream.svelte",18,4,361),o.autoplay="true",ae(o,"width","400"),ae(o,"height","300"),i(o,"src/Downstream.svelte",17,0,287)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(i,u){ce(i,t,u),ce(i,n,u),ce(i,o,u),ie(o,c),e[3](o),ce(i,r,u),l&&l.m(i,u),ce(i,s,u),a=!0},p:function(e,[t]){e[1]?l?(l.p(e,t),2&t&&G(l,1)):(l=tt(e),l.c(),G(l,1),l.m(s.parentNode,s)):l&&(W(),K(l,1,1,()=>{l=null}),Y())},i:function(e){a||(G(l),a=!0)},o:function(e){K(l),a=!1},d:function(i){i&&re(t),i&&re(n),i&&re(o),e[3](null),i&&re(r),l&&l.d(i),i&&re(s)}};return oe("SvelteRegisterBlock",{block:u,id:nt.name,type:"component",source:"",ctx:e}),u}function ot(e,t,n){let{$$slots:o={},$$scope:i}=t;fe("Downstream",o,[]);let c,{stream:r}=t;const s=["stream"];let a;return Object.keys(t).forEach(e=>{~s.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Downstream> was created with unknown prop '${e}'`)}),e.$$set=e=>{"stream"in e&&n(2,r=e.stream)},e.$capture_state=()=>({Details:He,stream:r,videoTag:c,mainTrack:a}),e.$inject_state=e=>{"stream"in e&&n(2,r=e.stream),"videoTag"in e&&n(0,c=e.videoTag),"mainTrack"in e&&n(1,a=e.mainTrack)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{4&e.$$.dirty&&n(1,a=r&&r.getTracks()[0]),5&e.$$.dirty&&c&&n(0,c.srcObject=r,c)},[c,a,r,function(e){P[e?"unshift":"push"](()=>{c=e,n(0,c),n(2,r)})}]}var it=class extends pe{constructor(e){super(e),ne(this,e,ot,nt,l,{stream:2}),oe("SvelteRegisterComponent",{component:this,tagName:"Downstream",options:e,id:nt.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[2]||"stream"in n||console.warn("<Downstream> was created without expected prop 'stream'")}get stream(){throw new Error("<Downstream>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set stream(e){throw new Error("<Downstream>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};function ct(e){let t,n,c,r,a,l,u;const d={c:function(){t=v("form"),n=v("input"),c=y(),r=v("code"),a=w(e[0]),ae(n,"size","90"),ae(n,"placeholder","ws url"),i(n,"src/RemoteBar.svelte",18,4,498),i(t,"src/RemoteBar.svelte",17,0,451),i(r,"src/RemoteBar.svelte",21,0,576)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,i){var s;ce(o,t,i),ie(t,n),x(n,e[1]),ce(o,c,i),ce(o,r,i),ie(r,a),l||(u=[se(n,"input",e[2]),se(t,"submit",(s=rt,function(e){return e.preventDefault(),s.call(this,e)}),!1,!0,!1)],l=!0)},p:function(e,[t]){2&t&&n.value!==e[1]&&x(n,e[1]),1&t&&ue(a,e[0])},i:o,o:o,d:function(e){e&&re(t),e&&re(c),e&&re(r),l=!1,s(u)}};return oe("SvelteRegisterBlock",{block:d,id:ct.name,type:"component",source:"",ctx:e}),d}function rt(){}function st(e,t,n){let{$$slots:o={},$$scope:i}=t;fe("RemoteBar",o,[]);let{signalingClient:c}=t;const r=["signalingClient"];let s;return Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<RemoteBar> was created with unknown prop '${e}'`)}),e.$$set=e=>{"signalingClient"in e&&n(0,c=e.signalingClient)},e.$capture_state=()=>({offerStore:xe,answerStore:Ce,candidatesStore:Re,config:be,signalingClient:c,onSubmit:rt,signalingServer:s}),e.$inject_state=e=>{"signalingClient"in e&&n(0,c=e.signalingClient),"signalingServer"in e&&n(1,s=e.signalingServer)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{3&e.$$.dirty&&(c.connect({url:s}),window.client=c)},n(1,s=`wss://${window.location.host}/signaling/test`),[c,s,function(){s=this.value,n(1,s)}]}var at=class extends pe{constructor(e){super(e),ne(this,e,st,ct,l,{signalingClient:0}),oe("SvelteRegisterComponent",{component:this,tagName:"RemoteBar",options:e,id:ct.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"signalingClient"in n||console.warn("<RemoteBar> was created without expected prop 'signalingClient'")}get signalingClient(){throw new Error("<RemoteBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set signalingClient(e){throw new Error("<RemoteBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};function lt(e,t,n){const o=e.slice();return o[4]=t[n],o}function ut(e){let t,n,o=e[1];de(o);let i=[];for(let t=0;t<o.length;t+=1)i[t]=dt(lt(e,o,t));const c=e=>K(i[e],1,1,()=>{i[e]=null}),r={c:function(){for(let e=0;e<i.length;e+=1)i[e].c();t=b()},m:function(e,o){for(let t=0;t<i.length;t+=1)i[t].m(e,o);ce(e,t,o),n=!0},p:function(e,n){if(6&n){let r;for(o=e[1],de(o),r=0;r<o.length;r+=1){const c=lt(e,o,r);i[r]?(i[r].p(c,n),G(i[r],1)):(i[r]=dt(c),i[r].c(),G(i[r],1),i[r].m(t.parentNode,t))}for(W(),r=o.length;r<i.length;r+=1)c(r);Y()}},i:function(e){if(!n){for(let e=0;e<o.length;e+=1)G(i[e]);n=!0}},o:function(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)K(i[e]);n=!1},d:function(e){$(i,e),e&&re(t)}};return oe("SvelteRegisterBlock",{block:r,id:ut.name,type:"if",source:"(72:0) {#if transceiverDetails}",ctx:e}),r}function dt(e){let t,n;t=new He({props:{summary:`transceiver ${e[4].mid} (of ${e[2].length})`,data:e[4],open:!1},$$inline:!0});const o={c:function(){Z(t.$$.fragment)},m:function(e,o){ee(t,e,o),n=!0},p:function(e,n){const o={};6&n&&(o.summary=`transceiver ${e[4].mid} (of ${e[2].length})`),2&n&&(o.data=e[4]),t.$set(o)},i:function(e){n||(G(t.$$.fragment,e),n=!0)},o:function(e){K(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:o,id:dt.name,type:"each",source:"(73:4) {#each transceiverDetails as transceiverDetail}",ctx:e}),o}function ft(e){let t,n,o,c,r,s,a=e[1]&&ut(e);const l={c:function(){t=v("div"),n=v("h5"),o=w("transceivers of "),c=w(e[0]),r=y(),a&&a.c(),i(n,"src/Transceivers.svelte",70,4,2535),ae(t,"id","box"),ae(t,"class","svelte-o38ol7"),i(t,"src/Transceivers.svelte",69,0,2516)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,i){ce(e,t,i),ie(t,n),ie(n,o),ie(n,c),ie(t,r),a&&a.m(t,null),s=!0},p:function(e,[n]){(!s||1&n)&&ue(c,e[0]),e[1]?a?(a.p(e,n),2&n&&G(a,1)):(a=ut(e),a.c(),G(a,1),a.m(t,null)):a&&(W(),K(a,1,1,()=>{a=null}),Y())},i:function(e){s||(G(a),s=!0)},o:function(e){K(a),s=!1},d:function(e){e&&re(t),a&&a.d()}};return oe("SvelteRegisterBlock",{block:l,id:ft.name,type:"component",source:"",ctx:e}),l}function pt(e,t,n){let{$$slots:o={},$$scope:i}=t;fe("Transceivers",o,[]);let c,{name:r}=t,{peerconnection:s}=t;O(()=>{const e=setInterval(()=>{l&&n(1,c=l.map(({mid:e,direction:t,currentDirection:n,stopped:o,sender:i,receiver:c})=>{let r={},s={};{let{dtmf:e,track:t,transport:n}=i;r={dtmf:e,track:t,transport:n,parameters:i.getParameters&&i.getParameters()}}{let{dtmf:e,track:t,transport:n}=c;s={dtmf:e,track:t,transport:n,parameters:c.getParameters&&c.getParameters(),csrcs:c.getContributingSources(),ssrcs:c.getSynchronizationSources()}}return{mid:e,direction:t,currentDirection:n,stopped:o,sender:r,receiver:s}}))},1e3);return()=>clearInterval(e)});const a=["name","peerconnection"];let l;return Object.keys(t).forEach(e=>{~a.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Transceivers> was created with unknown prop '${e}'`)}),e.$$set=e=>{"name"in e&&n(0,r=e.name),"peerconnection"in e&&n(3,s=e.peerconnection)},e.$capture_state=()=>({onMount:O,Details:He,name:r,peerconnection:s,transceiverDetails:c,transceivers:l}),e.$inject_state=e=>{"name"in e&&n(0,r=e.name),"peerconnection"in e&&n(3,s=e.peerconnection),"transceiverDetails"in e&&n(1,c=e.transceiverDetails),"transceivers"in e&&n(2,l=e.transceivers)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{8&e.$$.dirty&&n(2,l=s&&s.getTransceivers())},[r,c,l,s]}var mt=class extends pe{constructor(e){super(e),ne(this,e,pt,ft,l,{name:0,peerconnection:3}),oe("SvelteRegisterComponent",{component:this,tagName:"Transceivers",options:e,id:ft.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"name"in n||console.warn("<Transceivers> was created without expected prop 'name'"),void 0!==t[3]||"peerconnection"in n||console.warn("<Transceivers> was created without expected prop 'peerconnection'")}get name(){throw new Error("<Transceivers>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(e){throw new Error("<Transceivers>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get peerconnection(){throw new Error("<Transceivers>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set peerconnection(e){throw new Error("<Transceivers>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};const{console:ht}=Q,gt="src/Participant.svelte";function $t(e){let t,n;t=new at({props:{signalingClient:e[23]},$$inline:!0});const i={c:function(){Z(t.$$.fragment)},m:function(e,o){ee(t,e,o),n=!0},p:o,i:function(e){n||(G(t.$$.fragment,e),n=!0)},o:function(e){K(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:i,id:$t.name,type:"if",source:"(259:4) {#if $config.isRemote}",ctx:e}),i}function vt(e){let t,n,o,c,r,s,a;function l(e,t){return e[6]?yt:wt}n=new et({$$inline:!0}),n.$on("stream",e[32]);let u=l(e),d=u(e);const f={c:function(){t=v("div"),Z(n.$$.fragment),o=y(),c=v("button"),d.c(),i(c,gt,267,16,8156),ae(t,"id","upstream"),ae(t,"class","svelte-xjeo21"),i(t,gt,265,12,8032)},m:function(i,l){ce(i,t,l),ee(n,t,null),ie(t,o),ie(t,c),d.m(c,null),r=!0,s||(a=se(c,"click",e[33],!1,!1,!1),s=!0)},p:function(e,t){u!==(u=l(e))&&(d.d(1),d=u(e),d&&(d.c(),d.m(c,null)))},i:function(e){r||(G(n.$$.fragment,e),r=!0)},o:function(e){K(n.$$.fragment,e),r=!1},d:function(e){e&&re(t),te(n),d.d(),s=!1,a()}};return oe("SvelteRegisterBlock",{block:f,id:vt.name,type:"if",source:"(265:8) {#if $config.hasUpstream}",ctx:e}),f}function wt(e){let t;const n={c:function(){t=w("addStream")},m:function(e,n){ce(e,t,n)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:n,id:wt.name,type:"else",source:"(269:44) {:else}",ctx:e}),n}function yt(e){let t;const n={c:function(){t=w("replaceTrack")},m:function(e,n){ce(e,t,n)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:n,id:yt.name,type:"if",source:"(269:20) {#if sender}",ctx:e}),n}function bt(e){let t,n,o;n=new it({props:{},$$inline:!0}),e[34](n);const c={c:function(){t=v("div"),Z(n.$$.fragment),ae(t,"id","downstream"),ae(t,"class","svelte-xjeo21"),i(t,gt,273,12,8364)},m:function(e,i){ce(e,t,i),ee(n,t,null),o=!0},p:function(e,t){n.$set({})},i:function(e){o||(G(n.$$.fragment,e),o=!0)},o:function(e){K(n.$$.fragment,e),o=!1},d:function(o){o&&re(t),e[34](null),te(n)}};return oe("SvelteRegisterBlock",{block:c,id:bt.name,type:"if",source:"(273:8) {#if $config.hasDownstream}",ctx:e}),c}function kt(e){let t,n,o=e[16].join(" ")+"";const c={c:function(){t=v("small"),n=w(o),i(t,gt,297,16,9038)},m:function(e,o){ce(e,t,o),ie(t,n)},p:function(e,t){65536&t[0]&&o!==(o=e[16].join(" ")+"")&&ue(n,o)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:c,id:kt.name,type:"if",source:"(297:12) {#if !hideSignaling}",ctx:e}),c}function St(e){let t,n,o,c,r,s,a,l,u,d=e[11]&&xt(e),f=e[18]&&!e[21].isManual&&Ct(e),p=e[21].isManual&&Rt(e);const m={c:function(){t=v("label"),n=w("1.\n                    "),o=v("button"),o.textContent="create offer",c=y(),d&&d.c(),r=y(),f&&f.c(),s=y(),p&&p.c(),a=b(),i(o,gt,316,20,9608),i(t,gt,314,16,9557)},m:function(i,m){ce(i,t,m),ie(t,n),ie(t,o),ce(i,c,m),d&&d.m(i,m),ce(i,r,m),f&&f.m(i,m),ce(i,s,m),p&&p.m(i,m),ce(i,a,m),l||(u=se(o,"click",e[25],!1,!1,!1),l=!0)},p:function(e,t){e[11]?d?d.p(e,t):(d=xt(e),d.c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null),e[18]&&!e[21].isManual?f?f.p(e,t):(f=Ct(e),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null),e[21].isManual?p?p.p(e,t):(p=Rt(e),p.c(),p.m(a.parentNode,a)):p&&(p.d(1),p=null)},d:function(e){e&&re(t),e&&re(c),d&&d.d(e),e&&re(r),f&&f.d(e),e&&re(s),p&&p.d(e),e&&re(a),l=!1,u()}};return oe("SvelteRegisterBlock",{block:m,id:St.name,type:"if",source:"(314:12) {#if isCaller}",ctx:e}),m}function xt(e){let t,n,o,c,r,a,l,u,d,f,p,m;const h={c:function(){t=v("div"),n=v("textarea"),o=y(),c=v("br"),r=y(),a=v("label"),l=w("2.\n                            "),u=v("button"),u.textContent="setLocalDescription",d=y(),f=v("button"),f.textContent="send offer",ae(n,"cols","60"),ae(n,"rows","20"),ae(n,"class","svelte-xjeo21"),C(n,"hideSignaling",e[22]),i(n,gt,321,24,9773),i(c,gt,322,24,9877),i(u,gt,325,28,9975),i(f,gt,326,28,10094),i(a,gt,323,24,9908),i(t,gt,320,20,9743)},m:function(i,s){ce(i,t,s),ie(t,n),x(n,e[11]),ie(t,o),ie(t,c),ie(t,r),ie(t,a),ie(a,l),ie(a,u),ie(a,d),ie(a,f),p||(m=[se(n,"input",e[37]),se(u,"click",e[38],!1,!1,!1),se(f,"click",e[27],!1,!1,!1)],p=!0)},p:function(e,t){2048&t[0]&&x(n,e[11]),4194304&t[0]&&C(n,"hideSignaling",e[22])},d:function(e){e&&re(t),p=!1,s(m)}};return oe("SvelteRegisterBlock",{block:h,id:xt.name,type:"if",source:"(320:16) {#if localOfferSdp}",ctx:e}),h}function Ct(e){let t,n,o,c,r,a,l,u,d,f;const p={c:function(){t=v("div"),n=v("textarea"),o=y(),c=v("br"),r=y(),a=v("label"),l=w("5.\n                            "),u=v("button"),u.textContent="setRemoteDescription",ae(n,"cols","60"),ae(n,"rows","20"),ae(n,"class","svelte-xjeo21"),C(n,"hideSignaling",e[22]),i(n,gt,332,24,10333),i(c,gt,333,24,10438),i(u,gt,336,28,10536),i(a,gt,334,24,10469),i(t,gt,331,20,10303)},m:function(i,s){ce(i,t,s),ie(t,n),x(n,e[18]),ie(t,o),ie(t,c),ie(t,r),ie(t,a),ie(a,l),ie(a,u),d||(f=[se(n,"input",e[39]),se(u,"click",e[40],!1,!1,!1)],d=!0)},p:function(e,t){262144&t[0]&&x(n,e[18]),4194304&t[0]&&C(n,"hideSignaling",e[22])},d:function(e){e&&re(t),d=!1,s(f)}};return oe("SvelteRegisterBlock",{block:p,id:Ct.name,type:"if",source:"(331:16) {#if receivedAnswer && !$config.isManual}",ctx:e}),p}function Rt(e){let t,n,o,c,r,a,l,u,d,f,p,m;const h={c:function(){t=v("div"),n=v("strong"),n.textContent="MANUAL ANSWER HERE",o=y(),c=v("textarea"),r=y(),a=v("br"),l=y(),u=v("label"),d=w("5.\n                            "),f=v("button"),f.textContent="setRemoteDescription",i(n,gt,342,24,10796),ae(c,"cols","60"),ae(c,"rows","20"),ae(c,"class","svelte-xjeo21"),i(c,gt,343,24,10856),i(a,gt,344,24,10941),i(f,gt,347,28,11039),i(u,gt,345,24,10972),i(t,gt,341,20,10766)},m:function(i,s){ce(i,t,s),ie(t,n),ie(t,o),ie(t,c),x(c,e[14]),ie(t,r),ie(t,a),ie(t,l),ie(t,u),ie(u,d),ie(u,f),p||(m=[se(c,"input",e[41]),se(f,"click",e[42],!1,!1,!1)],p=!0)},p:function(e,t){16384&t[0]&&x(c,e[14])},d:function(e){e&&re(t),p=!1,s(m)}};return oe("SvelteRegisterBlock",{block:h,id:Rt.name,type:"if",source:"(341:16) {#if $config.isManual}",ctx:e}),h}function jt(e){let t,n,o,i=e[17]&&!e[21].isManual&&Dt(e),c=e[21].isManual&&Et(e),r=e[12]&&e[17]&&Ot(e);const s={c:function(){i&&i.c(),t=y(),c&&c.c(),n=y(),r&&r.c(),o=b()},m:function(e,s){i&&i.m(e,s),ce(e,t,s),c&&c.m(e,s),ce(e,n,s),r&&r.m(e,s),ce(e,o,s)},p:function(e,s){e[17]&&!e[21].isManual?i?i.p(e,s):(i=Dt(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),e[21].isManual?c?c.p(e,s):(c=Et(e),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null),e[12]&&e[17]?r?r.p(e,s):(r=Ot(e),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d:function(e){i&&i.d(e),e&&re(t),c&&c.d(e),e&&re(n),r&&r.d(e),e&&re(o)}};return oe("SvelteRegisterBlock",{block:s,id:jt.name,type:"if",source:"(354:12) {#if isReceiver}",ctx:e}),s}function Dt(e){let t,n,o,c,r,a,l,u,d,f,p,m;const h={c:function(){t=v("div"),n=v("textarea"),o=y(),c=v("br"),r=y(),a=v("label"),l=w("3.\n                            "),u=v("button"),u.textContent="setRemoteDescription",d=y(),f=v("button"),f.textContent="create answer",ae(n,"cols","60"),ae(n,"rows","20"),ae(n,"class","svelte-xjeo21"),C(n,"hideSignaling",e[22]),i(n,gt,356,24,11365),i(c,gt,357,24,11469),i(u,gt,360,28,11567),i(f,gt,361,28,11682),i(a,gt,358,24,11500),i(t,gt,355,20,11335)},m:function(i,s){ce(i,t,s),ie(t,n),x(n,e[17]),ie(t,o),ie(t,c),ie(t,r),ie(t,a),ie(a,l),ie(a,u),ie(a,d),ie(a,f),p||(m=[se(n,"input",e[43]),se(u,"click",e[44],!1,!1,!1),se(f,"click",e[26],!1,!1,!1)],p=!0)},p:function(e,t){131072&t[0]&&x(n,e[17]),4194304&t[0]&&C(n,"hideSignaling",e[22])},d:function(e){e&&re(t),p=!1,s(m)}};return oe("SvelteRegisterBlock",{block:h,id:Dt.name,type:"if",source:"(355:16) {#if receivedOffer && !$config.isManual}",ctx:e}),h}function Et(e){let t,n,o,c,r,a,l,u,d,f,p,m,h,g;const $={c:function(){t=v("div"),n=v("strong"),n.textContent="MANUAL OFFER HERE",o=y(),c=v("textarea"),r=y(),a=v("br"),l=y(),u=v("label"),d=w("3.\n                            "),f=v("button"),f.textContent="setRemoteDescription",p=y(),m=v("button"),m.textContent="create answer",i(n,gt,367,24,11908),ae(c,"cols","60"),ae(c,"rows","20"),ae(c,"class","svelte-xjeo21"),i(c,gt,368,24,11967),i(a,gt,369,24,12051),i(f,gt,372,28,12149),i(m,gt,373,28,12264),i(u,gt,370,24,12082),i(t,gt,366,20,11878)},m:function(i,s){ce(i,t,s),ie(t,n),ie(t,o),ie(t,c),x(c,e[13]),ie(t,r),ie(t,a),ie(t,l),ie(t,u),ie(u,d),ie(u,f),ie(u,p),ie(u,m),h||(g=[se(c,"input",e[45]),se(f,"click",e[46],!1,!1,!1),se(m,"click",e[26],!1,!1,!1)],h=!0)},p:function(e,t){8192&t[0]&&x(c,e[13])},d:function(e){e&&re(t),h=!1,s(g)}};return oe("SvelteRegisterBlock",{block:$,id:Et.name,type:"if",source:"(366:16) {#if $config.isManual}",ctx:e}),$}function Ot(e){let t,n,o,c,r,a,l,u,d,f,p,m;const h={c:function(){t=v("div"),n=v("textarea"),o=y(),c=v("br"),r=y(),a=v("label"),l=w("4.\n                            "),u=v("button"),u.textContent="setLocalDescription",d=y(),f=v("button"),f.textContent="send answer",ae(n,"cols","60"),ae(n,"rows","20"),ae(n,"class","svelte-xjeo21"),C(n,"hideSignaling",e[22]),i(n,gt,379,24,12505),i(c,gt,380,24,12610),i(u,gt,383,28,12708),i(f,gt,384,28,12829),i(a,gt,381,24,12641),i(t,gt,378,20,12475)},m:function(i,s){ce(i,t,s),ie(t,n),x(n,e[12]),ie(t,o),ie(t,c),ie(t,r),ie(t,a),ie(a,l),ie(a,u),ie(a,d),ie(a,f),p||(m=[se(n,"input",e[47]),se(u,"click",e[48],!1,!1,!1),se(f,"click",e[28],!1,!1,!1)],p=!0)},p:function(e,t){4096&t[0]&&x(n,e[12]),4194304&t[0]&&C(n,"hideSignaling",e[22])},d:function(e){e&&re(t),p=!1,s(m)}};return oe("SvelteRegisterBlock",{block:h,id:Ot.name,type:"if",source:"(378:16) {#if localAnswerSdp && receivedOffer}",ctx:e}),h}function Bt(e){let t,n,o;const c={c:function(){t=v("textarea"),ae(t,"cols","60"),ae(t,"rows","10"),ae(t,"class","svelte-xjeo21"),C(t,"hideSignaling",e[22]),i(t,gt,391,16,13061)},m:function(i,c){ce(i,t,c),x(t,e[19]),n||(o=se(t,"input",e[49]),n=!0)},p:function(e,n){524288&n[0]&&x(t,e[19]),4194304&n[0]&&C(t,"hideSignaling",e[22])},d:function(e){e&&re(t),n=!1,o()}};return oe("SvelteRegisterBlock",{block:c,id:Bt.name,type:"if",source:"(391:12) {#if readableCandidates.length || $config.isManual}",ctx:e}),c}function _t(e){let t,n,o,c,r,s,a,l,u=JSON.stringify(e[20],null,4)+"";const d={c:function(){t=v("label"),t.textContent="injected Candidates",n=y(),o=v("textarea"),c=y(),r=v("pre"),s=w(u),ae(t,"for","injectedCandidates"),i(t,gt,395,16,13216),ae(o,"name","injectedCandidates"),ae(o,"cols","60"),ae(o,"rows","20"),ae(o,"class","svelte-xjeo21"),i(o,gt,396,16,13292),i(r,gt,397,16,13399)},m:function(i,u){ce(i,t,u),ce(i,n,u),ce(i,o,u),x(o,e[15]),ce(i,c,u),ce(i,r,u),ie(r,s),a||(l=se(o,"input",e[50]),a=!0)},p:function(e,t){32768&t[0]&&x(o,e[15]),1048576&t[0]&&u!==(u=JSON.stringify(e[20],null,4)+"")&&ue(s,u)},d:function(e){e&&re(t),e&&re(n),e&&re(o),e&&re(c),e&&re(r),a=!1,l()}};return oe("SvelteRegisterBlock",{block:d,id:_t.name,type:"if",source:"(395:12) {#if $config.isManual}",ctx:e}),d}function Pt(e){let t,n,o,c,r,a,l,u,d,f,p,m,h,g,$,b,k,S,x,C,R,j,D,E,O,B,_,P,T,N,M,A,L,U,I,q,F,J,V,z,H,Q,X,ne,le,de,fe,pe,me=e[21].isRemote&&$t(e),he=e[21].hasUpstream&&vt(e),ge=e[21].hasDownstream&&bt(e);h=new mt({props:{name:e[2],peerconnection:e[5]},$$inline:!0});let $e=!e[22]&&kt(e),ve=e[0]&&St(e),we=e[1]&&jt(e),ye=(e[19].length||e[21].isManual)&&Bt(e),be=e[21].isManual&&_t(e);const ke={c:function(){t=v("section"),n=v("h3"),o=w(e[2]),c=y(),me&&me.c(),r=y(),a=v("small"),l=w("talking to "),u=w(e[3]),d=y(),f=v("div"),he&&he.c(),p=y(),ge&&ge.c(),m=y(),Z(h.$$.fragment),g=y(),$=v("div"),b=v("dl"),k=v("dt"),S=w("signaling:\n                    "),x=v("code"),C=w(e[8]),R=y(),j=v("dt"),D=w("connection:\n                    "),E=v("code"),O=w(e[9]),B=y(),_=v("dt"),P=w("ice:\n                    "),T=v("code"),N=w(e[10]),M=y(),$e&&$e.c(),A=y(),L=v("fieldset"),U=v("span"),I=v("label"),q=v("input"),F=w("\n                        caller"),J=y(),V=v("label"),z=v("input"),H=w("\n                        receiver"),Q=y(),ve&&ve.c(),X=y(),we&&we.c(),ne=y(),ye&&ye.c(),le=y(),be&&be.c(),i(n,gt,257,4,7827),i(a,gt,261,4,7924),ae(x,"class","svelte-xjeo21"),i(x,gt,284,20,8670),i(k,gt,282,16,8614),ae(E,"class","svelte-xjeo21"),i(E,gt,288,20,8795),i(j,gt,286,16,8738),ae(T,"class","svelte-xjeo21"),i(T,gt,292,20,8914),i(_,gt,290,16,8864),i(b,gt,281,12,8593),ae(q,"type","checkbox"),i(q,gt,303,24,9189),i(I,gt,302,20,9157),ae(z,"type","checkbox"),i(z,gt,307,24,9351),i(V,gt,306,20,9319),ae(U,"class","svelte-xjeo21"),i(U,gt,301,16,9130),ae(L,"class","svelte-xjeo21"),i(L,gt,300,12,9103),ae($,"id","signaling"),ae($,"class","svelte-xjeo21"),i($,gt,280,8,8560),ae(f,"id","streams"),ae(f,"class","svelte-xjeo21"),i(f,gt,262,4,7966),i(t,gt,256,0,7813)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(i,s){ce(i,t,s),ie(t,n),ie(n,o),ie(t,c),me&&me.m(t,null),ie(t,r),ie(t,a),ie(a,l),ie(a,u),ie(t,d),ie(t,f),he&&he.m(f,null),ie(f,p),ge&&ge.m(f,null),ie(f,m),ee(h,f,null),ie(f,g),ie(f,$),ie($,b),ie(b,k),ie(k,S),ie(k,x),ie(x,C),ie(k,R),ie(b,j),ie(j,D),ie(j,E),ie(E,O),ie(j,B),ie(b,_),ie(_,P),ie(_,T),ie(T,N),ie($,M),$e&&$e.m($,null),ie($,A),ie($,L),ie(L,U),ie(U,I),ie(I,q),q.checked=e[0],ie(I,F),ie(U,J),ie(U,V),ie(V,z),z.checked=e[1],ie(V,H),ie($,Q),ve&&ve.m($,null),ie($,X),we&&we.m($,null),ie($,ne),ye&&ye.m($,null),ie($,le),be&&be.m($,null),de=!0,fe||(pe=[se(q,"change",e[35]),se(z,"change",e[36])],fe=!0)},p:function(e,n){(!de||4&n[0])&&ue(o,e[2]),e[21].isRemote?me?(me.p(e,n),2097152&n[0]&&G(me,1)):(me=$t(e),me.c(),G(me,1),me.m(t,r)):me&&(W(),K(me,1,1,()=>{me=null}),Y()),(!de||8&n[0])&&ue(u,e[3]),e[21].hasUpstream?he?(he.p(e,n),2097152&n[0]&&G(he,1)):(he=vt(e),he.c(),G(he,1),he.m(f,p)):he&&(W(),K(he,1,1,()=>{he=null}),Y()),e[21].hasDownstream?ge?(ge.p(e,n),2097152&n[0]&&G(ge,1)):(ge=bt(e),ge.c(),G(ge,1),ge.m(f,m)):ge&&(W(),K(ge,1,1,()=>{ge=null}),Y());const i={};4&n[0]&&(i.name=e[2]),32&n[0]&&(i.peerconnection=e[5]),h.$set(i),(!de||256&n[0])&&ue(C,e[8]),(!de||512&n[0])&&ue(O,e[9]),(!de||1024&n[0])&&ue(N,e[10]),e[22]?$e&&($e.d(1),$e=null):$e?$e.p(e,n):($e=kt(e),$e.c(),$e.m($,A)),1&n[0]&&(q.checked=e[0]),2&n[0]&&(z.checked=e[1]),e[0]?ve?ve.p(e,n):(ve=St(e),ve.c(),ve.m($,X)):ve&&(ve.d(1),ve=null),e[1]?we?we.p(e,n):(we=jt(e),we.c(),we.m($,ne)):we&&(we.d(1),we=null),e[19].length||e[21].isManual?ye?ye.p(e,n):(ye=Bt(e),ye.c(),ye.m($,le)):ye&&(ye.d(1),ye=null),e[21].isManual?be?be.p(e,n):(be=_t(e),be.c(),be.m($,null)):be&&(be.d(1),be=null)},i:function(e){de||(G(me),G(he),G(ge),G(h.$$.fragment,e),de=!0)},o:function(e){K(me),K(he),K(ge),K(h.$$.fragment,e),de=!1},d:function(e){e&&re(t),me&&me.d(),he&&he.d(),ge&&ge.d(),te(h),$e&&$e.d(),ve&&ve.d(),we&&we.d(),ye&&ye.d(),be&&be.d(),fe=!1,s(pe)}};return oe("SvelteRegisterBlock",{block:ke,id:Pt.name,type:"component",source:"",ctx:e}),ke}function Tt(e,t,n){let o,i,c,r,s;d(ke,"eventLogByName"),p(e,ke,e=>n(52,o=e)),d(xe,"offerStore"),p(e,xe,e=>n(53,i=e)),d(Ce,"answerStore"),p(e,Ce,e=>n(54,c=e)),d(be,"config"),p(e,be,e=>n(21,r=e)),d(Re,"candidatesStore"),p(e,Re,e=>n(55,s=e));let{$$slots:a={},$$scope:l}=t;fe("Participant",a,[]);let{isCaller:u=!1}=t,{isReceiver:f=!1}=t,{name:m="unnamed participant"}=t,{recipient:h=null}=t;const g=new Ue({from:m,to:h}),$=B(),v=Se(m);let w,y,b,k,S="",x="",C="",R="",j="",D="",E="",_=[],T="",N="unified-plan"===new URL(document.location).searchParams.get("semantic")?{sdpSemantics:"unified-plan"}:{sdpSemantics:"plan-b"};function M(){N.sdpSemantics;const e=new RTCPeerConnection(N);return e.ontrack=e=>{const{track:t,streams:n,transceiver:o}=e,i=n[0];w.$set({stream:i}),i.onaddtrack=()=>{v("ta","track added"),console.warn(m+"track added to stream",{track:t,stream:i})},"video"==t.kind&&(console.info(m+".ontrack",{track:t,streams:n,kind:t.kind,transceiver:o}),t.onmute=e=>{v("tm","track muted"),console.info(m+" track onmute",{event:e})},t.onunmute=e=>{v("tu","track unmuted"),console.info(m+" track onunmute",{event:e})},t.onended=e=>{v("te","track ended"),console.debug(m+" track onended",{event:e})})},e.onicecandidate=({candidate:e})=>{v("lc","create candidate"),n(51,_=[..._,e]),J(e)},e.onsignalingstatechange=t=>n(8,S=e.signalingState),e.onconnectionstatechange=t=>n(9,x=e.connectionState),e.oniceconnectionstatechange=t=>n(10,C=e.iceConnectionState),console.info("setup RTCPeerConnection for "+m,N,e),e}function A(e){b?(v("rt","replace track"),console.info("replace track",{sender:b}),b.replaceTrack(e.getTracks()[0])):(v("at","add track"),console.info("add track"),n(6,b=y.addTrack(e.getTracks()[0],e)))}async function L(){v("o","create offer");const e=await y.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!1});n(11,R=e.sdp)}async function I(){v("a","create answer");const e=await y.createAnswer();n(12,j=e.sdp)}function q(){const e=Fe(R);je({from:m,offer:e}),r.isRemote&&g.sendOffer(e)}function F(){const e=Fe(j);De({from:m,answer:e}),r.isRemote&&g.sendAnswer(e)}function J(e){m&&e&&(Ee({from:m,candidate:e}),r.isRemote&&g.sendCandidate(e))}async function V(e){v("l","setLocalDescription"),console.debug("localDescription ->",e);const t=e;Oe(m),y.setLocalDescription(t),H(),Oe(h)}function z(e){v("r","setRemoteDescription");const t=Fe(e);y.setRemoteDescription(t),H(),Oe(h)}function H(){r.isManual?(Z||[]).forEach(e=>{e&&(v("ac","addIceCandidate"),y.addIceCandidate(e))}):(console.debug(s[h]),(s[h]||[]).forEach(e=>{e&&(v("ac","addIceCandidate"),y.addIceCandidate(e))}))}function W(e){v("r","setRemoteDescription");const t=Je(e);y.setRemoteDescription(t),Oe(m)}O(()=>{n(5,y=M()),Re.subscribe(({[h]:e})=>{e&&v("rc")}),r.hasCaller&&L()});const Y=["isCaller","isReceiver","name","recipient"];Object.keys(t).forEach(e=>{~Y.indexOf(e)||"$$"===e.slice(0,2)||ht.warn(`<Participant> was created with unknown prop '${e}'`)});let G,K,Q,X,Z,ee;return e.$$set=e=>{"isCaller"in e&&n(0,u=e.isCaller),"isReceiver"in e&&n(1,f=e.isReceiver),"name"in e&&n(2,m=e.name),"recipient"in e&&n(3,h=e.recipient)},e.$capture_state=()=>({onMount:O,createEventDispatcher:B,tick:U,config:be,addEventFor:Se,eventLogByName:ke,offerStore:xe,answerStore:Ce,candidatesStore:Re,sendOfferFrom:je,sendAnswerFrom:De,sendCandidateFrom:Ee,clearCandidatesFrom:Oe,SignalingClient:Ue,justTheSdp:Ie,safeParse:qe,packOffer:Fe,packAnswer:Je,Upstream:et,Downstream:it,RemoteBar:at,Transceivers:mt,isCaller:u,isReceiver:f,name:m,recipient:h,signalingClient:g,dispatch:$,addEvent:v,downstreamComponent:w,peerConnection:y,sender:b,videoUpstream:k,signalingState:S,connectionState:x,iceConnectionState:C,localOfferSdp:R,localAnswerSdp:j,injectedOffer:D,injectedAnswer:E,rawCandidates:_,injectedCandidates:T,pcconfig:N,initPeerConnection:M,addStream:A,createOffer:L,createAnswer:I,sendOffer:q,sendAnswer:F,sendCandidate:J,applyLocal:V,applyRemoteOffer:z,applyCandidates:H,applyRemoteAnswer:W,events:G,$eventLogByName:o,receivedOffer:K,$offerStore:i,receivedAnswer:Q,$answerStore:c,readableCandidates:X,parsedInjectedCandidates:Z,$config:r,$candidatesStore:s,hideSignaling:ee}),e.$inject_state=e=>{"isCaller"in e&&n(0,u=e.isCaller),"isReceiver"in e&&n(1,f=e.isReceiver),"name"in e&&n(2,m=e.name),"recipient"in e&&n(3,h=e.recipient),"downstreamComponent"in e&&n(4,w=e.downstreamComponent),"peerConnection"in e&&n(5,y=e.peerConnection),"sender"in e&&n(6,b=e.sender),"videoUpstream"in e&&n(7,k=e.videoUpstream),"signalingState"in e&&n(8,S=e.signalingState),"connectionState"in e&&n(9,x=e.connectionState),"iceConnectionState"in e&&n(10,C=e.iceConnectionState),"localOfferSdp"in e&&n(11,R=e.localOfferSdp),"localAnswerSdp"in e&&n(12,j=e.localAnswerSdp),"injectedOffer"in e&&n(13,D=e.injectedOffer),"injectedAnswer"in e&&n(14,E=e.injectedAnswer),"rawCandidates"in e&&n(51,_=e.rawCandidates),"injectedCandidates"in e&&n(15,T=e.injectedCandidates),"pcconfig"in e&&(N=e.pcconfig),"events"in e&&n(16,G=e.events),"receivedOffer"in e&&n(17,K=e.receivedOffer),"receivedAnswer"in e&&n(18,Q=e.receivedAnswer),"readableCandidates"in e&&n(19,X=e.readableCandidates),"parsedInjectedCandidates"in e&&n(20,Z=e.parsedInjectedCandidates),"hideSignaling"in e&&n(22,ee=e.hideSignaling)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{4&e.$$.dirty[0]|2097152&e.$$.dirty[1]&&n(16,G=o[m]||[]),8&e.$$.dirty[0]|4194304&e.$$.dirty[1]&&n(17,K=Ie(i[h])),8&e.$$.dirty[0]|8388608&e.$$.dirty[1]&&n(18,Q=Ie(c[h])),1048576&e.$$.dirty[1]&&n(19,X=JSON.stringify(_)),32768&e.$$.dirty[0]&&n(20,Z=qe(T)),2097152&e.$$.dirty[0]&&n(22,ee=r.hideSignaling)},[u,f,m,h,w,y,b,k,S,x,C,R,j,D,E,T,G,K,Q,X,Z,r,ee,g,A,L,I,q,F,V,z,W,({detail:e})=>n(7,k=e),()=>A(k),function(e){P[e?"unshift":"push"](()=>{w=e,n(4,w)})},function(){u=this.checked,n(0,u)},function(){f=this.checked,n(1,f)},function(){R=this.value,n(11,R)},()=>V(Fe(R)),function(){Q=this.value,n(18,Q),n(54,c),n(3,h)},()=>W(Q),function(){E=this.value,n(14,E)},()=>W(E),function(){K=this.value,n(17,K),n(53,i),n(3,h)},()=>z(K),function(){D=this.value,n(13,D)},()=>z(D),function(){j=this.value,n(12,j)},()=>V(Je(j)),function(){X=this.value,n(19,X),n(51,_)},function(){T=this.value,n(15,T)}]}var Nt=class extends pe{constructor(e){super(e),ne(this,e,Tt,Pt,l,{isCaller:0,isReceiver:1,name:2,recipient:3},[-1,-1]),oe("SvelteRegisterComponent",{component:this,tagName:"Participant",options:e,id:Pt.name})}get isCaller(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isCaller(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get isReceiver(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isReceiver(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get name(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get recipient(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set recipient(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};function Mt(e,t,n){const o=e.slice();return o[1]=t[n].name,o[2]=t[n].event,o}function At(e){let t,n,o,c,r=e[1]+"",s=e[2]+"";const a={c:function(){t=v("li"),n=w(r),o=w(": "),c=w(s),i(t,"src/EventLog.svelte",6,8,146)},m:function(e,i){ce(e,t,i),ie(t,n),ie(t,o),ie(t,c)},p:function(e,t){1&t&&r!==(r=e[1]+"")&&ue(n,r),1&t&&s!==(s=e[2]+"")&&ue(c,s)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:a,id:At.name,type:"each",source:"(6:4) {#each $eventLog.filter(e => e.event) as { name, event }}",ctx:e}),a}function Lt(e){let t,n,c,r,s,a=e[0].filter(Ut);de(a);let l=[];for(let t=0;t<a.length;t+=1)l[t]=At(Mt(e,a,t));const u={c:function(){t=v("ol");for(let e=0;e<l.length;e+=1)l[e].c();n=y(),c=v("em"),r=w("please open\n    "),s=v("code"),s.textContent="chrome://webrtc-internals",i(t,"src/EventLog.svelte",4,0,71),i(s,"src/EventLog.svelte",12,4,215),i(c,"src/EventLog.svelte",10,0,190)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ce(e,t,o);for(let e=0;e<l.length;e+=1)l[e].m(t,null);ce(e,n,o),ce(e,c,o),ie(c,r),ie(c,s)},p:function(e,[n]){if(1&n){let o;for(a=e[0].filter(Ut),de(a),o=0;o<a.length;o+=1){const i=Mt(e,a,o);l[o]?l[o].p(i,n):(l[o]=At(i),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}},i:o,o:o,d:function(e){e&&re(t),$(l,e),e&&re(n),e&&re(c)}};return oe("SvelteRegisterBlock",{block:u,id:Lt.name,type:"component",source:"",ctx:e}),u}const Ut=e=>e.event;function It(e,t,n){let o;d($e,"eventLog"),p(e,$e,e=>n(0,o=e));let{$$slots:i={},$$scope:c}=t;fe("EventLog",i,[]);const r=[];return Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<EventLog> was created with unknown prop '${e}'`)}),e.$capture_state=()=>({config:be,eventLog:$e,$eventLog:o}),[o]}var qt=class extends pe{constructor(e){super(e),ne(this,e,It,Lt,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"EventLog",options:e,id:Lt.name})}};function Ft(e){let t,n;t=new Nt({props:{name:"alice",isCaller:"true",recipient:"bob"},$$inline:!0});const o={c:function(){Z(t.$$.fragment)},m:function(e,o){ee(t,e,o),n=!0},i:function(e){n||(G(t.$$.fragment,e),n=!0)},o:function(e){K(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:o,id:Ft.name,type:"if",source:"(32:8) {#if $config.hasCaller}",ctx:e}),o}function Jt(e){let t,n;t=new Nt({props:{name:"bob",isReceiver:"true",recipient:"alice"},$$inline:!0});const o={c:function(){Z(t.$$.fragment)},m:function(e,o){ee(t,e,o),n=!0},i:function(e){n||(G(t.$$.fragment,e),n=!0)},o:function(e){K(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:o,id:Jt.name,type:"if",source:"(36:8) {#if $config.hasReceiver}",ctx:e}),o}function Vt(e){let t,n,o;n=new qt({$$inline:!0});const c={c:function(){t=v("div"),Z(n.$$.fragment),ae(t,"class","svelte-zfyrsw"),i(t,"src/Demo.svelte",40,12,928)},m:function(e,i){ce(e,t,i),ee(n,t,null),o=!0},i:function(e){o||(G(n.$$.fragment,e),o=!0)},o:function(e){K(n.$$.fragment,e),o=!1},d:function(e){e&&re(t),te(n)}};return oe("SvelteRegisterBlock",{block:c,id:Vt.name,type:"if",source:"(40:8) {#if !$config.hideSignaling}",ctx:e}),c}function zt(e){let t,n,o,c,r,s,a,l;o=new Le({$$inline:!0});let u=e[0].hasCaller&&Ft(e),d=e[0].hasReceiver&&Jt(e),f=!e[0].hideSignaling&&Vt(e);const p={c:function(){t=v("div"),n=v("aside"),Z(o.$$.fragment),c=y(),r=v("section"),u&&u.c(),s=y(),d&&d.c(),a=y(),f&&f.c(),i(n,"src/Demo.svelte",25,4,579),ae(r,"class","svelte-zfyrsw"),i(r,"src/Demo.svelte",29,4,624),ae(t,"class","svelte-zfyrsw"),i(t,"src/Demo.svelte",24,0,569)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,i){ce(e,t,i),ie(t,n),ee(o,n,null),ie(t,c),ie(t,r),u&&u.m(r,null),ie(r,s),d&&d.m(r,null),ie(r,a),f&&f.m(r,null),l=!0},p:function(e,[t]){e[0].hasCaller?u?1&t&&G(u,1):(u=Ft(e),u.c(),G(u,1),u.m(r,s)):u&&(W(),K(u,1,1,()=>{u=null}),Y()),e[0].hasReceiver?d?1&t&&G(d,1):(d=Jt(e),d.c(),G(d,1),d.m(r,a)):d&&(W(),K(d,1,1,()=>{d=null}),Y()),e[0].hideSignaling?f&&(W(),K(f,1,1,()=>{f=null}),Y()):f?1&t&&G(f,1):(f=Vt(e),f.c(),G(f,1),f.m(r,null))},i:function(e){l||(G(o.$$.fragment,e),G(u),G(d),G(f),l=!0)},o:function(e){K(o.$$.fragment,e),K(u),K(d),K(f),l=!1},d:function(e){e&&re(t),te(o),u&&u.d(),d&&d.d(),f&&f.d()}};return oe("SvelteRegisterBlock",{block:p,id:zt.name,type:"component",source:"",ctx:e}),p}function Ht(e,t,n){let o;d(be,"config"),p(e,be,e=>n(0,o=e));let{$$slots:i={},$$scope:c}=t;fe("Demo",i,[]);const r=[];return Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Demo> was created with unknown prop '${e}'`)}),e.$capture_state=()=>({config:be,offerStore:xe,answerStore:Ce,candidatesStore:Re,Config:Le,Participant:Nt,EventLog:qt,$config:o}),[o]}var Wt=class extends pe{constructor(e){super(e),ne(this,e,Ht,zt,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"Demo",options:e,id:zt.name})}};function Yt(e){let t,n;t=new Wt({$$inline:!0});const i={c:function(){Z(t.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ee(t,e,o),n=!0},p:o,i:function(e){n||(G(t.$$.fragment,e),n=!0)},o:function(e){K(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:i,id:Yt.name,type:"component",source:"",ctx:e}),i}function Gt(e,t,n){let{$$slots:o={},$$scope:i}=t;fe("App",o,[]);const c=[];return Object.keys(t).forEach(e=>{~c.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<App> was created with unknown prop '${e}'`)}),e.$capture_state=()=>({Demo:Wt}),[]}const Kt=new class extends pe{constructor(e){super(e),ne(this,e,Gt,Yt,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"App",options:e,id:Yt.name})}}({target:document.body,props:{}});window.app=Kt;t.default=Kt}]);