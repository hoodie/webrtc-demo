!function(e){var t={};function n(o){if(t[o])return t[o].exports;var c=t[o]={i:o,l:!1,exports:{}};return e[o].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(o,c,function(t){return e[t]}.bind(null,c));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function o(){}n.r(t);function c(e,t,n,o,c){e.__svelte_meta={loc:{file:t,line:n,column:o,char:c}}}function i(e){return e()}function r(){return Object.create(null)}function s(e){e.forEach(i)}function a(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function u(e){return 0===Object.keys(e).length}function d(e,t){if(null!=e&&"function"!=typeof e.subscribe)throw new Error(`'${t}' is not a store with a 'subscribe' method`)}function f(e,...t){if(null==e)return o;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function p(e,t,n){e.$$.on_destroy.push(f(t,n))}new Set;function m(e,t){e.appendChild(t)}function h(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode.removeChild(e)}function $(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function w(e){return document.createTextNode(e)}function b(){return w(" ")}function y(){return w("")}function k(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function S(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e,t){e.value=null==t?"":t}function C(e,t,n){e.classList[n?"add":"remove"](t)}function R(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}new Set;let E;function j(e){E=e}function D(){if(!E)throw new Error("Function called outside component initialization");return E}function O(e){D().$$.on_mount.push(e)}function B(){const e=D();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const c=R(t,n);o.slice().forEach(t=>{t.call(e,c)})}}}const _=[],P=[],T=[],N=[],M=Promise.resolve();let L=!1;function U(){L||(L=!0,M.then(J))}function A(){return U(),M}function I(e){T.push(e)}let q=!1;const F=new Set;function J(){if(!q){q=!0;do{for(let e=0;e<_.length;e+=1){const t=_[e];j(t),z(t.$$)}for(j(null),_.length=0;P.length;)P.pop()();for(let e=0;e<T.length;e+=1){const t=T[e];F.has(t)||(F.add(t),t())}T.length=0}while(_.length);for(;N.length;)N.pop()();L=!1,q=!1,F.clear()}}function z(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(I)}}const V=new Set;let W;function H(){W={r:0,c:[],p:W}}function X(){W.r||s(W.c),W=W.p}function Y(e,t){e&&e.i&&(V.delete(e),e.i(t))}function G(e,t,n,o){if(e&&e.o){if(V.has(e))return;V.add(e),W.c.push(()=>{V.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}const K="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let Q;function Z(e){e&&e.c()}function ee(e,t,n){const{fragment:o,on_mount:c,on_destroy:r,after_update:l}=e.$$;o&&o.m(t,n),I(()=>{const t=c.map(i).filter(a);r?r.push(...t):s(t),e.$$.on_mount=[]}),l.forEach(I)}function te(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ne(e,t,n,c,i,a,l=[-1]){const u=E;j(e);const d=t.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:o,not_equal:i,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:l,skip_bound:!1};let p=!1;if(f.ctx=n?n(e,d,(t,n,...o)=>{const c=o.length?o[0]:n;return f.ctx&&i(f.ctx[t],f.ctx[t]=c)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](c),p&&function(e,t){-1===e.$$.dirty[0]&&(_.push(e),U(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n}):[],f.update(),p=!0,s(f.before_update),f.fragment=!!c&&c(f.ctx),t.target){if(t.hydrate){const e=(m=t.target,Array.from(m.childNodes));f.fragment&&f.fragment.l(e),e.forEach(g)}else f.fragment&&f.fragment.c();t.intro&&Y(e.$$.fragment),ee(e,t.target,t.anchor),J()}var m;j(u)}"function"==typeof HTMLElement&&(Q=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}$destroy(){te(this,1),this.$destroy=o}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!u(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});function oe(e,t){document.dispatchEvent(R(e,Object.assign({version:"3.29.7"},t)))}function ce(e,t){oe("SvelteDOMInsert",{target:e,node:t}),m(e,t)}function ie(e,t,n){oe("SvelteDOMInsert",{target:e,node:t,anchor:n}),h(e,t,n)}function re(e){oe("SvelteDOMRemove",{node:e}),g(e)}function se(e,t,n,o,c,i){const r=!0===o?["capture"]:o?Array.from(Object.keys(o)):[];c&&r.push("preventDefault"),i&&r.push("stopPropagation"),oe("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:r});const s=k(e,t,n,o);return()=>{oe("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:r}),s()}}function ae(e,t,n){S(e,t,n),null==n?oe("SvelteDOMRemoveAttribute",{node:e,attribute:t}):oe("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function le(e,t,n){e[t]=n,oe("SvelteDOMSetProperty",{node:e,property:t,value:n})}function ue(e,t){t=""+t,e.wholeText!==t&&(oe("SvelteDOMSetData",{node:e,data:t}),e.data=t)}function de(e){if(!("string"==typeof e||e&&"object"==typeof e&&"length"in e)){let t="{#each} only iterates over array-like objects.";throw"function"==typeof Symbol&&e&&Symbol.iterator in e&&(t+=" You can use a spread to convert this iterable into an array."),new Error(t)}}function fe(e,t,n){for(const o of Object.keys(t))~n.indexOf(o)||console.warn(`<${e}> received an unexpected slot "${o}".`)}class pe extends class{$destroy(){te(this,1),this.$destroy=o}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!u(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){if(!e||!e.target&&!e.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}const me=[];function he(e,t=o){let n;const c=[];function i(t){if(l(e,t)&&(e=t,n)){const t=!me.length;for(let t=0;t<c.length;t+=1){const n=c[t];n[1](),me.push(n,e)}if(t){for(let e=0;e<me.length;e+=2)me[e][0](me[e+1]);me.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(r,s=o){const a=[r,s];return c.push(a),1===c.length&&(n=t(i)||o),r(e),()=>{const e=c.indexOf(a);-1!==e&&c.splice(e,1),0===c.length&&(n(),n=null)}}}}function ge(e,t,n){const c=!Array.isArray(e),i=c?[e]:e,r=t.length<2;return{subscribe:he(n,e=>{let n=!1;const l=[];let u=0,d=o;const p=()=>{if(u)return;d();const n=t(c?l[0]:l,e);r?e(n):d=a(n)?n:o},m=i.map((e,t)=>f(e,e=>{l[t]=e,u&=~(1<<t),n&&p()},()=>{u|=1<<t}));return n=!0,p(),function(){s(m),d()}}).subscribe}}const $e=he([]),ve=e=>{try{return!0===JSON.parse(e)}catch{return!1}},we=he((()=>{const e=Object.fromEntries(new URLSearchParams(location.search).entries()),t={role:e.role||"both",stream:e.stream||"both",manual:ve(e.manual),remote:ve(e.remote),hideSignaling:ve(e.hideSignaling)};return Object.entries(t).map(([e,t])=>({key:e,value:t}))})()),be=ge(we,e=>`${window.location.protocol}//${window.location.host}/?${(e=>{const t=new URLSearchParams;for(let[n,o]of e)t.set(n,o);return t.toString()})(e.map(({key:e,value:t})=>[e,t]))}`),ye=ge(we,e=>{const t=Object.fromEntries(e.map(({key:e,value:t})=>[e,t]));let{role:n,stream:o,manual:c,remote:i,hideSignaling:r}=t;const s="recv"!==n,a="call"!==n&&"send"!==n||!1,l="down"!==o||!1,u="up"!==o||!1,d=c&&"no"!==c||!1,f=i&&"no"!==i||!1,p=s?"bob":"alice",m=a?"bob":"alice";return{...t,role:n,stream:o,manual:c,remote:i,hasCaller:s,hasReceiver:a,hasUpstream:l,hasDownstream:u,isManual:d,isRemote:f,hideSignaling:r,to:p,from:m}}),ke=he({});const Se=e=>(t,n)=>function(e,t,n){const o={name:e,short:t,event:n};$e.update(e=>[...e,o]),ke.update(n=>({...n,[e]:[...n[e]||[],t]}))}(e,t,n),xe=he({}),Ce=he({}),Re=he({});function Ee({from:e,offer:t}){xe.update(n=>({...n,[e]:t}))}function je({from:e,answer:t}){Ce.update(n=>({...n,[e]:t}))}function De({from:e,candidate:t}){Re.update(n=>{const o=n[e]||[];return{...n,[e]:[...o,t]}})}function Oe({from:e}){Re.update(t=>({...t,[e]:[]}))}const Be="src/Config.svelte";function _e(e,t,n){const o=e.slice();return o[6]=t[n].key,o[7]=t[n].value,o[8]=t,o[9]=n,o}function Pe(e){let t,n,o;function i(){e[3].call(t,e[8],e[9])}const r={c:function(){t=v("input"),ae(t,"type","text"),c(t,Be,33,12,774)},m:function(c,r){ie(c,t,r),x(t,e[7]),n||(o=se(t,"input",i),n=!0)},p:function(n,o){e=n,2&o&&t.value!==e[7]&&x(t,e[7])},d:function(e){e&&re(t),n=!1,o()}};return oe("SvelteRegisterBlock",{block:r,id:Pe.name,type:"else",source:"(33:12) {:else}",ctx:e}),r}function Te(e){let t,n,o;function i(){e[2].call(t,e[8],e[9])}const r={c:function(){t=v("input"),ae(t,"type","checkbox"),c(t,Be,31,12,696)},m:function(c,r){ie(c,t,r),t.checked=e[7],n||(o=se(t,"change",i),n=!0)},p:function(n,o){e=n,2&o&&(t.checked=e[7])},d:function(e){e&&re(t),n=!1,o()}};return oe("SvelteRegisterBlock",{block:r,id:Te.name,type:"if",source:"(31:12) {#if typeof value === 'boolean'}",ctx:e}),r}function Ne(e){let t,n,o,i,r,s,a=e[6]+"";function l(e,t){return"boolean"==typeof e[7]?Te:Pe}let u=l(e),d=u(e);const f={c:function(){t=v("tr"),n=v("td"),o=w(a),i=b(),r=v("td"),d.c(),s=b(),c(n,Be,28,12,607),c(r,Be,29,12,634),c(t,Be,27,8,590)},m:function(e,c){ie(e,t,c),ce(t,n),ce(n,o),ce(t,i),ce(t,r),d.m(r,null),ce(t,s)},p:function(e,t){2&t&&a!==(a=e[6]+"")&&ue(o,a),u===(u=l(e))&&d?d.p(e,t):(d.d(1),d=u(e),d&&(d.c(),d.m(r,null)))},d:function(e){e&&re(t),d.d()}};return oe("SvelteRegisterBlock",{block:f,id:Ne.name,type:"each",source:"(27:4) {#each $query as {key, value}",ctx:e}),f}function Me(e){let t,n,i,r,s,a,l,u,d,f=e[1];de(f);let p=[];for(let t=0;t<f.length;t+=1)p[t]=Ne(_e(e,f,t));const m={c:function(){t=v("details"),n=v("summary"),n.textContent="config",i=b(),r=v("code"),s=v("pre"),a=v("a"),l=w(e[0]),u=b(),d=v("table");for(let e=0;e<p.length;e+=1)p[e].c();c(n,Be,20,4,428),ae(a,"href",e[0]),c(a,Be,22,4,474),c(s,Be,21,10,464),ae(r,"class","svelte-12ii7jf"),c(r,Be,21,4,458),c(d,Be,25,4,536),c(t,Be,19,0,414)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ie(e,t,o),ce(t,n),ce(t,i),ce(t,r),ce(r,s),ce(s,a),ce(a,l),ce(t,u),ce(t,d);for(let e=0;e<p.length;e+=1)p[e].m(d,null)},p:function(e,[t]){if(1&t&&ue(l,e[0]),1&t&&ae(a,"href",e[0]),2&t){let n;for(f=e[1],de(f),n=0;n<f.length;n+=1){const o=_e(e,f,n);p[n]?p[n].p(o,t):(p[n]=Ne(o),p[n].c(),p[n].m(d,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=f.length}},i:o,o:o,d:function(e){e&&re(t),$(p,e)}};return oe("SvelteRegisterBlock",{block:m,id:Me.name,type:"component",source:"",ctx:e}),m}function Le(e,t,n){let o,c;d(be,"configUrl"),p(e,be,e=>n(0,o=e)),d(we,"query"),p(e,we,e=>n(1,c=e));let{$$slots:i={},$$scope:r}=t;fe("Config",i,[]);const s=e=>{try{return"boolean"===JSON.parse(e)}catch{return!1}},a=({target:{value:e,name:t}})=>{ye.update(n=>({...n,[t]:"on"===e}))},l=[];return Object.keys(t).forEach(e=>{~l.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Config> was created with unknown prop '${e}'`)}),e.$capture_state=()=>({query:we,config:ye,configUrl:be,eventLog:$e,boolable:s,checkConfig:a,$configUrl:o,$query:c}),[o,c,function(e,t){e[t].value=this.checked,we.set(c)},function(e,t){e[t].value=this.value,we.set(c)}]}var Ue=class extends pe{constructor(e){super(e),ne(this,e,Le,Me,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"Config",options:e,id:Me.name})}};class Ae{constructor({to:e,from:t}){this.to=e,this.from=t}connect({url:e}){this.url=e;const t=new WebSocket(e);t.onopen=()=>{this.socket=t,this.socket.onmessage=this.received.bind(this)}}received({data:e}){const t=JSON.parse(e),{[this.to]:n,type:o}=t;console.debug("its for me!",n);const c=this.to;switch(o){case"offer":Ee({from:c,offer:n});break;case"answer":je({from:c,answer:n});break;case"candidate":De({from:c,candidate:new RTCIceCandidate(n)})}}sendOffer(e){if(e){const t={[this.from]:e,type:"offer"};this.send(t)}}sendAnswer(e){if(e){const t={[this.from]:e,type:"answer"};this.send(t)}}sendCandidate(e){if(e){const t={[this.from]:e,type:"candidate"};this.send(t)}}send(e){if(this.socket){const t=JSON.stringify(e);this.socket.send(t)}}toString(){return`[Signaling Server calling ${this.from} → ${this.to}]`}}const Ie=e=>"string"==typeof e?JSON.parse(e).sdp:"object"==typeof e?e.sdp:void 0,qe=e=>{try{return JSON.parse(e)}catch(t){return""!==e&&console.warn({parseError:t}),[]}},Fe=e=>({type:"offer",sdp:e}),Je=e=>({type:"answer",sdp:e});function ze(e){let t,n,i,r,s,a,l,u,d=JSON.stringify(e[2],null,4)+"";const f={c:function(){t=v("details"),n=v("summary"),i=w(e[1]),r=b(),s=v("pre"),a=v("code"),l=w(d),c(n,"src/Details.svelte",13,4,200),ae(a,"class","svelte-ubxtzq"),c(a,"src/Details.svelte",15,8,247),c(s,"src/Details.svelte",14,4,233),t.open=u=Boolean(e[2])&&e[0],c(t,"src/Details.svelte",12,0,157)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ie(e,t,o),ce(t,n),ce(n,i),ce(t,r),ce(t,s),ce(s,a),ce(a,l)},p:function(e,[n]){2&n&&ue(i,e[1]),4&n&&d!==(d=JSON.stringify(e[2],null,4)+"")&&ue(l,d),5&n&&u!==(u=Boolean(e[2])&&e[0])&&le(t,"open",u)},i:o,o:o,d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:f,id:ze.name,type:"component",source:"",ctx:e}),f}function Ve(e,t,n){let{$$slots:o={},$$scope:c}=t;fe("Details",o,[]);let{open:i=!0}=t,{summary:r="???"}=t,{data:s}=t;const a=["open","summary","data"];return Object.keys(t).forEach(e=>{~a.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Details> was created with unknown prop '${e}'`)}),e.$$set=e=>{"open"in e&&n(0,i=e.open),"summary"in e&&n(1,r=e.summary),"data"in e&&n(2,s=e.data)},e.$capture_state=()=>({open:i,summary:r,data:s}),e.$inject_state=e=>{"open"in e&&n(0,i=e.open),"summary"in e&&n(1,r=e.summary),"data"in e&&n(2,s=e.data)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[i,r,s]}var We=class extends pe{constructor(e){super(e),ne(this,e,Ve,ze,l,{open:0,summary:1,data:2}),oe("SvelteRegisterComponent",{component:this,tagName:"Details",options:e,id:ze.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[2]||"data"in n||console.warn("<Details> was created without expected prop 'data'")}get open(){throw new Error("<Details>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set open(e){throw new Error("<Details>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get summary(){throw new Error("<Details>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set summary(e){throw new Error("<Details>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get data(){throw new Error("<Details>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Details>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};const{Object:He}=K;function Xe(e,t,n){const o=e.slice();return o[23]=t[n],o}function Ye(e,t,n){const o=e.slice();return o[26]=t[n],o[28]=n,o}function Ge(e){let t,n,o,i,r,s=(e[26].label||"camera "+e[28])+"";function a(){return e[14](e[26])}const l={c:function(){t=v("button"),n=w(s),o=b(),ae(t,"class"," svelte-2jsuhx"),c(t,"src/Upstream.svelte",115,4,3396)},m:function(e,c){ie(e,t,c),ce(t,n),ce(t,o),i||(r=se(t,"click",a,!1,!1,!1),i=!0)},p:function(t,o){e=t,4&o&&s!==(s=(e[26].label||"camera "+e[28])+"")&&ue(n,s)},d:function(e){e&&re(t),i=!1,r()}};return oe("SvelteRegisterBlock",{block:l,id:Ge.name,type:"each",source:"(115:4) {#each videoDevices as device, index}",ctx:e}),l}function Ke(e){let t;const n={c:function(){t=w("✔️")},m:function(e,n){ie(e,t,n)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:n,id:Ke.name,type:"if",source:"(129:8) {#if upstreamStream === stream}",ctx:e}),n}function Qe(e){let t,n,o,i,r,a,l,u,d,f,p,m,h,g,$,y=e[23].name+"",k=e[1]===e[23]&&Ke(e);function S(){return e[15](e[23])}function x(){return e[16](e[23])}function C(){return e[17](e[23])}const R={c:function(){t=v("tr"),n=v("td"),k&&k.c(),o=b(),i=v("td"),r=v("button"),a=w(y),l=b(),u=v("td"),d=v("button"),d.textContent="stop",f=b(),p=v("td"),m=v("button"),m.textContent="X",h=b(),c(n,"src/Upstream.svelte",128,4,3610),ae(r,"class","svelte-2jsuhx"),c(r,"src/Upstream.svelte",129,9,3667),c(i,"src/Upstream.svelte",129,4,3662),ae(d,"class","svelte-2jsuhx"),c(d,"src/Upstream.svelte",130,9,3753),c(u,"src/Upstream.svelte",130,4,3748),ae(m,"class","svelte-2jsuhx"),c(m,"src/Upstream.svelte",131,9,3826),c(p,"src/Upstream.svelte",131,4,3821),c(t,"src/Upstream.svelte",127,0,3601)},m:function(e,c){ie(e,t,c),ce(t,n),k&&k.m(n,null),ce(t,o),ce(t,i),ce(i,r),ce(r,a),ce(t,l),ce(t,u),ce(u,d),ce(t,f),ce(t,p),ce(p,m),ce(t,h),g||($=[se(r,"click",S,!1,!1,!1),se(d,"click",x,!1,!1,!1),se(m,"click",C,!1,!1,!1)],g=!0)},p:function(t,o){(e=t)[1]===e[23]?k||(k=Ke(e),k.c(),k.m(n,null)):k&&(k.d(1),k=null),8&o&&y!==(y=e[23].name+"")&&ue(a,y)},d:function(e){e&&re(t),k&&k.d(),g=!1,s($)}};return oe("SvelteRegisterBlock",{block:R,id:Qe.name,type:"each",source:"(127:0) {#each videoStreams as stream}",ctx:e}),R}function Ze(e){let t,n,o,i,r,s,a,l,u,d,f,p,m,h=e[4].readyState+"";d=new We({props:{summary:"settings",data:e[4].getSettings()},$$inline:!0}),p=new We({props:{summary:"constraints",data:e[4].getConstraints()},$$inline:!0});const g={c:function(){t=v("details"),n=v("summary"),o=w(e[5]),i=b(),r=v("dl"),s=v("dt"),s.textContent="readState",a=v("dd"),l=w(h),u=b(),Z(d.$$.fragment),f=b(),Z(p.$$.fragment),c(n,"src/Upstream.svelte",138,4,3943),c(s,"src/Upstream.svelte",140,8,3988),c(a,"src/Upstream.svelte",140,26,4006),c(r,"src/Upstream.svelte",140,4,3984),c(t,"src/Upstream.svelte",137,0,3929)},m:function(e,c){ie(e,t,c),ce(t,n),ce(n,o),ce(t,i),ce(t,r),ce(r,s),ce(r,a),ce(a,l),ce(t,u),ee(d,t,null),ce(t,f),ee(p,t,null),m=!0},p:function(e,t){(!m||32&t)&&ue(o,e[5]),(!m||16&t)&&h!==(h=e[4].readyState+"")&&ue(l,h);const n={};16&t&&(n.data=e[4].getSettings()),d.$set(n);const c={};16&t&&(c.data=e[4].getConstraints()),p.$set(c)},i:function(e){m||(Y(d.$$.fragment,e),Y(p.$$.fragment,e),m=!0)},o:function(e){G(d.$$.fragment,e),G(p.$$.fragment,e),m=!1},d:function(e){e&&re(t),te(d),te(p)}};return oe("SvelteRegisterBlock",{block:g,id:Ze.name,type:"if",source:"(137:0) {#if mainTrack}",ctx:e}),g}function et(e){let t,n,o,i,r,a,l,u,d,f,p,m,h,g,w,k,S,x,C,R=e[2];de(R);let E=[];for(let t=0;t<R.length;t+=1)E[t]=Ge(Ye(e,R,t));let j=e[3];de(j);let D=[];for(let t=0;t<j.length;t+=1)D[t]=Qe(Xe(e,j,t));let O=e[4]&&Ze(e);const B={c:function(){t=v("h5"),t.textContent="upstream",n=b(),o=v("video"),i=v("track"),r=b(),a=v("nav"),l=v("button"),l.textContent="default",u=b(),d=v("button"),d.textContent="noise",f=b(),p=v("br"),m=b();for(let e=0;e<E.length;e+=1)E[e].c();h=b(),g=v("table");for(let e=0;e<D.length;e+=1)D[e].c();w=b(),O&&O.c(),k=y(),c(t,"src/Upstream.svelte",103,0,3098),ae(i,"kind","captions"),c(i,"src/Upstream.svelte",106,4,3185),ae(o,"id","upstream"),o.autoplay="true",c(o,"src/Upstream.svelte",105,0,3117),ae(l,"class","svelte-2jsuhx"),c(l,"src/Upstream.svelte",111,4,3232),ae(d,"class","svelte-2jsuhx"),c(d,"src/Upstream.svelte",112,4,3290),c(p,"src/Upstream.svelte",113,4,3345),ae(a,"class","svelte-2jsuhx"),c(a,"src/Upstream.svelte",109,0,3221),c(g,"src/Upstream.svelte",125,0,3562)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(c,s){ie(c,t,s),ie(c,n,s),ie(c,o,s),ce(o,i),e[11](o),ie(c,r,s),ie(c,a,s),ce(a,l),ce(a,u),ce(a,d),ce(a,f),ce(a,p),ce(a,m);for(let e=0;e<E.length;e+=1)E[e].m(a,null);ie(c,h,s),ie(c,g,s);for(let e=0;e<D.length;e+=1)D[e].m(g,null);ie(c,w,s),O&&O.m(c,s),ie(c,k,s),S=!0,x||(C=[se(l,"click",e[12],!1,!1,!1),se(d,"click",e[13],!1,!1,!1)],x=!0)},p:function(e,[t]){if(132&t){let n;for(R=e[2],de(R),n=0;n<R.length;n+=1){const o=Ye(e,R,n);E[n]?E[n].p(o,t):(E[n]=Ge(o),E[n].c(),E[n].m(a,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=R.length}if(1802&t){let n;for(j=e[3],de(j),n=0;n<j.length;n+=1){const o=Xe(e,j,n);D[n]?D[n].p(o,t):(D[n]=Qe(o),D[n].c(),D[n].m(g,null))}for(;n<D.length;n+=1)D[n].d(1);D.length=j.length}e[4]?O?(O.p(e,t),16&t&&Y(O,1)):(O=Ze(e),O.c(),Y(O,1),O.m(k.parentNode,k)):O&&(H(),G(O,1,1,()=>{O=null}),X())},i:function(e){S||(Y(O),S=!0)},o:function(e){G(O),S=!1},d:function(c){c&&re(t),c&&re(n),c&&re(o),e[11](null),c&&re(r),c&&re(a),$(E,c),c&&re(h),c&&re(g),$(D,c),c&&re(w),O&&O.d(c),c&&re(k),x=!1,s(C)}};return oe("SvelteRegisterBlock",{block:B,id:et.name,type:"component",source:"",ctx:e}),B}async function tt(e){const t={video:!e||{deviceId:e}};return await navigator.mediaDevices.getUserMedia(t)}function nt(){let e=Object.assign(document.createElement("canvas"),{width:400,height:300}),t=e.getContext("2d");t.fillRect(0,0,e.width,e.height);let n=t.getImageData(0,0,e.width,e.height);return requestAnimationFrame((function e(){for(var o=0;o<n.data.length;o++)n.data[o++]=n.data[o++]=n.data[o++]=255*Math.random();t.putImageData(n,0,0),requestAnimationFrame(e)})),e.captureStream(60)}function ot(e,t,n){let{$$slots:o={},$$scope:c}=t;fe("Upstream",o,[]);const i=B();let r,s,a=[],l=[];async function u(){const e=await nt();e.name="noise feed",f(e),n(3,l=[...l,e])}async function d(e){const t=await tt(e);t.name=e?g(e):"default webcam",f(t),n(3,l=[...l,t])}function f(e){n(1,s=e),n(0,r.srcObject=e,r),i("stream",e)}function p(e){i("stream",e)}function m(e){e.getTracks().forEach(e=>e.stop()),i("stop",e)}function h(e){m(e),n(3,l=[...l.filter(t=>t!=e)]),s===e&&n(1,s=void 0)}function g(e){const t=e&&a.find(({deviceId:t})=>t===e);return t&&t.label}async function $(){const e=await navigator.mediaDevices.enumerateDevices();n(2,a=e.filter(({kind:e})=>"videoinput"===e))}O(()=>{$(),navigator.mediaDevices.addEventListener("devicechange",e=>{navigator.mediaDevices.enumerateDevices().then(e=>$())})});const v=[];He.keys(t).forEach(e=>{~v.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Upstream> was created with unknown prop '${e}'`)});let w,b,y;return e.$capture_state=()=>({Details:We,onMount:O,createEventDispatcher:B,dispatch:i,upstreamVideo:r,upstreamStream:s,videoDevices:a,videoStreams:l,getWebcamFeed:tt,makeNoise:nt,getNoise:u,getWebcam:d,makeMainStream:f,useStream:p,stopStream:m,deleteStream:h,getDeviceLabel:g,getVideoDevices:$,mainTrack:w,upstreamName:b,hasStream:y}),e.$inject_state=e=>{"upstreamVideo"in e&&n(0,r=e.upstreamVideo),"upstreamStream"in e&&n(1,s=e.upstreamStream),"videoDevices"in e&&n(2,a=e.videoDevices),"videoStreams"in e&&n(3,l=e.videoStreams),"mainTrack"in e&&n(4,w=e.mainTrack),"upstreamName"in e&&n(5,b=e.upstreamName),"hasStream"in e&&(y=e.hasStream)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{2&e.$$.dirty&&n(4,w=s&&s.getTracks()[0]),2&e.$$.dirty&&n(5,b=s&&s.constructor.name),2&e.$$.dirty&&(y=Boolean(s))},[r,s,a,l,w,b,u,d,f,m,h,function(e){P[e?"unshift":"push"](()=>{r=e,n(0,r)})},()=>d(),()=>u(),e=>d(e.deviceId),e=>f(e),e=>m(e),e=>h(e)]}var ct=class extends pe{constructor(e){super(e),ne(this,e,ot,et,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"Upstream",options:e,id:et.name})}};function it(e){let t,n,o,c;t=new We({props:{summary:"settings",data:e[1].getSettings()},$$inline:!0}),o=new We({props:{summary:"constraints",data:e[1].getConstraints()},$$inline:!0});const i={c:function(){Z(t.$$.fragment),n=b(),Z(o.$$.fragment)},m:function(e,i){ee(t,e,i),ie(e,n,i),ee(o,e,i),c=!0},p:function(e,n){const c={};2&n&&(c.data=e[1].getSettings()),t.$set(c);const i={};2&n&&(i.data=e[1].getConstraints()),o.$set(i)},i:function(e){c||(Y(t.$$.fragment,e),Y(o.$$.fragment,e),c=!0)},o:function(e){G(t.$$.fragment,e),G(o.$$.fragment,e),c=!1},d:function(e){te(t,e),e&&re(n),te(o,e)}};return oe("SvelteRegisterBlock",{block:i,id:it.name,type:"if",source:"(23:0) {#if mainTrack}",ctx:e}),i}function rt(e){let t,n,o,i,r,s,a,l=e[1]&&it(e);const u={c:function(){t=v("h5"),t.textContent="downstream",n=b(),o=v("video"),i=v("track"),r=b(),l&&l.c(),s=y(),c(t,"src/Downstream.svelte",16,0,244),ae(i,"kind","captions"),c(i,"src/Downstream.svelte",19,4,314),o.autoplay="true",c(o,"src/Downstream.svelte",18,0,265)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(c,u){ie(c,t,u),ie(c,n,u),ie(c,o,u),ce(o,i),e[3](o),ie(c,r,u),l&&l.m(c,u),ie(c,s,u),a=!0},p:function(e,[t]){e[1]?l?(l.p(e,t),2&t&&Y(l,1)):(l=it(e),l.c(),Y(l,1),l.m(s.parentNode,s)):l&&(H(),G(l,1,1,()=>{l=null}),X())},i:function(e){a||(Y(l),a=!0)},o:function(e){G(l),a=!1},d:function(c){c&&re(t),c&&re(n),c&&re(o),e[3](null),c&&re(r),l&&l.d(c),c&&re(s)}};return oe("SvelteRegisterBlock",{block:u,id:rt.name,type:"component",source:"",ctx:e}),u}function st(e,t,n){let{$$slots:o={},$$scope:c}=t;fe("Downstream",o,[]);let i,{stream:r}=t;const s=["stream"];let a;return Object.keys(t).forEach(e=>{~s.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Downstream> was created with unknown prop '${e}'`)}),e.$$set=e=>{"stream"in e&&n(2,r=e.stream)},e.$capture_state=()=>({Details:We,stream:r,videoTag:i,mainTrack:a}),e.$inject_state=e=>{"stream"in e&&n(2,r=e.stream),"videoTag"in e&&n(0,i=e.videoTag),"mainTrack"in e&&n(1,a=e.mainTrack)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{4&e.$$.dirty&&n(1,a=r&&r.getTracks()[0]),5&e.$$.dirty&&i&&n(0,i.srcObject=r,i)},[i,a,r,function(e){P[e?"unshift":"push"](()=>{i=e,n(0,i),n(2,r)})}]}var at=class extends pe{constructor(e){super(e),ne(this,e,st,rt,l,{stream:2}),oe("SvelteRegisterComponent",{component:this,tagName:"Downstream",options:e,id:rt.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[2]||"stream"in n||console.warn("<Downstream> was created without expected prop 'stream'")}get stream(){throw new Error("<Downstream>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set stream(e){throw new Error("<Downstream>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};function lt(e){let t,n,i,r,a,l,u;const d={c:function(){t=v("form"),n=v("input"),i=b(),r=v("code"),a=w(e[0]),ae(n,"size","90"),ae(n,"placeholder","ws url"),c(n,"src/RemoteBar.svelte",18,4,498),c(t,"src/RemoteBar.svelte",17,0,451),c(r,"src/RemoteBar.svelte",21,0,576)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,c){var s;ie(o,t,c),ce(t,n),x(n,e[1]),ie(o,i,c),ie(o,r,c),ce(r,a),l||(u=[se(n,"input",e[2]),se(t,"submit",(s=ut,function(e){return e.preventDefault(),s.call(this,e)}),!1,!0,!1)],l=!0)},p:function(e,[t]){2&t&&n.value!==e[1]&&x(n,e[1]),1&t&&ue(a,e[0])},i:o,o:o,d:function(e){e&&re(t),e&&re(i),e&&re(r),l=!1,s(u)}};return oe("SvelteRegisterBlock",{block:d,id:lt.name,type:"component",source:"",ctx:e}),d}function ut(){}function dt(e,t,n){let{$$slots:o={},$$scope:c}=t;fe("RemoteBar",o,[]);let{signalingClient:i}=t;const r=["signalingClient"];let s;return Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<RemoteBar> was created with unknown prop '${e}'`)}),e.$$set=e=>{"signalingClient"in e&&n(0,i=e.signalingClient)},e.$capture_state=()=>({offerStore:xe,answerStore:Ce,candidatesStore:Re,config:ye,signalingClient:i,onSubmit:ut,signalingServer:s}),e.$inject_state=e=>{"signalingClient"in e&&n(0,i=e.signalingClient),"signalingServer"in e&&n(1,s=e.signalingServer)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{3&e.$$.dirty&&(i.connect({url:s}),window.client=i)},n(1,s=`wss://${window.location.host}/signaling/test`),[i,s,function(){s=this.value,n(1,s)}]}var ft=class extends pe{constructor(e){super(e),ne(this,e,dt,lt,l,{signalingClient:0}),oe("SvelteRegisterComponent",{component:this,tagName:"RemoteBar",options:e,id:lt.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[0]||"signalingClient"in n||console.warn("<RemoteBar> was created without expected prop 'signalingClient'")}get signalingClient(){throw new Error("<RemoteBar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set signalingClient(e){throw new Error("<RemoteBar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};function pt(e,t,n){const o=e.slice();return o[3]=t[n],o}function mt(e){let t,n,o=e[0];de(o);let c=[];for(let t=0;t<o.length;t+=1)c[t]=ht(pt(e,o,t));const i=e=>G(c[e],1,1,()=>{c[e]=null}),r={c:function(){for(let e=0;e<c.length;e+=1)c[e].c();t=y()},m:function(e,o){for(let t=0;t<c.length;t+=1)c[t].m(e,o);ie(e,t,o),n=!0},p:function(e,n){if(1&n){let r;for(o=e[0],de(o),r=0;r<o.length;r+=1){const i=pt(e,o,r);c[r]?(c[r].p(i,n),Y(c[r],1)):(c[r]=ht(i),c[r].c(),Y(c[r],1),c[r].m(t.parentNode,t))}for(H(),r=o.length;r<c.length;r+=1)i(r);X()}},i:function(e){if(!n){for(let e=0;e<o.length;e+=1)Y(c[e]);n=!0}},o:function(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)G(c[e]);n=!1},d:function(e){$(c,e),e&&re(t)}};return oe("SvelteRegisterBlock",{block:r,id:mt.name,type:"if",source:"(62:0) {#if transceiverDetails}",ctx:e}),r}function ht(e){let t,n,o,i,r,s,a,l,u,d,f,p,m="transceiver "+e[3].mid,h=e[3].mid+"";f=new We({props:{summary:"details",data:e[3],open:!1},$$inline:!0});const g={c:function(){t=w(m),n=b(),o=v("table"),i=v("tr"),r=v("th"),r.textContent="mid",s=b(),a=v("td"),l=v("code"),u=w(h),d=b(),Z(f.$$.fragment),c(r,"src/Transceivers.svelte",66,16,2462),c(l,"src/Transceivers.svelte",67,20,2495),c(a,"src/Transceivers.svelte",67,16,2491),c(i,"src/Transceivers.svelte",65,12,2441),c(o,"src/Transceivers.svelte",64,8,2421)},m:function(e,c){ie(e,t,c),ie(e,n,c),ie(e,o,c),ce(o,i),ce(i,r),ce(i,s),ce(i,a),ce(a,l),ce(l,u),ie(e,d,c),ee(f,e,c),p=!0},p:function(e,n){(!p||1&n)&&m!==(m="transceiver "+e[3].mid)&&ue(t,m),(!p||1&n)&&h!==(h=e[3].mid+"")&&ue(u,h);const o={};1&n&&(o.data=e[3]),f.$set(o)},i:function(e){p||(Y(f.$$.fragment,e),p=!0)},o:function(e){G(f.$$.fragment,e),p=!1},d:function(e){e&&re(t),e&&re(n),e&&re(o),e&&re(d),te(f,e)}};return oe("SvelteRegisterBlock",{block:g,id:ht.name,type:"each",source:"(63:4) {#each transceiverDetails as transceiverDetail}",ctx:e}),g}function gt(e){let t,n,o,i,r=e[0]&&mt(e);const s={c:function(){t=v("h5"),t.textContent="transceivers",n=b(),r&&r.c(),o=y(),c(t,"src/Transceivers.svelte",60,0,2265)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,c){ie(e,t,c),ie(e,n,c),r&&r.m(e,c),ie(e,o,c),i=!0},p:function(e,[t]){e[0]?r?(r.p(e,t),1&t&&Y(r,1)):(r=mt(e),r.c(),Y(r,1),r.m(o.parentNode,o)):r&&(H(),G(r,1,1,()=>{r=null}),X())},i:function(e){i||(Y(r),i=!0)},o:function(e){G(r),i=!1},d:function(e){e&&re(t),e&&re(n),r&&r.d(e),e&&re(o)}};return oe("SvelteRegisterBlock",{block:s,id:gt.name,type:"component",source:"",ctx:e}),s}function $t(e,t,n){let{$$slots:o={},$$scope:c}=t;fe("Transceivers",o,[]);let i,{peerconnection:r}=t;O(()=>{const e=setInterval(()=>{a&&n(0,i=a.map(({mid:e,direction:t,currentDirection:n,stopped:o,sender:c,receiver:i})=>{let r={},s={};{let{dtmf:e,track:t,transport:n}=c;r={dtmf:e,track:t,transport:n,parameters:c.getParameters&&c.getParameters()}}{let{dtmf:e,track:t,transport:n}=i;s={dtmf:e,track:t,transport:n,parameters:i.getParameters&&i.getParameters(),csrcs:i.getContributingSources(),ssrcs:i.getSynchronizationSources()}}return{mid:e,direction:t,currentDirection:n,stopped:o,sender:r,receiver:s}}))},1e3);return()=>clearInterval(e)});const s=["peerconnection"];let a;return Object.keys(t).forEach(e=>{~s.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Transceivers> was created with unknown prop '${e}'`)}),e.$$set=e=>{"peerconnection"in e&&n(1,r=e.peerconnection)},e.$capture_state=()=>({onMount:O,Details:We,peerconnection:r,transceiverDetails:i,transceivers:a}),e.$inject_state=e=>{"peerconnection"in e&&n(1,r=e.peerconnection),"transceiverDetails"in e&&n(0,i=e.transceiverDetails),"transceivers"in e&&(a=e.transceivers)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{2&e.$$.dirty&&(a=r&&r.getTransceivers())},[i,r]}var vt=class extends pe{constructor(e){super(e),ne(this,e,$t,gt,l,{peerconnection:1}),oe("SvelteRegisterComponent",{component:this,tagName:"Transceivers",options:e,id:gt.name});const{ctx:t}=this.$$,n=e.props||{};void 0!==t[1]||"peerconnection"in n||console.warn("<Transceivers> was created without expected prop 'peerconnection'")}get peerconnection(){throw new Error("<Transceivers>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set peerconnection(e){throw new Error("<Transceivers>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};const{console:wt}=K,bt="src/Participant.svelte";function yt(e){let t,n;t=new ft({props:{signalingClient:e[23]},$$inline:!0});const c={c:function(){Z(t.$$.fragment)},m:function(e,o){ee(t,e,o),n=!0},p:o,i:function(e){n||(Y(t.$$.fragment,e),n=!0)},o:function(e){G(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:c,id:yt.name,type:"if",source:"(248:4) {#if $config.isRemote}",ctx:e}),c}function kt(e){let t,n,i;n=new ct({$$inline:!0}),n.$on("stream",e[32]),n.$on("stop",e[33]);const r={c:function(){t=v("article"),Z(n.$$.fragment),ae(t,"id","upstream"),ae(t,"class","box"),c(t,bt,252,4,7849)},m:function(e,o){ie(e,t,o),ee(n,t,null),i=!0},p:o,i:function(e){i||(Y(n.$$.fragment,e),i=!0)},o:function(e){G(n.$$.fragment,e),i=!1},d:function(e){e&&re(t),te(n)}};return oe("SvelteRegisterBlock",{block:r,id:kt.name,type:"if",source:"(252:4) {#if $config.hasUpstream}",ctx:e}),r}function St(e){let t,n,o;n=new at({props:{},$$inline:!0}),e[34](n);const i={c:function(){t=v("article"),Z(n.$$.fragment),ae(t,"id","downstream"),ae(t,"class","box"),c(t,bt,261,4,8101)},m:function(e,c){ie(e,t,c),ee(n,t,null),o=!0},p:function(e,t){n.$set({})},i:function(e){o||(Y(n.$$.fragment,e),o=!0)},o:function(e){G(n.$$.fragment,e),o=!1},d:function(o){o&&re(t),e[34](null),te(n)}};return oe("SvelteRegisterBlock",{block:i,id:St.name,type:"if",source:"(261:4) {#if $config.hasDownstream}",ctx:e}),i}function xt(e){let t;const n={c:function(){t=w("addStream")},m:function(e,n){ie(e,t,n)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:n,id:xt.name,type:"else",source:"(271:36) {:else}",ctx:e}),n}function Ct(e){let t;const n={c:function(){t=w("replaceTrack")},m:function(e,n){ie(e,t,n)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:n,id:Ct.name,type:"if",source:"(271:12) {#if sender}",ctx:e}),n}function Rt(e){let t,n,o,i,r,s,a,l=e[16].join(" ")+"";const u={c:function(){t=v("tr"),n=v("th"),n.textContent="events:",o=b(),i=v("td"),r=v("code"),s=v("small"),a=w(l),c(n,bt,297,20,9212),c(s,bt,298,32,9263),c(r,bt,298,25,9256),c(i,bt,298,20,9251),c(t,bt,296,16,9187)},m:function(e,c){ie(e,t,c),ce(t,n),ce(t,o),ce(t,i),ce(i,r),ce(r,s),ce(s,a)},p:function(e,t){65536&t[0]&&l!==(l=e[16].join(" ")+"")&&ue(a,l)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:u,id:Rt.name,type:"if",source:"(296:16) {#if !hideSignaling}",ctx:e}),u}function Et(e){let t,n,o,i,r,s,a,l,u,d=e[11]&&jt(e),f=e[18]&&!e[21].isManual&&Dt(e),p=e[21].isManual&&Ot(e);const m={c:function(){t=v("label"),n=w("1.\n                "),o=v("button"),o.textContent="create offer",i=b(),d&&d.c(),r=b(),f&&f.c(),s=b(),p&&p.c(),a=y(),c(o,bt,321,16,9848),c(t,bt,319,12,9805)},m:function(c,m){ie(c,t,m),ce(t,n),ce(t,o),ie(c,i,m),d&&d.m(c,m),ie(c,r,m),f&&f.m(c,m),ie(c,s,m),p&&p.m(c,m),ie(c,a,m),l||(u=se(o,"click",e[25],!1,!1,!1),l=!0)},p:function(e,t){e[11]?d?d.p(e,t):(d=jt(e),d.c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null),e[18]&&!e[21].isManual?f?f.p(e,t):(f=Dt(e),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null),e[21].isManual?p?p.p(e,t):(p=Ot(e),p.c(),p.m(a.parentNode,a)):p&&(p.d(1),p=null)},d:function(e){e&&re(t),e&&re(i),d&&d.d(e),e&&re(r),f&&f.d(e),e&&re(s),p&&p.d(e),e&&re(a),l=!1,u()}};return oe("SvelteRegisterBlock",{block:m,id:Et.name,type:"if",source:"(319:8) {#if isCaller}",ctx:e}),m}function jt(e){let t,n,o,i,r,a,l,u,d,f,p,m;const h={c:function(){t=v("div"),n=v("textarea"),o=b(),i=v("br"),r=b(),a=v("label"),l=w("2.\n                        "),u=v("button"),u.textContent="setLocalDescription",d=b(),f=v("button"),f.textContent="send offer",ae(n,"rows","20"),ae(n,"class","svelte-19mjatr"),C(n,"hideSignaling",e[22]),c(n,bt,326,20,9997),c(i,bt,327,20,10085),c(u,bt,330,24,10171),c(f,bt,331,24,10286),c(a,bt,328,20,10112),c(t,bt,325,16,9971)},m:function(c,s){ie(c,t,s),ce(t,n),x(n,e[11]),ce(t,o),ce(t,i),ce(t,r),ce(t,a),ce(a,l),ce(a,u),ce(a,d),ce(a,f),p||(m=[se(n,"input",e[38]),se(u,"click",e[39],!1,!1,!1),se(f,"click",e[27],!1,!1,!1)],p=!0)},p:function(e,t){2048&t[0]&&x(n,e[11]),4194304&t[0]&&C(n,"hideSignaling",e[22])},d:function(e){e&&re(t),p=!1,s(m)}};return oe("SvelteRegisterBlock",{block:h,id:jt.name,type:"if",source:"(325:12) {#if localOfferSdp}",ctx:e}),h}function Dt(e){let t,n,o,i,r,a,l,u,d,f;const p={c:function(){t=v("div"),n=v("textarea"),o=b(),i=v("br"),r=b(),a=v("label"),l=w("5.\n                        "),u=v("button"),u.textContent="setRemoteDescription",ae(n,"rows","20"),ae(n,"class","svelte-19mjatr"),C(n,"hideSignaling",e[22]),c(n,bt,337,20,10501),c(i,bt,338,20,10592),c(u,bt,341,24,10678),c(a,bt,339,20,10619),c(t,bt,336,16,10475)},m:function(c,s){ie(c,t,s),ce(t,n),x(n,e[18]),ce(t,o),ce(t,i),ce(t,r),ce(t,a),ce(a,l),ce(a,u),d||(f=[se(n,"input",e[40]),se(u,"click",e[41],!1,!1,!1)],d=!0)},p:function(e,t){262144&t[0]&&x(n,e[18]),4194304&t[0]&&C(n,"hideSignaling",e[22])},d:function(e){e&&re(t),d=!1,s(f)}};return oe("SvelteRegisterBlock",{block:p,id:Dt.name,type:"if",source:"(336:12) {#if receivedAnswer && !$config.isManual}",ctx:e}),p}function Ot(e){let t,n,o,i,r,a,l,u,d,f,p,m;const h={c:function(){t=v("div"),n=v("strong"),n.textContent="MANUAL ANSWER HERE",o=b(),i=v("textarea"),r=b(),a=v("br"),l=b(),u=v("label"),d=w("5.\n                        "),f=v("button"),f.textContent="setRemoteDescription",c(n,bt,347,20,10914),ae(i,"rows","20"),ae(i,"class","svelte-19mjatr"),c(i,bt,348,20,10970),c(a,bt,349,20,11041),c(f,bt,352,24,11127),c(u,bt,350,20,11068),c(t,bt,346,16,10888)},m:function(c,s){ie(c,t,s),ce(t,n),ce(t,o),ce(t,i),x(i,e[14]),ce(t,r),ce(t,a),ce(t,l),ce(t,u),ce(u,d),ce(u,f),p||(m=[se(i,"input",e[42]),se(f,"click",e[43],!1,!1,!1)],p=!0)},p:function(e,t){16384&t[0]&&x(i,e[14])},d:function(e){e&&re(t),p=!1,s(m)}};return oe("SvelteRegisterBlock",{block:h,id:Ot.name,type:"if",source:"(346:12) {#if $config.isManual}",ctx:e}),h}function Bt(e){let t,n,o,c=e[17]&&!e[21].isManual&&_t(e),i=e[21].isManual&&Pt(e),r=e[12]&&e[17]&&Tt(e);const s={c:function(){c&&c.c(),t=b(),i&&i.c(),n=b(),r&&r.c(),o=y()},m:function(e,s){c&&c.m(e,s),ie(e,t,s),i&&i.m(e,s),ie(e,n,s),r&&r.m(e,s),ie(e,o,s)},p:function(e,s){e[17]&&!e[21].isManual?c?c.p(e,s):(c=_t(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),e[21].isManual?i?i.p(e,s):(i=Pt(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),e[12]&&e[17]?r?r.p(e,s):(r=Tt(e),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d:function(e){c&&c.d(e),e&&re(t),i&&i.d(e),e&&re(n),r&&r.d(e),e&&re(o)}};return oe("SvelteRegisterBlock",{block:s,id:Bt.name,type:"if",source:"(359:8) {#if isReceiver}",ctx:e}),s}function _t(e){let t,n,o,i,r,a,l,u,d,f,p,m;const h={c:function(){t=v("div"),n=v("textarea"),o=b(),i=v("br"),r=b(),a=v("label"),l=w("3.\n                        "),u=v("button"),u.textContent="setRemoteDescription",d=b(),f=v("button"),f.textContent="create answer",ae(n,"rows","20"),ae(n,"class","svelte-19mjatr"),C(n,"hideSignaling",e[22]),c(n,bt,361,20,11421),c(i,bt,362,20,11511),c(u,bt,365,24,11597),c(f,bt,366,24,11708),c(a,bt,363,20,11538),c(t,bt,360,16,11395)},m:function(c,s){ie(c,t,s),ce(t,n),x(n,e[17]),ce(t,o),ce(t,i),ce(t,r),ce(t,a),ce(a,l),ce(a,u),ce(a,d),ce(a,f),p||(m=[se(n,"input",e[44]),se(u,"click",e[45],!1,!1,!1),se(f,"click",e[26],!1,!1,!1)],p=!0)},p:function(e,t){131072&t[0]&&x(n,e[17]),4194304&t[0]&&C(n,"hideSignaling",e[22])},d:function(e){e&&re(t),p=!1,s(m)}};return oe("SvelteRegisterBlock",{block:h,id:_t.name,type:"if",source:"(360:12) {#if receivedOffer && !$config.isManual}",ctx:e}),h}function Pt(e){let t,n,o,i,r,a,l,u,d,f,p,m,h,g;const $={c:function(){t=v("div"),n=v("strong"),n.textContent="MANUAL OFFER HERE",o=b(),i=v("textarea"),r=b(),a=v("br"),l=b(),u=v("label"),d=w("3.\n                        "),f=v("button"),f.textContent="setRemoteDescription",p=b(),m=v("button"),m.textContent="create answer",c(n,bt,372,20,11910),ae(i,"rows","20"),ae(i,"class","svelte-19mjatr"),c(i,bt,373,20,11965),c(a,bt,374,20,12035),c(f,bt,377,24,12121),c(m,bt,378,24,12232),c(u,bt,375,20,12062),c(t,bt,371,16,11884)},m:function(c,s){ie(c,t,s),ce(t,n),ce(t,o),ce(t,i),x(i,e[13]),ce(t,r),ce(t,a),ce(t,l),ce(t,u),ce(u,d),ce(u,f),ce(u,p),ce(u,m),h||(g=[se(i,"input",e[46]),se(f,"click",e[47],!1,!1,!1),se(m,"click",e[26],!1,!1,!1)],h=!0)},p:function(e,t){8192&t[0]&&x(i,e[13])},d:function(e){e&&re(t),h=!1,s(g)}};return oe("SvelteRegisterBlock",{block:$,id:Pt.name,type:"if",source:"(371:12) {#if $config.isManual}",ctx:e}),$}function Tt(e){let t,n,o,i,r,a,l,u,d,f,p,m;const h={c:function(){t=v("div"),n=v("textarea"),o=b(),i=v("br"),r=b(),a=v("label"),l=w("4.\n                        "),u=v("button"),u.textContent="setLocalDescription",d=b(),f=v("button"),f.textContent="send answer",ae(n,"rows","20"),ae(n,"class","svelte-19mjatr"),C(n,"hideSignaling",e[22]),c(n,bt,384,20,12449),c(i,bt,385,20,12540),c(u,bt,388,24,12626),c(f,bt,389,24,12743),c(a,bt,386,20,12567),c(t,bt,383,16,12423)},m:function(c,s){ie(c,t,s),ce(t,n),x(n,e[12]),ce(t,o),ce(t,i),ce(t,r),ce(t,a),ce(a,l),ce(a,u),ce(a,d),ce(a,f),p||(m=[se(n,"input",e[48]),se(u,"click",e[49],!1,!1,!1),se(f,"click",e[28],!1,!1,!1)],p=!0)},p:function(e,t){4096&t[0]&&x(n,e[12]),4194304&t[0]&&C(n,"hideSignaling",e[22])},d:function(e){e&&re(t),p=!1,s(m)}};return oe("SvelteRegisterBlock",{block:h,id:Tt.name,type:"if",source:"(383:12) {#if localAnswerSdp && receivedOffer}",ctx:e}),h}function Nt(e){let t,n,o;const i={c:function(){t=v("textarea"),ae(t,"rows","10"),ae(t,"class","svelte-19mjatr"),C(t,"hideSignaling",e[22]),c(t,bt,396,12,12951)},m:function(c,i){ie(c,t,i),x(t,e[19]),n||(o=se(t,"input",e[50]),n=!0)},p:function(e,n){524288&n[0]&&x(t,e[19]),4194304&n[0]&&C(t,"hideSignaling",e[22])},d:function(e){e&&re(t),n=!1,o()}};return oe("SvelteRegisterBlock",{block:i,id:Nt.name,type:"if",source:"(396:8) {#if readableCandidates.length || $config.isManual}",ctx:e}),i}function Mt(e){let t,n,o,i,r,s,a,l,u=JSON.stringify(e[20],null,4)+"";const d={c:function(){t=v("label"),t.textContent="injected Candidates",n=b(),o=v("textarea"),i=b(),r=v("pre"),s=w(u),ae(t,"for","injectedCandidates"),c(t,bt,400,12,13084),ae(o,"name","injectedCandidates"),ae(o,"rows","20"),ae(o,"class","svelte-19mjatr"),c(o,bt,401,12,13156),c(r,bt,402,12,13249)},m:function(c,u){ie(c,t,u),ie(c,n,u),ie(c,o,u),x(o,e[15]),ie(c,i,u),ie(c,r,u),ce(r,s),a||(l=se(o,"input",e[51]),a=!0)},p:function(e,t){32768&t[0]&&x(o,e[15]),1048576&t[0]&&u!==(u=JSON.stringify(e[20],null,4)+"")&&ue(s,u)},d:function(e){e&&re(t),e&&re(n),e&&re(o),e&&re(i),e&&re(r),a=!1,l()}};return oe("SvelteRegisterBlock",{block:d,id:Mt.name,type:"if",source:"(400:8) {#if $config.isManual}",ctx:e}),d}function Lt(e){let t,n,o,i,r,a,l,u,d,f,p,m,h,g,$,y,k,S,x,C,R,E,j,D,O,B,_,P,T,N,M,L,U,A,I,q,F,J,z,V,W,K,Q,ne,de,fe,pe,me,he,ge,$e,ve,we,be,ye,ke,Se,xe,Ce,Re,Ee,je,De,Oe=e[21].isRemote&&yt(e),Be=e[21].hasUpstream&&kt(e),_e=e[21].hasDownstream&&St(e);function Pe(e,t){return e[6]?Ct:xt}let Te=Pe(e),Ne=Te(e);x=new vt({props:{name:e[2],peerconnection:e[5]},$$inline:!0});let Me=!e[22]&&Rt(e),Le=e[0]&&Et(e),Ue=e[1]&&Bt(e),Ae=(e[19].length||e[21].isManual)&&Nt(e),Ie=e[21].isManual&&Mt(e);const qe={c:function(){t=v("section"),n=v("h3"),o=w(e[2]),i=b(),r=v("small"),a=w("talking to "),l=w(e[3]),u=b(),Oe&&Oe.c(),d=b(),Be&&Be.c(),f=b(),_e&&_e.c(),p=b(),m=v("article"),h=v("h5"),h.textContent="streams",g=b(),$=v("button"),Ne.c(),k=b(),S=v("article"),Z(x.$$.fragment),C=b(),R=v("article"),E=v("h5"),E.textContent="signaling",j=b(),D=v("div"),O=v("table"),B=v("tr"),_=v("th"),_.textContent="signaling:",P=b(),T=v("td"),N=v("code"),M=w(e[8]),L=b(),U=v("tr"),A=v("th"),A.textContent="connection:",I=b(),q=v("td"),F=v("code"),J=w(e[9]),z=b(),V=v("tr"),W=v("th"),W.textContent="ice:",K=b(),Q=v("td"),ne=v("code"),de=w(e[10]),fe=b(),Me&&Me.c(),pe=b(),me=v("div"),he=v("span"),ge=v("label"),$e=v("input"),ve=w("\n                    caller"),we=b(),be=v("label"),ye=v("input"),ke=w("\n                    receiver"),Se=b(),Le&&Le.c(),xe=b(),Ue&&Ue.c(),Ce=b(),Ae&&Ae.c(),Re=b(),Ie&&Ie.c(),c(r,bt,245,4,7689),c(n,bt,244,4,7674),c(h,bt,267,8,8254),$.disabled=y=!Boolean(e[7]),c($,bt,268,8,8279),ae(m,"class","box"),c(m,bt,266,4,8224),ae(S,"class","box"),c(S,bt,274,4,8473),c(E,bt,279,8,8613),c(_,bt,284,20,8737),c(N,bt,285,25,8784),c(T,bt,285,20,8779),c(B,bt,283,16,8712),c(A,bt,288,20,8883),c(F,bt,289,25,8931),c(q,bt,289,20,8926),c(U,bt,287,16,8858),c(W,bt,292,20,9031),c(ne,bt,293,25,9072),c(Q,bt,293,20,9067),c(V,bt,291,16,9006),ae(O,"class","vertical"),c(O,bt,282,12,8671),ae(D,"class","box"),c(D,bt,281,8,8641),ae($e,"type","checkbox"),c($e,bt,308,20,9482),c(ge,bt,307,16,9454),ae(ye,"type","checkbox"),c(ye,bt,312,20,9628),c(be,bt,311,16,9600),c(he,bt,306,12,9431),ae(me,"class","box"),c(me,bt,305,8,9401),ae(R,"class","box"),c(R,bt,278,4,8583),c(t,bt,243,0,7660)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(c,s){ie(c,t,s),ce(t,n),ce(n,o),ce(n,i),ce(n,r),ce(r,a),ce(r,l),ce(t,u),Oe&&Oe.m(t,null),ce(t,d),Be&&Be.m(t,null),ce(t,f),_e&&_e.m(t,null),ce(t,p),ce(t,m),ce(m,h),ce(m,g),ce(m,$),Ne.m($,null),ce(t,k),ce(t,S),ee(x,S,null),ce(t,C),ce(t,R),ce(R,E),ce(R,j),ce(R,D),ce(D,O),ce(O,B),ce(B,_),ce(B,P),ce(B,T),ce(T,N),ce(N,M),ce(O,L),ce(O,U),ce(U,A),ce(U,I),ce(U,q),ce(q,F),ce(F,J),ce(O,z),ce(O,V),ce(V,W),ce(V,K),ce(V,Q),ce(Q,ne),ce(ne,de),ce(O,fe),Me&&Me.m(O,null),ce(R,pe),ce(R,me),ce(me,he),ce(he,ge),ce(ge,$e),$e.checked=e[0],ce(ge,ve),ce(he,we),ce(he,be),ce(be,ye),ye.checked=e[1],ce(be,ke),ce(R,Se),Le&&Le.m(R,null),ce(R,xe),Ue&&Ue.m(R,null),ce(R,Ce),Ae&&Ae.m(R,null),ce(R,Re),Ie&&Ie.m(R,null),Ee=!0,je||(De=[se($,"click",e[35],!1,!1,!1),se($e,"change",e[36]),se(ye,"change",e[37])],je=!0)},p:function(e,n){(!Ee||4&n[0])&&ue(o,e[2]),(!Ee||8&n[0])&&ue(l,e[3]),e[21].isRemote?Oe?(Oe.p(e,n),2097152&n[0]&&Y(Oe,1)):(Oe=yt(e),Oe.c(),Y(Oe,1),Oe.m(t,d)):Oe&&(H(),G(Oe,1,1,()=>{Oe=null}),X()),e[21].hasUpstream?Be?(Be.p(e,n),2097152&n[0]&&Y(Be,1)):(Be=kt(e),Be.c(),Y(Be,1),Be.m(t,f)):Be&&(H(),G(Be,1,1,()=>{Be=null}),X()),e[21].hasDownstream?_e?(_e.p(e,n),2097152&n[0]&&Y(_e,1)):(_e=St(e),_e.c(),Y(_e,1),_e.m(t,p)):_e&&(H(),G(_e,1,1,()=>{_e=null}),X()),Te!==(Te=Pe(e))&&(Ne.d(1),Ne=Te(e),Ne&&(Ne.c(),Ne.m($,null))),(!Ee||128&n[0]&&y!==(y=!Boolean(e[7])))&&le($,"disabled",y);const c={};4&n[0]&&(c.name=e[2]),32&n[0]&&(c.peerconnection=e[5]),x.$set(c),(!Ee||256&n[0])&&ue(M,e[8]),(!Ee||512&n[0])&&ue(J,e[9]),(!Ee||1024&n[0])&&ue(de,e[10]),e[22]?Me&&(Me.d(1),Me=null):Me?Me.p(e,n):(Me=Rt(e),Me.c(),Me.m(O,null)),1&n[0]&&($e.checked=e[0]),2&n[0]&&(ye.checked=e[1]),e[0]?Le?Le.p(e,n):(Le=Et(e),Le.c(),Le.m(R,xe)):Le&&(Le.d(1),Le=null),e[1]?Ue?Ue.p(e,n):(Ue=Bt(e),Ue.c(),Ue.m(R,Ce)):Ue&&(Ue.d(1),Ue=null),e[19].length||e[21].isManual?Ae?Ae.p(e,n):(Ae=Nt(e),Ae.c(),Ae.m(R,Re)):Ae&&(Ae.d(1),Ae=null),e[21].isManual?Ie?Ie.p(e,n):(Ie=Mt(e),Ie.c(),Ie.m(R,null)):Ie&&(Ie.d(1),Ie=null)},i:function(e){Ee||(Y(Oe),Y(Be),Y(_e),Y(x.$$.fragment,e),Ee=!0)},o:function(e){G(Oe),G(Be),G(_e),G(x.$$.fragment,e),Ee=!1},d:function(e){e&&re(t),Oe&&Oe.d(),Be&&Be.d(),_e&&_e.d(),Ne.d(),te(x),Me&&Me.d(),Le&&Le.d(),Ue&&Ue.d(),Ae&&Ae.d(),Ie&&Ie.d(),je=!1,s(De)}};return oe("SvelteRegisterBlock",{block:qe,id:Lt.name,type:"component",source:"",ctx:e}),qe}function Ut(e,t,n){let o,c,i,r,s;d(ke,"eventLogByName"),p(e,ke,e=>n(53,o=e)),d(xe,"offerStore"),p(e,xe,e=>n(54,c=e)),d(Ce,"answerStore"),p(e,Ce,e=>n(55,i=e)),d(ye,"config"),p(e,ye,e=>n(21,r=e)),d(Re,"candidatesStore"),p(e,Re,e=>n(56,s=e));let{$$slots:a={},$$scope:l}=t;fe("Participant",a,[]);let{isCaller:u=!1}=t,{isReceiver:f=!1}=t,{name:m="unnamed participant"}=t,{recipient:h=null}=t;const g=new Ae({from:m,to:h}),$=B(),v=Se(m);let w,b,y,k,S="",x="",C="",R="",E="",j="",D="",_=[],T="",N="plan-b"===new URL(document.location).searchParams.get("semantic")?{sdpSemantics:"plan-b"}:{sdpSemantics:"unified-plan"};function M(){N.sdpSemantics;const e=new RTCPeerConnection(N);return e.ontrack=e=>{const{track:t,streams:n,transceiver:o}=e,c=n[0];w.$set({stream:c}),c.onaddtrack=()=>{v("ta","track added"),console.warn(m+"track added to stream",{track:t,stream:c})},"video"==t.kind&&(console.info(m+".ontrack",{track:t,streams:n,kind:t.kind,transceiver:o}),t.onmute=e=>{v("tm","track muted"),console.info(m+" track onmute",{event:e})},t.onunmute=e=>{v("tu","track unmuted"),console.info(m+" track onunmute",{event:e})},t.onended=e=>{v("te","track ended"),console.debug(m+" track onended",{event:e})})},e.onicecandidate=({candidate:e})=>{v("lc","create candidate"),n(52,_=[..._,e]),z(e)},e.onsignalingstatechange=t=>n(8,S=e.signalingState),e.onconnectionstatechange=t=>n(9,x=e.connectionState),e.oniceconnectionstatechange=t=>n(10,C=e.iceConnectionState),console.info("setup RTCPeerConnection for "+m,N,e),e}function L(e){v("at","add track"),console.info("add track"),n(6,y=b.addTrack(e.getTracks()[0],e))}function U(e){y?(v("rt","replace track"),console.info("replace track",{sender:y}),y.replaceTrack(e.getTracks()[0])):(v("at","add track"),console.info("add track"),n(6,y=b.addTrack(e.getTracks()[0],e)))}async function I(){v("o","create offer");const e=await b.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!1});n(11,R=e.sdp)}async function q(){v("a","create answer");const e=await b.createAnswer();n(12,E=e.sdp)}function F(){const e=Fe(R);Ee({from:m,offer:e}),r.isRemote&&g.sendOffer(e)}function J(){const e=Fe(E);je({from:m,answer:e}),r.isRemote&&g.sendAnswer(e)}function z(e){m&&e&&(De({from:m,candidate:e}),r.isRemote&&g.sendCandidate(e))}async function V(e){v("l","setLocalDescription"),console.debug("localDescription ->",e);const t=e;Oe(m),b.setLocalDescription(t),H(),Oe(h)}function W(e){v("r","setRemoteDescription");const t=Fe(e);b.setRemoteDescription(t),H(),Oe(h)}function H(){r.isManual?(ee||[]).forEach(e=>{e&&(v("ac","addIceCandidate"),b.addIceCandidate(e))}):(console.debug(s[h]),(s[h]||[]).forEach(e=>{e&&(v("ac","addIceCandidate"),b.addIceCandidate(e))}))}function X(e){v("r","setRemoteDescription");const t=Je(e);b.setRemoteDescription(t),Oe(m)}O(()=>{n(5,b=M()),Re.subscribe(({[h]:e})=>{e&&v("rc")}),r.hasCaller&&I()});const Y=["isCaller","isReceiver","name","recipient"];Object.keys(t).forEach(e=>{~Y.indexOf(e)||"$$"===e.slice(0,2)||wt.warn(`<Participant> was created with unknown prop '${e}'`)});let G,K,Q,Z,ee,te;return e.$$set=e=>{"isCaller"in e&&n(0,u=e.isCaller),"isReceiver"in e&&n(1,f=e.isReceiver),"name"in e&&n(2,m=e.name),"recipient"in e&&n(3,h=e.recipient)},e.$capture_state=()=>({onMount:O,createEventDispatcher:B,tick:A,config:ye,addEventFor:Se,eventLogByName:ke,offerStore:xe,answerStore:Ce,candidatesStore:Re,sendOfferFrom:Ee,sendAnswerFrom:je,sendCandidateFrom:De,clearCandidatesFrom:Oe,SignalingClient:Ae,justTheSdp:Ie,safeParse:qe,packOffer:Fe,packAnswer:Je,Upstream:ct,Downstream:at,RemoteBar:ft,Transceivers:vt,isCaller:u,isReceiver:f,name:m,recipient:h,signalingClient:g,dispatch:$,addEvent:v,downstreamComponent:w,peerConnection:b,sender:y,videoUpstream:k,signalingState:S,connectionState:x,iceConnectionState:C,localOfferSdp:R,localAnswerSdp:E,injectedOffer:j,injectedAnswer:D,rawCandidates:_,injectedCandidates:T,pcconfig:N,initPeerConnection:M,addTrack:L,addStream:U,createOffer:I,createAnswer:q,sendOffer:F,sendAnswer:J,sendCandidate:z,applyLocal:V,applyRemoteOffer:W,applyCandidates:H,applyRemoteAnswer:X,events:G,$eventLogByName:o,receivedOffer:K,$offerStore:c,receivedAnswer:Q,$answerStore:i,readableCandidates:Z,parsedInjectedCandidates:ee,$config:r,$candidatesStore:s,hideSignaling:te}),e.$inject_state=e=>{"isCaller"in e&&n(0,u=e.isCaller),"isReceiver"in e&&n(1,f=e.isReceiver),"name"in e&&n(2,m=e.name),"recipient"in e&&n(3,h=e.recipient),"downstreamComponent"in e&&n(4,w=e.downstreamComponent),"peerConnection"in e&&n(5,b=e.peerConnection),"sender"in e&&n(6,y=e.sender),"videoUpstream"in e&&n(7,k=e.videoUpstream),"signalingState"in e&&n(8,S=e.signalingState),"connectionState"in e&&n(9,x=e.connectionState),"iceConnectionState"in e&&n(10,C=e.iceConnectionState),"localOfferSdp"in e&&n(11,R=e.localOfferSdp),"localAnswerSdp"in e&&n(12,E=e.localAnswerSdp),"injectedOffer"in e&&n(13,j=e.injectedOffer),"injectedAnswer"in e&&n(14,D=e.injectedAnswer),"rawCandidates"in e&&n(52,_=e.rawCandidates),"injectedCandidates"in e&&n(15,T=e.injectedCandidates),"pcconfig"in e&&(N=e.pcconfig),"events"in e&&n(16,G=e.events),"receivedOffer"in e&&n(17,K=e.receivedOffer),"receivedAnswer"in e&&n(18,Q=e.receivedAnswer),"readableCandidates"in e&&n(19,Z=e.readableCandidates),"parsedInjectedCandidates"in e&&n(20,ee=e.parsedInjectedCandidates),"hideSignaling"in e&&n(22,te=e.hideSignaling)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{4&e.$$.dirty[0]|4194304&e.$$.dirty[1]&&n(16,G=o[m]||[]),8&e.$$.dirty[0]|8388608&e.$$.dirty[1]&&n(17,K=Ie(c[h])),8&e.$$.dirty[0]|16777216&e.$$.dirty[1]&&n(18,Q=Ie(i[h])),2097152&e.$$.dirty[1]&&n(19,Z=JSON.stringify(_)),32768&e.$$.dirty[0]&&n(20,ee=qe(T)),2097152&e.$$.dirty[0]&&n(22,te=r.hideSignaling)},[u,f,m,h,w,b,y,k,S,x,C,R,E,j,D,T,G,K,Q,Z,ee,r,te,g,U,I,q,F,J,V,W,X,({detail:e})=>n(7,k=e),()=>n(7,k=void 0),function(e){P[e?"unshift":"push"](()=>{w=e,n(4,w)})},()=>U(k),function(){u=this.checked,n(0,u)},function(){f=this.checked,n(1,f)},function(){R=this.value,n(11,R)},()=>V(Fe(R)),function(){Q=this.value,n(18,Q),n(55,i),n(3,h)},()=>X(Q),function(){D=this.value,n(14,D)},()=>X(D),function(){K=this.value,n(17,K),n(54,c),n(3,h)},()=>W(K),function(){j=this.value,n(13,j)},()=>W(j),function(){E=this.value,n(12,E)},()=>V(Je(E)),function(){Z=this.value,n(19,Z),n(52,_)},function(){T=this.value,n(15,T)}]}var At=class extends pe{constructor(e){super(e),ne(this,e,Ut,Lt,l,{isCaller:0,isReceiver:1,name:2,recipient:3},[-1,-1,-1]),oe("SvelteRegisterComponent",{component:this,tagName:"Participant",options:e,id:Lt.name})}get isCaller(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isCaller(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get isReceiver(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isReceiver(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get name(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set name(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get recipient(){throw new Error("<Participant>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set recipient(e){throw new Error("<Participant>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}};function It(e,t,n){const o=e.slice();return o[2]=t[n].name,o[3]=t[n].event,o}function qt(e){let t,n,o,i,r,s,a,l,u,d=e[2]+"",f=e[3]+"";const p={c:function(){t=v("tr"),n=v("th"),o=w(d),i=w(":"),r=b(),s=v("td"),a=v("code"),l=w(f),u=b(),c(n,"src/EventLog.svelte",26,16,513),c(a,"src/EventLog.svelte",27,20,550),c(s,"src/EventLog.svelte",27,16,546),c(t,"src/EventLog.svelte",25,12,492)},m:function(e,c){ie(e,t,c),ce(t,n),ce(n,o),ce(n,i),ce(t,r),ce(t,s),ce(s,a),ce(a,l),ce(t,u)},p:function(e,t){1&t&&d!==(d=e[2]+"")&&ue(o,d),1&t&&f!==(f=e[3]+"")&&ue(l,f)},d:function(e){e&&re(t)}};return oe("SvelteRegisterBlock",{block:p,id:qt.name,type:"each",source:"(25:12) {#each $eventLog.filter(e => e.event) as { name, event }}",ctx:e}),p}function Ft(e){let t,n,i,r,s,a,l,u,d,f=e[0].filter(Jt);de(f);let p=[];for(let t=0;t<f.length;t+=1)p[t]=qt(It(e,f,t));const m={c:function(){t=v("section"),n=v("h3"),i=w("Event Log "),r=v("small"),s=w("please open\n        "),a=v("code"),a.textContent="about://webrtc-internals",l=b(),u=v("div"),d=v("table");for(let e=0;e<p.length;e+=1)p[e].c();c(a,"src/EventLog.svelte",16,8,295),c(r,"src/EventLog.svelte",14,18,259),c(n,"src/EventLog.svelte",14,4,245),ae(d,"class","vertical svelte-111zlyk"),c(d,"src/EventLog.svelte",23,8,385),ae(u,"class","box"),c(u,"src/EventLog.svelte",19,4,356),c(t,"src/EventLog.svelte",12,0,230)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ie(e,t,o),ce(t,n),ce(n,i),ce(n,r),ce(r,s),ce(r,a),ce(t,l),ce(t,u),ce(u,d);for(let e=0;e<p.length;e+=1)p[e].m(d,null)},p:function(e,[t]){if(1&t){let n;for(f=e[0].filter(Jt),de(f),n=0;n<f.length;n+=1){const o=It(e,f,n);p[n]?p[n].p(o,t):(p[n]=qt(o),p[n].c(),p[n].m(d,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=f.length}},i:o,o:o,d:function(e){e&&re(t),$(p,e)}};return oe("SvelteRegisterBlock",{block:m,id:Ft.name,type:"component",source:"",ctx:e}),m}const Jt=e=>e.event;function zt(e,t,n){let o;d($e,"eventLog"),p(e,$e,e=>n(0,o=e));let{$$slots:c={},$$scope:i}=t;fe("EventLog",c,[]);const r=Array(100).fill({name:"hendrik",event:"fun stuff"}),s=[];return Object.keys(t).forEach(e=>{~s.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<EventLog> was created with unknown prop '${e}'`)}),e.$capture_state=()=>({eventLog:$e,dummyData:r,$eventLog:o}),[o]}var Vt=class extends pe{constructor(e){super(e),ne(this,e,zt,Ft,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"EventLog",options:e,id:Ft.name})}};function Wt(e){let t,n;t=new At({props:{name:"alice",isCaller:"true",recipient:"bob"},$$inline:!0});const o={c:function(){Z(t.$$.fragment)},m:function(e,o){ee(t,e,o),n=!0},i:function(e){n||(Y(t.$$.fragment,e),n=!0)},o:function(e){G(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:o,id:Wt.name,type:"if",source:"(25:8) {#if $config.hasCaller}",ctx:e}),o}function Ht(e){let t,n;t=new At({props:{name:"bob",isReceiver:"true",recipient:"alice"},$$inline:!0});const o={c:function(){Z(t.$$.fragment)},m:function(e,o){ee(t,e,o),n=!0},i:function(e){n||(Y(t.$$.fragment,e),n=!0)},o:function(e){G(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:o,id:Ht.name,type:"if",source:"(29:8) {#if $config.hasReceiver}",ctx:e}),o}function Xt(e){let t,n;t=new Vt({$$inline:!0});const o={c:function(){Z(t.$$.fragment)},m:function(e,o){ee(t,e,o),n=!0},i:function(e){n||(Y(t.$$.fragment,e),n=!0)},o:function(e){G(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:o,id:Xt.name,type:"if",source:"(33:8) {#if !$config.hideSignaling}",ctx:e}),o}function Yt(e){let t,n,o,i,r,s,a,l,u,d,f=e[0].hasCaller&&Wt(e),p=e[0].hasReceiver&&Ht(e),m=!e[0].hideSignaling&&Xt(e);u=new Ue({$$inline:!0});const h={c:function(){t=v("div"),n=v("h1"),n.textContent="WebRTC Plumber",o=b(),i=v("main"),f&&f.c(),r=b(),p&&p.c(),s=b(),m&&m.c(),a=b(),l=v("aside"),Z(u.$$.fragment),c(n,"src/Demo.svelte",21,4,437),ae(i,"class","svelte-1mx8d2d"),c(i,"src/Demo.svelte",22,4,465),c(l,"src/Demo.svelte",37,4,810),ae(t,"class","svelte-1mx8d2d"),c(t,"src/Demo.svelte",20,0,427)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,c){ie(e,t,c),ce(t,n),ce(t,o),ce(t,i),f&&f.m(i,null),ce(i,r),p&&p.m(i,null),ce(i,s),m&&m.m(i,null),ce(t,a),ce(t,l),ee(u,l,null),d=!0},p:function(e,[t]){e[0].hasCaller?f?1&t&&Y(f,1):(f=Wt(e),f.c(),Y(f,1),f.m(i,r)):f&&(H(),G(f,1,1,()=>{f=null}),X()),e[0].hasReceiver?p?1&t&&Y(p,1):(p=Ht(e),p.c(),Y(p,1),p.m(i,s)):p&&(H(),G(p,1,1,()=>{p=null}),X()),e[0].hideSignaling?m&&(H(),G(m,1,1,()=>{m=null}),X()):m?1&t&&Y(m,1):(m=Xt(e),m.c(),Y(m,1),m.m(i,null))},i:function(e){d||(Y(f),Y(p),Y(m),Y(u.$$.fragment,e),d=!0)},o:function(e){G(f),G(p),G(m),G(u.$$.fragment,e),d=!1},d:function(e){e&&re(t),f&&f.d(),p&&p.d(),m&&m.d(),te(u)}};return oe("SvelteRegisterBlock",{block:h,id:Yt.name,type:"component",source:"",ctx:e}),h}function Gt(e,t,n){let o;d(ye,"config"),p(e,ye,e=>n(0,o=e));let{$$slots:c={},$$scope:i}=t;fe("Demo",c,[]);const r=[];return Object.keys(t).forEach(e=>{~r.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<Demo> was created with unknown prop '${e}'`)}),e.$capture_state=()=>({config:ye,offerStore:xe,answerStore:Ce,candidatesStore:Re,Config:Ue,Participant:At,EventLog:Vt,$config:o}),[o]}var Kt=class extends pe{constructor(e){super(e),ne(this,e,Gt,Yt,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"Demo",options:e,id:Yt.name})}};function Qt(e){let t,n;t=new Kt({$$inline:!0});const c={c:function(){Z(t.$$.fragment)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){ee(t,e,o),n=!0},p:o,i:function(e){n||(Y(t.$$.fragment,e),n=!0)},o:function(e){G(t.$$.fragment,e),n=!1},d:function(e){te(t,e)}};return oe("SvelteRegisterBlock",{block:c,id:Qt.name,type:"component",source:"",ctx:e}),c}function Zt(e,t,n){let{$$slots:o={},$$scope:c}=t;fe("App",o,[]);const i=[];return Object.keys(t).forEach(e=>{~i.indexOf(e)||"$$"===e.slice(0,2)||console.warn(`<App> was created with unknown prop '${e}'`)}),e.$capture_state=()=>({Demo:Kt}),[]}const en=new class extends pe{constructor(e){super(e),ne(this,e,Zt,Qt,l,{}),oe("SvelteRegisterComponent",{component:this,tagName:"App",options:e,id:Qt.name})}}({target:document.body,props:{}});window.app=en;t.default=en}]);